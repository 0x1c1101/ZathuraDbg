        -:    0:Source:/home/rc/ZathuraDbg/vendor/code/tinyfiledialogs.c
        -:    0:Graph:/home/rc/ZathuraDbg/src/cmake-build-debug-coverage/CMakeFiles/Zathura.dir/home/rc/ZathuraDbg/vendor/code/tinyfiledialogs.c.gcno
        -:    0:Data:/home/rc/ZathuraDbg/src/cmake-build-debug-coverage/CMakeFiles/Zathura.dir/home/rc/ZathuraDbg/vendor/code/tinyfiledialogs.c.gcda
        -:    0:Runs:1
        -:    1:/* SPDX-License-Identifier: Zlib
        -:    2:Copyright (c) 2014 - 2024 Guillaume Vareille http://ysengrin.com
        -:    3:	 ________________________________________________________________
        -:    4:	|                                                                |
        -:    5:	| 100% compatible C C++  ->  You can rename this .c file as .cpp |
        -:    6:	|________________________________________________________________|
        -:    7:
        -:    8:********* TINY FILE DIALOGS OFFICIAL WEBSITE IS ON SOURCEFORGE *********
        -:    9:  _________
        -:   10: /         \ tinyfiledialogs.c v3.18.2 [Jun 8, 2024] zlib licence
        -:   11: |tiny file| Unique code file created [November 9, 2014]
        -:   12: | dialogs |
        -:   13: \____  ___/ http://tinyfiledialogs.sourceforge.net
        -:   14:	  \|     git clone http://git.code.sf.net/p/tinyfiledialogs/code tinyfd
        -:   15:			  ____________________________________________
        -:   16:			 |                                            |
        -:   17:			 |   email: tinyfiledialogs at ysengrin.com   |
        -:   18:			 |____________________________________________|
        -:   19:  _________________________________________________________________________________
        -:   20: |                                                                                 |
        -:   21: | the windows only wchar_t UTF-16 prototypes are at the bottom of the header file |
        -:   22: |_________________________________________________________________________________|
        -:   23:  _________________________________________________________
        -:   24: |                                                         |
        -:   25: | on windows: - since v3.6 char is UTF-8 by default       |
        -:   26: |             - if you want MBCS set tinyfd_winUtf8 to 0  |
        -:   27: |             - functions like fopen expect MBCS          |
        -:   28: |_________________________________________________________|
        -:   29:
        -:   30:If you like tinyfiledialogs, please upvote my stackoverflow answer
        -:   31:https://stackoverflow.com/a/47651444
        -:   32:
        -:   33:- License -
        -:   34:This software is provided 'as-is', without any express or implied
        -:   35:warranty.  In no event will the authors be held liable for any damages
        -:   36:arising from the use of this software.
        -:   37:Permission is granted to anyone to use this software for any purpose,
        -:   38:including commercial applications, and to alter it and redistribute it
        -:   39:freely, subject to the following restrictions:
        -:   40:1. The origin of this software must not be misrepresented; you must not
        -:   41:claim that you wrote the original software.  If you use this software
        -:   42:in a product, an acknowledgment in the product documentation would be
        -:   43:appreciated but is not required.
        -:   44:2. Altered source versions must be plainly marked as such, and must not be
        -:   45:misrepresented as being the original software.
        -:   46:3. This notice may not be removed or altered from any source distribution.
        -:   47:
        -:   48:     __________________________________________
        -:   49:    |  ______________________________________  |
        -:   50:    | |                                      | |
        -:   51:    | | DO NOT USE USER INPUT IN THE DIALOGS | |
        -:   52:    | |______________________________________| |
        -:   53:    |__________________________________________|
        -:   54:*/
        -:   55:
        -:   56:
        -:   57:#if defined(__GNUC__) || defined(__clang__)
        -:   58:#ifndef _GNU_SOURCE
        -:   59: #define _GNU_SOURCE /* used only to resolve symbolic links. Can be commented out */
        -:   60: #ifndef _POSIX_C_SOURCE
        -:   61:  #ifdef __FreeBSD__
        -:   62:    #define _POSIX_C_SOURCE 199506L /* 199506L is enough for freebsd for realpath() */
        -:   63:  #elif defined(__illumos__) || defined(__solaris__)
        -:   64:    #define _POSIX_C_SOURCE 200112L /* illumos/solaris needs 200112L for realpath() */
        -:   65:  #else
        -:   66:    #define _POSIX_C_SOURCE 2 /* to accept POSIX 2 in old ANSI C standards */
        -:   67:  #endif
        -:   68: #endif
        -:   69:#endif
        -:   70:#endif
        -:   71:
        -:   72:#include <stdio.h>
        -:   73:#include <stdlib.h>
        -:   74:#include <string.h>
        -:   75:#include <ctype.h>
        -:   76:#include <sys/stat.h>
        -:   77:
        -:   78:#ifdef _WIN32
        -:   79: #ifdef __BORLANDC__
        -:   80:  #define _getch getch
        -:   81: #endif
        -:   82: #ifndef _WIN32_WINNT
        -:   83:  #define _WIN32_WINNT 0x0500
        -:   84: #endif
        -:   85: #include <windows.h>
        -:   86: #include <commdlg.h>
        -:   87: #include <shlobj.h>
        -:   88: #include <conio.h>
        -:   89: #include <direct.h>
        -:   90: #define TINYFD_NOCCSUNICODE
        -:   91: #define TINYFD_SLASH "\\"
        -:   92:#else
        -:   93: #include <limits.h>
        -:   94: #include <unistd.h>
        -:   95: #include <dirent.h> /* on old systems try <sys/dir.h> instead */
        -:   96: #include <termios.h>
        -:   97: #include <sys/utsname.h>
        -:   98: #include <signal.h> /* on old systems try <sys/signal.h> instead */
        -:   99: #define TINYFD_SLASH "/"
        -:  100:#endif /* _WIN32 */
        -:  101:
        -:  102:#include "tinyfiledialogs.h"
        -:  103:
        -:  104:#define MAX_PATH_OR_CMD 1024 /* _MAX_PATH or MAX_PATH */
        -:  105:
        -:  106:#ifndef MAX_MULTIPLE_FILES
        -:  107:#define MAX_MULTIPLE_FILES 1024
        -:  108:#endif
        -:  109:#define LOW_MULTIPLE_FILES 32
        -:  110:
        -:  111:char tinyfd_version[8] = "3.18.2";
        -:  112:
        -:  113:/******************************************************************************************************/
        -:  114:/**************************************** UTF-8 on Windows ********************************************/
        -:  115:/******************************************************************************************************/
        -:  116:#ifdef _WIN32
        -:  117:/* if you want to use UTF-8 ( instead of the UTF-16/wchar_t functions at the end of tinyfiledialogs.h )
        -:  118:Make sure your code is really prepared for UTF-8 (on windows, functions like fopen() expect MBCS and not UTF-8) */
        -:  119:int tinyfd_winUtf8 = 1; /* on windows char strings can be 1:UTF-8(default) or 0:MBCS */
        -:  120:/* for MBCS change this to 0, here or in your code */
        -:  121:#endif
        -:  122:/******************************************************************************************************/
        -:  123:/******************************************************************************************************/
        -:  124:/******************************************************************************************************/
        -:  125:
        -:  126:int tinyfd_verbose = 0 ; /* on unix: prints the command line calls */
        -:  127:int tinyfd_silent = 1 ; /* 1 (default) or 0 : on unix, hide errors and warnings from called dialogs */
        -:  128:
        -:  129:/* Curses dialogs are difficult to use, on windows they are only ascii and uses the unix backslah */
        -:  130:int tinyfd_allowCursesDialogs = 0 ; /* 0 (default) or 1 */
        -:  131:int tinyfd_forceConsole = 0 ; /* 0 (default) or 1 */
        -:  132:/* for unix & windows: 0 (graphic mode) or 1 (console mode).
        -:  133:0: try to use a graphic solution, if it fails then it uses console mode.
        -:  134:1: forces all dialogs into console mode even when the X server is present.
        -:  135:   it can use the package dialog or dialog.exe.
        -:  136:   on windows it only make sense for console applications */
        -:  137:
        -:  138:int tinyfd_assumeGraphicDisplay = 0; /* 0 (default) or 1  */
        -:  139:/* some systems don't set the environment variable DISPLAY even when a graphic display is present.
        -:  140:set this to 1 to tell tinyfiledialogs to assume the existence of a graphic display */
        -:  141:
        -:  142:
        -:  143:char tinyfd_response[1024];
        -:  144:/* if you pass "tinyfd_query" as aTitle,
        -:  145:the functions will not display the dialogs
        -:  146:but return 0 for console mode, 1 for graphic mode.
        -:  147:tinyfd_response is then filled with the retain solution.
        -:  148:possible values for tinyfd_response are (all lowercase)
        -:  149:for graphic mode:
        -:  150:  windows_wchar windows applescript kdialog zenity zenity3 yad matedialog
        -:  151:  shellementary qarma python2-tkinter python3-tkinter python-dbus
        -:  152:  perl-dbus gxmessage gmessage xmessage xdialog gdialog dunst
        -:  153:for console mode:
        -:  154:  dialog whiptail basicinput no_solution */
        -:  155:
        -:  156:static int gWarningDisplayed = 0 ;
        -:  157:static char gTitle[]="missing software! (we will try basic console input)";
        -:  158:
        -:  159:#ifdef _WIN32
        -:  160:char tinyfd_needs[] = "\
        -:  161: ___________\n\
        -:  162:/           \\ \n\
        -:  163:| tiny file |\n\
        -:  164:|  dialogs  |\n\
        -:  165:\\_____  ____/\n\
        -:  166:      \\|\
        -:  167:\ntiny file dialogs on Windows needs:\
        -:  168:\n   a graphic display\
        -:  169:\nor dialog.exe (curses console mode  ** Disabled by default **)\
        -:  170:\nor a console for basic input";
        -:  171:#else
        -:  172:char tinyfd_needs[] = "\
        -:  173: ___________\n\
        -:  174:/           \\ \n\
        -:  175:| tiny file |\n\
        -:  176:|  dialogs  |\n\
        -:  177:\\_____  ____/\n\
        -:  178:      \\|\
        -:  179:\ntiny file dialogs on UNIX needs:\
        -:  180:\n   applescript or kdialog or yad or Xdialog\
        -:  181:\nor zenity (or matedialog or shellementary or qarma)\
        -:  182:\nor python (2 or 3) + tkinter + python-dbus (optional)\
        -:  183:\nor dialog (opens console if needed) ** Disabled by default **\
        -:  184:\nor xterm + bash (opens console for basic input)\
        -:  185:\nor existing console for basic input.";
        -:  186:
        -:  187:#endif
        -:  188:
        -:  189:#ifdef _MSC_VER
        -:  190:#pragma warning(disable:4996) /* allows usage of strncpy, strcpy, strcat, sprintf, fopen */
        -:  191:#pragma warning(disable:4100) /* allows usage of strncpy, strcpy, strcat, sprintf, fopen */
        -:  192:#pragma warning(disable:4706) /* allows usage of strncpy, strcpy, strcat, sprintf, fopen */
        -:  193:#endif
        -:  194:
function getenvDISPLAY called 0 returned 0% blocks executed 0%
    #####:  195:static int getenvDISPLAY(void)
        -:  196:{
    #####:  197:		return tinyfd_assumeGraphicDisplay || getenv("DISPLAY");
    %%%%%:  197-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  197-block 3
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%:  197-block 5
    %%%%%:  197-block 6
    %%%%%:  197-block 7
        -:  198:}
        -:  199:
        -:  200:
function getCurDir called 0 returned 0% blocks executed 0%
    #####:  201:static char * getCurDir(void)
        -:  202:{
        -:  203:		static char lCurDir[MAX_PATH_OR_CMD];
    #####:  204:		return getcwd(lCurDir, sizeof(lCurDir));
    %%%%%:  204-block 2
call    0 never executed
        -:  205:}
        -:  206:
        -:  207:
function getPathWithoutFinalSlash called 0 returned 0% blocks executed 0%
    #####:  208:static char * getPathWithoutFinalSlash(
        -:  209:		char * aoDestination, /* make sure it is allocated, use _MAX_PATH */
        -:  210:		char const * aSource) /* aoDestination and aSource can be the same */
        -:  211:{
        -:  212:		char const * lTmp ;
    #####:  213:		if ( aSource )
    %%%%%:  213-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  214:		{
    #####:  215:				lTmp = strrchr(aSource, '/');
    #####:  216:				if (!lTmp)
    %%%%%:  216-block 3
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  217:				{
    #####:  218:						lTmp = strrchr(aSource, '\\');
    %%%%%:  218-block 4
        -:  219:				}
    #####:  220:				if (lTmp)
    %%%%%:  220-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  221:				{
    #####:  222:						strncpy(aoDestination, aSource, lTmp - aSource );
    #####:  223:						aoDestination[lTmp - aSource] = '\0';
    %%%%%:  223-block 6
        -:  224:				}
        -:  225:				else
        -:  226:				{
    #####:  227:						* aoDestination = '\0';
    %%%%%:  227-block 7
        -:  228:				}
        -:  229:		}
        -:  230:		else
        -:  231:		{
    #####:  232:				* aoDestination = '\0';
    %%%%%:  232-block 8
        -:  233:		}
    #####:  234:		return aoDestination;
    %%%%%:  234-block 9
        -:  235:}
        -:  236:
        -:  237:
function getLastName called 0 returned 0% blocks executed 0%
    #####:  238:static char * getLastName(
        -:  239:		char * aoDestination, /* make sure it is allocated */
        -:  240:		char const * aSource)
        -:  241:{
        -:  242:		/* copy the last name after '/' or '\' */
        -:  243:		char const * lTmp ;
    #####:  244:		if ( aSource )
    %%%%%:  244-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  245:		{
    #####:  246:				lTmp = strrchr(aSource, '/');
    #####:  247:				if (!lTmp)
    %%%%%:  247-block 3
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  248:				{
    #####:  249:						lTmp = strrchr(aSource, '\\');
    %%%%%:  249-block 4
        -:  250:				}
    #####:  251:				if (lTmp)
    %%%%%:  251-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  252:				{
    #####:  253:						strcpy(aoDestination, lTmp + 1);
    %%%%%:  253-block 6
        -:  254:				}
        -:  255:				else
        -:  256:				{
    #####:  257:						strcpy(aoDestination, aSource);
    %%%%%:  257-block 7
        -:  258:				}
        -:  259:		}
        -:  260:		else
        -:  261:		{
    #####:  262:				* aoDestination = '\0';
    %%%%%:  262-block 8
        -:  263:		}
    #####:  264:		return aoDestination;
    %%%%%:  264-block 9
        -:  265:}
        -:  266:
        -:  267:
function ensureFinalSlash called 0 returned 0% blocks executed 0%
    #####:  268:static void ensureFinalSlash( char * aioString )
        -:  269:{
    #####:  270:		if ( aioString && strlen( aioString ) )
    %%%%%:  270-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  270-block 3
branch  2 never executed (fallthrough)
branch  3 never executed
        -:  271:		{
    #####:  272:				char * lastcar = aioString + strlen( aioString ) - 1 ;
    #####:  273:				if ( strncmp( lastcar , TINYFD_SLASH , 1 ) )
    %%%%%:  273-block 4
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  274:				{
    #####:  275:						strcat( lastcar , TINYFD_SLASH ) ;
    %%%%%:  275-block 5
        -:  276:				}
        -:  277:		}
    #####:  278:}
        -:  279:
        -:  280:
function Hex2RGB called 0 returned 0% blocks executed 0%
    #####:  281:static void Hex2RGB( char const aHexRGB[8] , unsigned char aoResultRGB[3] )
        -:  282:{
        -:  283:		char lColorChannel[8] ;
    #####:  284:		if ( aoResultRGB )
    %%%%%:  284-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  285:		{
    #####:  286:				if ( aHexRGB )
    %%%%%:  286-block 3
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  287:				{
    #####:  288:						strcpy(lColorChannel, aHexRGB ) ;
    #####:  289:						aoResultRGB[2] = (unsigned char)strtoul(lColorChannel+5,NULL,16);
    %%%%%:  289-block 4
call    0 never executed
    #####:  290:						lColorChannel[5] = '\0';
    #####:  291:						aoResultRGB[1] = (unsigned char)strtoul(lColorChannel+3,NULL,16);
call    0 never executed
    #####:  292:						lColorChannel[3] = '\0';
    #####:  293:						aoResultRGB[0] = (unsigned char)strtoul(lColorChannel+1,NULL,16);
call    0 never executed
        -:  294:/* printf("%d %d %d\n", aoResultRGB[0], aoResultRGB[1], aoResultRGB[2]); */
        -:  295:				}
        -:  296:				else
        -:  297:				{
    #####:  298:						aoResultRGB[0]=0;
    #####:  299:						aoResultRGB[1]=0;
    #####:  300:						aoResultRGB[2]=0;
    %%%%%:  300-block 8
        -:  301:				}
        -:  302:		}
    #####:  303:}
        -:  304:
function RGB2Hex called 0 returned 0% blocks executed 0%
    #####:  305:static void RGB2Hex( unsigned char const aRGB[3], char aoResultHexRGB[8] )
        -:  306:{
    #####:  307:		if ( aoResultHexRGB )
    %%%%%:  307-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  308:		{
    #####:  309:				if ( aRGB )
    %%%%%:  309-block 3
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  310:				{
        -:  311:#if (defined(__cplusplus ) && __cplusplus >= 201103L) || (defined(__STDC_VERSION__) && __STDC_VERSION__ >= 199901L) || defined(__clang__)
    #####:  312:	sprintf(aoResultHexRGB, "#%02hhx%02hhx%02hhx", aRGB[0], aRGB[1], aRGB[2]);
    %%%%%:  312-block 4
        -:  313:#else
        -:  314:	sprintf(aoResultHexRGB, "#%02hx%02hx%02hx", aRGB[0], aRGB[1], aRGB[2]);
        -:  315:#endif
        -:  316:						 /*printf("aoResultHexRGB %s\n", aoResultHexRGB);*/
        -:  317:				}
        -:  318:				else
        -:  319:				{
    #####:  320:						aoResultHexRGB[0]=0;
    #####:  321:						aoResultHexRGB[1]=0;
    #####:  322:						aoResultHexRGB[2]=0;
    %%%%%:  322-block 5
        -:  323:				}
        -:  324:		}
    #####:  325:}
        -:  326:
        -:  327:
function tfd_replaceSubStr called 0 returned 0% blocks executed 0%
    #####:  328:void tfd_replaceSubStr( char const * aSource, char const * aOldSubStr,
        -:  329:						char const * aNewSubStr, char * aoDestination )
        -:  330:{
        -:  331:		char const * pOccurence ;
        -:  332:		char const * p ;
    #####:  333:		char const * lNewSubStr = "" ;
    #####:  334:		size_t lOldSubLen = strlen( aOldSubStr ) ;
        -:  335:
    #####:  336:		if ( ! aSource )
    %%%%%:  336-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  337:		{
    #####:  338:				* aoDestination = '\0' ;
    #####:  339:				return ;
    %%%%%:  339-block 3
        -:  340:		}
    #####:  341:		if ( ! aOldSubStr )
    %%%%%:  341-block 4
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  342:		{
    #####:  343:				strcpy( aoDestination , aSource ) ;
    #####:  344:				return ;
    %%%%%:  344-block 5
        -:  345:		}
    #####:  346:		if ( aNewSubStr )
    %%%%%:  346-block 6
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  347:		{
    #####:  348:				lNewSubStr = aNewSubStr ;
    %%%%%:  348-block 7
        -:  349:		}
    #####:  350:		p = aSource ;
    #####:  351:		* aoDestination = '\0' ;
    #####:  352:		while ( ( pOccurence = strstr( p , aOldSubStr ) ) != NULL )
    %%%%%:  352-block 8
    %%%%%:  352-block 10
branch  0 never executed
branch  1 never executed (fallthrough)
        -:  353:		{
    #####:  354:				strncat( aoDestination , p , pOccurence - p ) ;
    #####:  355:				strcat( aoDestination , lNewSubStr ) ;
    #####:  356:				p = pOccurence + lOldSubLen ;
    %%%%%:  356-block 9
        -:  357:		}
    #####:  358:		strcat( aoDestination , p ) ;
    %%%%%:  358-block 11
        -:  359:}
        -:  360:
        -:  361:
function filenameValid called 0 returned 0% blocks executed 0%
    #####:  362:static int filenameValid( char const * aFileNameWithoutPath )
        -:  363:{
    #####:  364:		if ( ! aFileNameWithoutPath
    %%%%%:  364-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
    #####:  365:		  || ! strlen(aFileNameWithoutPath)
    %%%%%:  365-block 3
branch  0 never executed (fallthrough)
branch  1 never executed
    #####:  366:		  || strpbrk(aFileNameWithoutPath , "\\/:*?\"<>|") )
    %%%%%:  366-block 4
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  367:		{
    #####:  368:				return 0 ;
    %%%%%:  368-block 5
        -:  369:		}
    #####:  370:		return 1 ;
    %%%%%:  370-block 6
        -:  371:}
        -:  372:
        -:  373:#ifndef _WIN32
        -:  374:
function fileExists called 0 returned 0% blocks executed 0%
    #####:  375:static int fileExists( char const * aFilePathAndName )
        -:  376:{
        -:  377:		FILE * lIn ;
    #####:  378:		if ( ! aFilePathAndName || ! strlen(aFilePathAndName) )
    %%%%%:  378-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  378-block 3
branch  2 never executed (fallthrough)
branch  3 never executed
        -:  379:		{
    #####:  380:				return 0 ;
    %%%%%:  380-block 4
        -:  381:		}
    #####:  382:		lIn = fopen( aFilePathAndName , "r" ) ;
    %%%%%:  382-block 5
call    0 never executed
    #####:  383:		if ( ! lIn )
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  384:		{
    #####:  385:				return 0 ;
    %%%%%:  385-block 7
        -:  386:		}
    #####:  387:		fclose( lIn ) ;
    %%%%%:  387-block 8
call    0 never executed
    #####:  388:		return 1 ;
        -:  389:}
        -:  390:
        -:  391:#endif
        -:  392:
        -:  393:
function wipefile called 0 returned 0% blocks executed 0%
    #####:  394:static void wipefile(char const * aFilename)
        -:  395:{
        -:  396:		int i;
        -:  397:		struct stat st;
        -:  398:		FILE * lIn;
        -:  399:
    #####:  400:		if (stat(aFilename, &st) == 0)
    %%%%%:  400-block 2
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -:  401:		{
    #####:  402:				if ((lIn = fopen(aFilename, "w")))
    %%%%%:  402-block 4
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -:  403:				{
    #####:  404:						for (i = 0; i < st.st_size; i++)
    %%%%%:  404-block 6
    %%%%%:  404-block 9
branch  0 never executed
branch  1 never executed (fallthrough)
        -:  405:						{
    #####:  406:								fputc('A', lIn);
    %%%%%:  406-block 7
call    0 never executed
        -:  407:						}
    #####:  408:						fclose(lIn);
    %%%%%:  408-block 10
call    0 never executed
        -:  409:				}
        -:  410:		}
    #####:  411:}
        -:  412:
        -:  413:
function tfd_quoteDetected called 0 returned 0% blocks executed 0%
    #####:  414:int tfd_quoteDetected(char const * aString)
        -:  415:{
        -:  416:	char const * p;
        -:  417:
    #####:  418:	if (!aString) return 0;
    %%%%%:  418-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  418-block 3
        -:  419:
    #####:  420:	p = aString;
    #####:  421:	if ( strchr(p, '\''))
    %%%%%:  421-block 4
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  422:	{
    #####:  423:		return 1;
    %%%%%:  423-block 5
        -:  424:	}
        -:  425:
    #####:  426:	if ( strchr(p, '\"'))
    %%%%%:  426-block 6
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  427:	{
    #####:  428:		return 1;
    %%%%%:  428-block 7
        -:  429:	}
        -:  430:
    #####:  431:	if ( strchr(p, '`'))
    %%%%%:  431-block 8
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  432:	{
    #####:  433:		return 1;
    %%%%%:  433-block 9
        -:  434:	}
        -:  435:
    #####:  436:	p = aString;
    #####:  437:	while ((p = strchr(p, '$')))
    %%%%%:  437-block 10
    %%%%%:  437-block 15
branch  0 never executed
branch  1 never executed (fallthrough)
        -:  438:	{
    #####:  439:		p ++ ;
    #####:  440:		if ( ( * p == '(' ) || ( * p == '_' ) || isalpha( * p) ) return 1 ;
    %%%%%:  440-block 11
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  440-block 12
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%:  440-block 13
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%:  440-block 14
        -:  441:	}
        -:  442:
    #####:  443:	return 0;
    %%%%%:  443-block 16
        -:  444:}
        -:  445:
        -:  446:
function tinyfd_getGlobalChar called 0 returned 0% blocks executed 0%
    #####:  447:char const * tinyfd_getGlobalChar(char const * aCharVariableName) /* to be called from C# (you don't need this in C or C++) */
        -:  448:{
    #####:  449:		if (!aCharVariableName || !strlen(aCharVariableName)) return NULL;
    %%%%%:  449-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  449-block 3
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%:  449-block 4
    #####:  450:		else if (!strcmp(aCharVariableName, "tinyfd_version")) return tinyfd_version;
    %%%%%:  450-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  450-block 6
    #####:  451:		else if (!strcmp(aCharVariableName, "tinyfd_needs")) return tinyfd_needs;
    %%%%%:  451-block 7
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  451-block 8
    #####:  452:		else if (!strcmp(aCharVariableName, "tinyfd_response")) return tinyfd_response;
    %%%%%:  452-block 9
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  452-block 10
    #####:  453:		else return NULL ;
    %%%%%:  453-block 11
        -:  454:}
        -:  455:
        -:  456:
function tinyfd_getGlobalInt called 0 returned 0% blocks executed 0%
    #####:  457:int tinyfd_getGlobalInt(char const * aIntVariableName) /* to be called from C# (you don't need this in C or C++) */
        -:  458:{
    #####:  459:		if ( !aIntVariableName || !strlen(aIntVariableName) ) return -1 ;
    %%%%%:  459-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  459-block 3
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%:  459-block 4
    #####:  460:		else if ( !strcmp(aIntVariableName, "tinyfd_verbose") ) return tinyfd_verbose ;
    %%%%%:  460-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  460-block 6
    #####:  461:		else if ( !strcmp(aIntVariableName, "tinyfd_silent") ) return tinyfd_silent ;
    %%%%%:  461-block 7
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  461-block 8
    #####:  462:		else if ( !strcmp(aIntVariableName, "tinyfd_allowCursesDialogs") ) return tinyfd_allowCursesDialogs ;
    %%%%%:  462-block 9
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  462-block 10
    #####:  463:		else if ( !strcmp(aIntVariableName, "tinyfd_forceConsole") ) return tinyfd_forceConsole ;
    %%%%%:  463-block 11
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  463-block 12
    #####:  464:		else if ( !strcmp(aIntVariableName, "tinyfd_assumeGraphicDisplay") ) return tinyfd_assumeGraphicDisplay ;
    %%%%%:  464-block 13
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  464-block 14
        -:  465:#ifdef _WIN32
        -:  466:		else if ( !strcmp(aIntVariableName, "tinyfd_winUtf8") ) return tinyfd_winUtf8 ;
        -:  467:#endif
    #####:  468:		else return -1;
    %%%%%:  468-block 15
        -:  469:}
        -:  470:
        -:  471:
function tinyfd_setGlobalInt called 0 returned 0% blocks executed 0%
    #####:  472:int tinyfd_setGlobalInt(char const * aIntVariableName, int aValue) /* to be called from C# (you don't need this in C or C++) */
        -:  473:{
    #####:  474:		if (!aIntVariableName || !strlen(aIntVariableName)) return -1 ;
    %%%%%:  474-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  474-block 3
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%:  474-block 4
    #####:  475:		else if (!strcmp(aIntVariableName, "tinyfd_verbose")) { tinyfd_verbose = aValue; return tinyfd_verbose; }
    %%%%%:  475-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  475-block 6
    #####:  476:		else if (!strcmp(aIntVariableName, "tinyfd_silent")) { tinyfd_silent = aValue; return tinyfd_silent; }
    %%%%%:  476-block 7
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  476-block 8
    #####:  477:		else if (!strcmp(aIntVariableName, "tinyfd_allowCursesDialogs")) { tinyfd_allowCursesDialogs = aValue; return tinyfd_allowCursesDialogs; }
    %%%%%:  477-block 9
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  477-block 10
    #####:  478:		else if (!strcmp(aIntVariableName, "tinyfd_forceConsole")) { tinyfd_forceConsole = aValue; return tinyfd_forceConsole; }
    %%%%%:  478-block 11
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  478-block 12
    #####:  479:		else if (!strcmp(aIntVariableName, "tinyfd_assumeGraphicDisplay")) { tinyfd_assumeGraphicDisplay = aValue; return tinyfd_assumeGraphicDisplay; }
    %%%%%:  479-block 13
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%:  479-block 14
        -:  480:#ifdef _WIN32
        -:  481:		else if (!strcmp(aIntVariableName, "tinyfd_winUtf8")) { tinyfd_winUtf8 = aValue; return tinyfd_winUtf8; }
        -:  482:#endif
    #####:  483:		else return -1;
    %%%%%:  483-block 15
        -:  484:}
        -:  485:
        -:  486:
        -:  487:#ifdef _WIN32
        -:  488:static int powershellPresent(void)
        -:  489:{ /*only on vista and above (or installed on xp)*/
        -:  490:	static int lPowershellPresent = -1;
        -:  491:	char lBuff[MAX_PATH_OR_CMD];
        -:  492:	FILE* lIn;
        -:  493:	char const* lString = "powershell.exe";
        -:  494:
        -:  495:	if (lPowershellPresent < 0)
        -:  496:	{
        -:  497:		if (!(lIn = _popen("where powershell.exe", "r")))
        -:  498:		{
        -:  499:			lPowershellPresent = 0;
        -:  500:			return 0;
        -:  501:		}
        -:  502:		while (fgets(lBuff, sizeof(lBuff), lIn) != NULL)
        -:  503:		{
        -:  504:		}
        -:  505:		_pclose(lIn);
        -:  506:		if (lBuff[strlen(lBuff) - 1] == '\n')
        -:  507:		{
        -:  508:			lBuff[strlen(lBuff) - 1] = '\0';
        -:  509:		}
        -:  510:		if (strcmp(lBuff + strlen(lBuff) - strlen(lString), lString))
        -:  511:		{
        -:  512:			lPowershellPresent = 0;
        -:  513:		}
        -:  514:		else
        -:  515:		{
        -:  516:			lPowershellPresent = 1;
        -:  517:		}
        -:  518:	}
        -:  519:	return lPowershellPresent;
        -:  520:}
        -:  521:
        -:  522:static int windowsVersion(void)
        -:  523:{
        -:  524:#if !defined(__MINGW32__) || defined(__MINGW64_VERSION_MAJOR)
        -:  525:	typedef LONG NTSTATUS  ;
        -:  526:	typedef NTSTATUS(WINAPI* RtlGetVersionPtr)(PRTL_OSVERSIONINFOW);
        -:  527:	HMODULE hMod;
        -:  528:	RtlGetVersionPtr lFxPtr;
        -:  529:	RTL_OSVERSIONINFOW lRovi = { 0 };
        -:  530:
        -:  531:	hMod = GetModuleHandleW(L"ntdll.dll");
        -:  532:	if (hMod) {
        -:  533:		lFxPtr = (RtlGetVersionPtr)GetProcAddress(hMod, "RtlGetVersion");
        -:  534:		if (lFxPtr)
        -:  535:		{
        -:  536:			lRovi.dwOSVersionInfoSize = sizeof(lRovi);
        -:  537:			if (!lFxPtr(&lRovi))
        -:  538:			{
        -:  539:				return lRovi.dwMajorVersion;
        -:  540:			}
        -:  541:		}
        -:  542:	}
        -:  543:#endif
        -:  544:	if (powershellPresent()) return 6; /*minimum is vista or installed on xp*/
        -:  545:	return 0;
        -:  546:}
        -:  547:
        -:  548:
        -:  549:static void replaceChr(char * aString, char aOldChr, char aNewChr)
        -:  550:{
        -:  551:		char * p;
        -:  552:
        -:  553:		if (!aString) return;
        -:  554:		if (aOldChr == aNewChr) return;
        -:  555:
        -:  556:		p = aString;
        -:  557:		while ((p = strchr(p, aOldChr)))
        -:  558:		{
        -:  559:				*p = aNewChr;
        -:  560:				p++;
        -:  561:		}
        -:  562:		return;
        -:  563:}
        -:  564:
        -:  565:
        -:  566:#if !defined(WC_ERR_INVALID_CHARS)
        -:  567:/* undefined prior to Vista, so not yet in MINGW header file */
        -:  568:#define WC_ERR_INVALID_CHARS 0x00000000 /* 0x00000080 for MINGW maybe ? */
        -:  569:#endif
        -:  570:
        -:  571:static int sizeUtf16From8(char const * aUtf8string)
        -:  572:{
        -:  573:		return MultiByteToWideChar(CP_UTF8, MB_ERR_INVALID_CHARS,
        -:  574:				aUtf8string, -1, NULL, 0);
        -:  575:}
        -:  576:
        -:  577:
        -:  578:static int sizeUtf16FromMbcs(char const * aMbcsString)
        -:  579:{
        -:  580:		return MultiByteToWideChar(CP_ACP, MB_ERR_INVALID_CHARS,
        -:  581:				aMbcsString, -1, NULL, 0);
        -:  582:}
        -:  583:
        -:  584:
        -:  585:static int sizeUtf8(wchar_t const * aUtf16string)
        -:  586:{
        -:  587:		return WideCharToMultiByte(CP_UTF8, WC_ERR_INVALID_CHARS,
        -:  588:				aUtf16string, -1, NULL, 0, NULL, NULL);
        -:  589:}
        -:  590:
        -:  591:
        -:  592:static int sizeMbcs(wchar_t const * aMbcsString)
        -:  593:{
        -:  594:		int lRes = WideCharToMultiByte(CP_ACP, 0,
        -:  595:				aMbcsString, -1, NULL, 0, NULL, NULL);
        -:  596:		/* DWORD licic = GetLastError(); */
        -:  597:		return lRes;
        -:  598:}
        -:  599:
        -:  600:
        -:  601:wchar_t* tinyfd_mbcsTo16(char const* aMbcsString)
        -:  602:{
        -:  603:	static wchar_t* lMbcsString = NULL;
        -:  604:	int lSize;
        -:  605:
        -:  606:	free(lMbcsString);
        -:  607:	if (!aMbcsString) { lMbcsString = NULL; return NULL; }
        -:  608:	lSize = sizeUtf16FromMbcs(aMbcsString);
        -:  609:	if (lSize)
        -:  610:	{
        -:  611:		lMbcsString = (wchar_t*) malloc(lSize * sizeof(wchar_t));
        -:  612:		lSize = MultiByteToWideChar(CP_ACP, 0, aMbcsString, -1, lMbcsString, lSize);
        -:  613:	}
        -:  614:	else wcscpy(lMbcsString, L"");
        -:  615:	return lMbcsString;
        -:  616:}
        -:  617:
        -:  618:
        -:  619:wchar_t * tinyfd_utf8to16(char const * aUtf8string)
        -:  620:{
        -:  621:		static wchar_t * lUtf16string = NULL;
        -:  622:		int lSize;
        -:  623:
        -:  624:		free(lUtf16string);
        -:  625:		if (!aUtf8string) {lUtf16string = NULL; return NULL;}
        -:  626:		lSize = sizeUtf16From8(aUtf8string);
        -:  627:	if (lSize)
        -:  628:	{
        -:  629:		lUtf16string = (wchar_t*) malloc(lSize * sizeof(wchar_t));
        -:  630:		lSize = MultiByteToWideChar(CP_UTF8, MB_ERR_INVALID_CHARS,
        -:  631:			aUtf8string, -1, lUtf16string, lSize);
        -:  632:		return lUtf16string;
        -:  633:	}
        -:  634:	else
        -:  635:	{
        -:  636:		/* let's try mbcs anyway */
        -:  637:		lUtf16string = NULL;
        -:  638:		return tinyfd_mbcsTo16(aUtf8string);
        -:  639:	}
        -:  640:}
        -:  641:
        -:  642:
        -:  643:char * tinyfd_utf16toMbcs(wchar_t const * aUtf16string)
        -:  644:{
        -:  645:		static char * lMbcsString = NULL;
        -:  646:		int lSize;
        -:  647:
        -:  648:		free(lMbcsString);
        -:  649:		if (!aUtf16string) { lMbcsString = NULL; return NULL; }
        -:  650:		lSize = sizeMbcs(aUtf16string);
        -:  651:	if (lSize)
        -:  652:	{
        -:  653:		lMbcsString = (char*) malloc(lSize);
        -:  654:		lSize = WideCharToMultiByte(CP_ACP, 0, aUtf16string, -1, lMbcsString, lSize, NULL, NULL);
        -:  655:	}
        -:  656:	else strcpy(lMbcsString, "");
        -:  657:		return lMbcsString;
        -:  658:}
        -:  659:
        -:  660:
        -:  661:char * tinyfd_utf8toMbcs(char const * aUtf8string)
        -:  662:{
        -:  663:		wchar_t const * lUtf16string;
        -:  664:		lUtf16string = tinyfd_utf8to16(aUtf8string);
        -:  665:		return tinyfd_utf16toMbcs(lUtf16string);
        -:  666:}
        -:  667:
        -:  668:
        -:  669:char * tinyfd_utf16to8(wchar_t const * aUtf16string)
        -:  670:{
        -:  671:		static char * lUtf8string = NULL;
        -:  672:		int lSize;
        -:  673:
        -:  674:		free(lUtf8string);
        -:  675:		if (!aUtf16string) { lUtf8string = NULL; return NULL; }
        -:  676:		lSize = sizeUtf8(aUtf16string);
        -:  677:	if (lSize)
        -:  678:	{
        -:  679:		lUtf8string = (char*) malloc(lSize);
        -:  680:		lSize = WideCharToMultiByte(CP_UTF8, WC_ERR_INVALID_CHARS, aUtf16string, -1, lUtf8string, lSize, NULL, NULL);
        -:  681:	}
        -:  682:	else strcpy(lUtf8string, "");
        -:  683:		return lUtf8string;
        -:  684:}
        -:  685:
        -:  686:
        -:  687:char * tinyfd_mbcsTo8(char const * aMbcsString)
        -:  688:{
        -:  689:		wchar_t const * lUtf16string;
        -:  690:		lUtf16string = tinyfd_mbcsTo16(aMbcsString);
        -:  691:		return tinyfd_utf16to8(lUtf16string);
        -:  692:}
        -:  693:
        -:  694:
        -:  695:void tinyfd_beep(void)
        -:  696:{
        -:  697:	if (windowsVersion() > 5) Beep(440, 300);
        -:  698:	else MessageBeep(MB_OK);
        -:  699:}
        -:  700:
        -:  701:
        -:  702:static void wipefileW(wchar_t const * aFilename)
        -:  703:{
        -:  704:		int i;
        -:  705:		FILE * lIn;
        -:  706:#if (defined(__MINGW32_MAJOR_VERSION) && !defined(__MINGW64__) && (__MINGW32_MAJOR_VERSION <= 3)) || defined(__BORLANDC__) || defined(__WATCOMC__)
        -:  707:		struct _stat st;
        -:  708:		if (_wstat(aFilename, &st) == 0)
        -:  709:#else
        -:  710:		struct __stat64 st;
        -:  711:		if (_wstat64(aFilename, &st) == 0)
        -:  712:#endif
        -:  713:		{
        -:  714:				if ((lIn = _wfopen(aFilename, L"w")))
        -:  715:				{
        -:  716:						for (i = 0; i < st.st_size; i++)
        -:  717:						{
        -:  718:								fputc('A', lIn);
        -:  719:						}
        -:  720:						fclose(lIn);
        -:  721:				}
        -:  722:		}
        -:  723:}
        -:  724:
        -:  725:
        -:  726:static wchar_t * getPathWithoutFinalSlashW(
        -:  727:		wchar_t * aoDestination, /* make sure it is allocated, use _MAX_PATH */
        -:  728:		wchar_t const * aSource) /* aoDestination and aSource can be the same */
        -:  729:{
        -:  730:		wchar_t const * lTmp;
        -:  731:		if (aSource)
        -:  732:		{
        -:  733:				lTmp = wcsrchr(aSource, L'/');
        -:  734:				if (!lTmp)
        -:  735:				{
        -:  736:						lTmp = wcsrchr(aSource, L'\\');
        -:  737:				}
        -:  738:				if (lTmp)
        -:  739:				{
        -:  740:						wcsncpy(aoDestination, aSource, lTmp - aSource);
        -:  741:						aoDestination[lTmp - aSource] = L'\0';
        -:  742:				}
        -:  743:				else
        -:  744:				{
        -:  745:						*aoDestination = L'\0';
        -:  746:				}
        -:  747:		}
        -:  748:		else
        -:  749:		{
        -:  750:				*aoDestination = L'\0';
        -:  751:		}
        -:  752:		return aoDestination;
        -:  753:}
        -:  754:
        -:  755:
        -:  756:static wchar_t * getLastNameW(
        -:  757:		wchar_t * aoDestination, /* make sure it is allocated */
        -:  758:		wchar_t const * aSource)
        -:  759:{
        -:  760:		/* copy the last name after '/' or '\' */
        -:  761:		wchar_t const * lTmp;
        -:  762:		if (aSource)
        -:  763:		{
        -:  764:				lTmp = wcsrchr(aSource, L'/');
        -:  765:				if (!lTmp)
        -:  766:				{
        -:  767:						lTmp = wcsrchr(aSource, L'\\');
        -:  768:				}
        -:  769:				if (lTmp)
        -:  770:				{
        -:  771:						wcscpy(aoDestination, lTmp + 1);
        -:  772:				}
        -:  773:				else
        -:  774:				{
        -:  775:						wcscpy(aoDestination, aSource);
        -:  776:				}
        -:  777:		}
        -:  778:		else
        -:  779:		{
        -:  780:				*aoDestination = L'\0';
        -:  781:		}
        -:  782:		return aoDestination;
        -:  783:}
        -:  784:
        -:  785:
        -:  786:static void Hex2RGBW(wchar_t const aHexRGB[8], unsigned char aoResultRGB[3])
        -:  787:{
        -:  788:		wchar_t lColorChannel[8];
        -:  789:		if (aoResultRGB)
        -:  790:		{
        -:  791:				if (aHexRGB)
        -:  792:				{
        -:  793:						wcscpy(lColorChannel, aHexRGB);
        -:  794:						aoResultRGB[2] = (unsigned char)wcstoul(lColorChannel + 5, NULL, 16);
        -:  795:						lColorChannel[5] = '\0';
        -:  796:						aoResultRGB[1] = (unsigned char)wcstoul(lColorChannel + 3, NULL, 16);
        -:  797:						lColorChannel[3] = '\0';
        -:  798:						aoResultRGB[0] = (unsigned char)wcstoul(lColorChannel + 1, NULL, 16);
        -:  799:						/* printf("%d %d %d\n", aoResultRGB[0], aoResultRGB[1], aoResultRGB[2]); */
        -:  800:				}
        -:  801:				else
        -:  802:				{
        -:  803:						aoResultRGB[0] = 0;
        -:  804:						aoResultRGB[1] = 0;
        -:  805:						aoResultRGB[2] = 0;
        -:  806:				}
        -:  807:		}
        -:  808:}
        -:  809:
        -:  810:
        -:  811:static void RGB2HexW( unsigned char const aRGB[3], wchar_t aoResultHexRGB[8])
        -:  812:{
        -:  813:#if (defined(__cplusplus ) && __cplusplus >= 201103L) || (defined(__STDC_VERSION__) && __STDC_VERSION__ >= 199901L) || defined(__clang__)
        -:  814:		wchar_t const * const lPrintFormat = L"#%02hhx%02hhx%02hhx";
        -:  815:#else
        -:  816:		wchar_t const * const lPrintFormat = L"#%02hx%02hx%02hx";
        -:  817:#endif
        -:  818:
        -:  819:		if (aoResultHexRGB)
        -:  820:		{
        -:  821:				if (aRGB)
        -:  822:				{
        -:  823:						/* wprintf(L"aoResultHexRGB %s\n", aoResultHexRGB); */
        -:  824:#if !defined(__BORLANDC__) && !defined(__TINYC__) && !(defined(__MINGW32__) && !defined(__MINGW64_VERSION_MAJOR))
        -:  825:										swprintf(aoResultHexRGB, 8, lPrintFormat, aRGB[0], aRGB[1], aRGB[2]);
        -:  826:#else
        -:  827:										swprintf(aoResultHexRGB, lPrintFormat, aRGB[0], aRGB[1], aRGB[2]);
        -:  828:#endif
        -:  829:
        -:  830:				}
        -:  831:				else
        -:  832:				{
        -:  833:						aoResultHexRGB[0] = 0;
        -:  834:						aoResultHexRGB[1] = 0;
        -:  835:						aoResultHexRGB[2] = 0;
        -:  836:				}
        -:  837:		}
        -:  838:}
        -:  839:
        -:  840:
        -:  841:static int dirExists(char const * aDirPath)
        -:  842:{
        -:  843:#if (defined(__MINGW32_MAJOR_VERSION) && !defined(__MINGW64__) && (__MINGW32_MAJOR_VERSION <= 3)) || defined(__BORLANDC__) || defined(__WATCOMC__)
        -:  844:	struct _stat lInfo;
        -:  845:#else
        -:  846:	struct __stat64 lInfo;
        -:  847:#endif
        -:  848:		wchar_t * lTmpWChar;
        -:  849:		int lStatRet;
        -:  850:				size_t lDirLen;
        -:  851:
        -:  852:				if (!aDirPath)
        -:  853:						return 0;
        -:  854:				lDirLen = strlen(aDirPath);
        -:  855:				if (!lDirLen)
        -:  856:						return 1;
        -:  857:				if ( (lDirLen == 2) && (aDirPath[1] == ':') )
        -:  858:						return 1;
        -:  859:
        -:  860:		if (tinyfd_winUtf8)
        -:  861:		{
        -:  862:						lTmpWChar = tinyfd_utf8to16(aDirPath);
        -:  863:#if (defined(__MINGW32_MAJOR_VERSION) && !defined(__MINGW64__) && (__MINGW32_MAJOR_VERSION <= 3)) || defined(__BORLANDC__) || defined(__WATCOMC__)
        -:  864:			lStatRet = _wstat(lTmpWChar, &lInfo);
        -:  865:#else
        -:  866:			lStatRet = _wstat64(lTmpWChar, &lInfo);
        -:  867:#endif
        -:  868:			if (lStatRet != 0)
        -:  869:					return 0;
        -:  870:			else if (lInfo.st_mode & S_IFDIR)
        -:  871:					return 1;
        -:  872:			else
        -:  873:						return 0;
        -:  874:		}
        -:  875:#if (defined(__MINGW32_MAJOR_VERSION) && !defined(__MINGW64__) && (__MINGW32_MAJOR_VERSION <= 3)) || defined(__BORLANDC__) || defined(__WATCOMC__)
        -:  876:		else if (_stat(aDirPath, &lInfo) != 0)
        -:  877:#else
        -:  878:		else if (_stat64(aDirPath, &lInfo) != 0)
        -:  879:#endif
        -:  880:				return 0;
        -:  881:		else if (lInfo.st_mode & S_IFDIR)
        -:  882:				return 1;
        -:  883:		else
        -:  884:				return 0;
        -:  885:}
        -:  886:
        -:  887:
        -:  888:static int fileExists(char const * aFilePathAndName)
        -:  889:{
        -:  890:#if (defined(__MINGW32_MAJOR_VERSION) && !defined(__MINGW64__) && (__MINGW32_MAJOR_VERSION <= 3)) || defined(__BORLANDC__) || defined(__WATCOMC__)
        -:  891:	struct _stat lInfo;
        -:  892:#else
        -:  893:	struct __stat64 lInfo;
        -:  894:#endif
        -:  895:		wchar_t * lTmpWChar;
        -:  896:		int lStatRet;
        -:  897:		FILE * lIn;
        -:  898:
        -:  899:		if (!aFilePathAndName || !strlen(aFilePathAndName))
        -:  900:		{
        -:  901:				return 0;
        -:  902:		}
        -:  903:
        -:  904:		if (tinyfd_winUtf8)
        -:  905:		{
        -:  906:						lTmpWChar = tinyfd_utf8to16(aFilePathAndName);
        -:  907:#if (defined(__MINGW32_MAJOR_VERSION) && !defined(__MINGW64__) && (__MINGW32_MAJOR_VERSION <= 3)) || defined(__BORLANDC__) || defined(__WATCOMC__)
        -:  908:			lStatRet = _wstat(lTmpWChar, &lInfo);
        -:  909:#else
        -:  910:			lStatRet = _wstat64(lTmpWChar, &lInfo);
        -:  911:#endif
        -:  912:
        -:  913:			if (lStatRet != 0)
        -:  914:					return 0;
        -:  915:			else if (lInfo.st_mode & _S_IFREG)
        -:  916:					return 1;
        -:  917:			else
        -:  918:					return 0;
        -:  919:		}
        -:  920:		else
        -:  921:		{
        -:  922:				lIn = fopen(aFilePathAndName, "r");
        -:  923:				if (!lIn)
        -:  924:				{
        -:  925:						return 0;
        -:  926:				}
        -:  927:				fclose(lIn);
        -:  928:				return 1;
        -:  929:		}
        -:  930:}
        -:  931:
        -:  932:static void replaceWchar(wchar_t * aString,
        -:  933:		wchar_t aOldChr,
        -:  934:		wchar_t aNewChr)
        -:  935:{
        -:  936:		wchar_t * p;
        -:  937:
        -:  938:		if (!aString)
        -:  939:		{
        -:  940:				return ;
        -:  941:		}
        -:  942:
        -:  943:		if (aOldChr == aNewChr)
        -:  944:		{
        -:  945:				return ;
        -:  946:		}
        -:  947:
        -:  948:		p = aString;
        -:  949:		while ((p = wcsrchr(p, aOldChr)))
        -:  950:		{
        -:  951:				*p = aNewChr;
        -:  952:#ifdef TINYFD_NOCCSUNICODE
        -:  953:				p++;
        -:  954:#endif
        -:  955:				p++;
        -:  956:		}
        -:  957:		return ;
        -:  958:}
        -:  959:
        -:  960:
        -:  961:static int quoteDetectedW(wchar_t const * aString)
        -:  962:{
        -:  963:		wchar_t const * p;
        -:  964:
        -:  965:		if (!aString) return 0;
        -:  966:
        -:  967:		p = aString;
        -:  968:		while ((p = wcsrchr(p, L'\'')))
        -:  969:		{
        -:  970:				return 1;
        -:  971:		}
        -:  972:
        -:  973:		p = aString;
        -:  974:		while ((p = wcsrchr(p, L'\"')))
        -:  975:		{
        -:  976:				return 1;
        -:  977:		}
        -:  978:
        -:  979:		return 0;
        -:  980:}
        -:  981:
        -:  982:#endif /* _WIN32 */
        -:  983:
        -:  984:/* source and destination can be the same or ovelap*/
function ensureFilesExist called 0 returned 0% blocks executed 0%
    #####:  985:static char * ensureFilesExist(char * aDestination,
        -:  986:		char const * aSourcePathsAndNames)
        -:  987:{
    #####:  988:		char * lDestination = aDestination;
        -:  989:		char const * p;
        -:  990:		char const * p2;
        -:  991:		size_t lLen;
        -:  992:
    #####:  993:		if (!aSourcePathsAndNames)
    %%%%%:  993-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  994:		{
    #####:  995:				return NULL;
    %%%%%:  995-block 3
        -:  996:		}
    #####:  997:		lLen = strlen(aSourcePathsAndNames);
    #####:  998:		if (!lLen)
    %%%%%:  998-block 4
branch  0 never executed (fallthrough)
branch  1 never executed
        -:  999:		{
    #####: 1000:				return NULL;
    %%%%%: 1000-block 5
        -: 1001:		}
        -: 1002:
    #####: 1003:		p = aSourcePathsAndNames;
    #####: 1004:		while ((p2 = strchr(p, '|')) != NULL)
    %%%%%: 1004-block 6
    %%%%%: 1004-block 11
branch  0 never executed
branch  1 never executed (fallthrough)
        -: 1005:		{
    #####: 1006:				lLen = p2 - p;
    #####: 1007:				memmove(lDestination, p, lLen);
    #####: 1008:				lDestination[lLen] = '\0';
    #####: 1009:				if (fileExists(lDestination))
    %%%%%: 1009-block 7
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 1010:				{
    #####: 1011:						lDestination += lLen;
    #####: 1012:						*lDestination = '|';
    #####: 1013:						lDestination++;
    %%%%%: 1013-block 9
        -: 1014:				}
    #####: 1015:				p = p2 + 1;
    %%%%%: 1015-block 10
        -: 1016:		}
    #####: 1017:		if (fileExists(p))
    %%%%%: 1017-block 12
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 1018:		{
    #####: 1019:				lLen = strlen(p);
    #####: 1020:				memmove(lDestination, p, lLen);
    #####: 1021:				lDestination[lLen] = '\0';
    %%%%%: 1021-block 14
        -: 1022:		}
        -: 1023:		else
        -: 1024:		{
    #####: 1025:				*(lDestination - 1) = '\0';
    %%%%%: 1025-block 15
        -: 1026:		}
    #####: 1027:		return aDestination;
    %%%%%: 1027-block 16
        -: 1028:}
        -: 1029:
        -: 1030:#ifdef _WIN32
        -: 1031:
        -: 1032:static int __stdcall EnumThreadWndProc(HWND hwnd, LPARAM lParam)
        -: 1033:{
        -: 1034:		wchar_t lTitleName[MAX_PATH];
        -: 1035:		wchar_t const* lDialogTitle = (wchar_t const *) lParam;
        -: 1036:
        -: 1037:		GetWindowTextW(hwnd, lTitleName, MAX_PATH);
        -: 1038:		/* wprintf(L"lTitleName %ls \n", lTitleName);  */
        -: 1039:
        -: 1040:		if (wcscmp(lDialogTitle, lTitleName) == 0)
        -: 1041:		{
        -: 1042:				SetWindowPos(hwnd, HWND_TOPMOST, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE);
        -: 1043:				return 0;
        -: 1044:		}
        -: 1045:		return 1;
        -: 1046:}
        -: 1047:
        -: 1048:
        -: 1049:static void hiddenConsoleW(wchar_t const * aString, wchar_t const * aDialogTitle, int aInFront)
        -: 1050:{
        -: 1051:		STARTUPINFOW StartupInfo;
        -: 1052:		PROCESS_INFORMATION ProcessInfo;
        -: 1053:
        -: 1054:		if (!aString || !wcslen(aString) ) return;
        -: 1055:
        -: 1056:		memset(&StartupInfo, 0, sizeof(StartupInfo));
        -: 1057:		StartupInfo.cb = sizeof(STARTUPINFOW);
        -: 1058:		StartupInfo.dwFlags = STARTF_USESHOWWINDOW;
        -: 1059:		StartupInfo.wShowWindow = SW_HIDE;
        -: 1060:
        -: 1061:		if (!CreateProcessW(NULL, (LPWSTR)aString, NULL, NULL, FALSE,
        -: 1062:								CREATE_NEW_CONSOLE, NULL, NULL,
        -: 1063:								&StartupInfo, &ProcessInfo))
        -: 1064:		{
        -: 1065:				return; /* GetLastError(); */
        -: 1066:		}
        -: 1067:
        -: 1068:		WaitForInputIdle(ProcessInfo.hProcess, INFINITE);
        -: 1069:		if (aInFront)
        -: 1070:		{
        -: 1071:				while (EnumWindows(EnumThreadWndProc, (LPARAM)aDialogTitle)) {}
        -: 1072:		}
        -: 1073:		WaitForSingleObject(ProcessInfo.hProcess, INFINITE);
        -: 1074:		CloseHandle(ProcessInfo.hThread);
        -: 1075:		CloseHandle(ProcessInfo.hProcess);
        -: 1076:}
        -: 1077:
        -: 1078:
        -: 1079:int tinyfd_messageBoxW(
        -: 1080:		wchar_t const * aTitle, /* NULL or "" */
        -: 1081:		wchar_t const * aMessage, /* NULL or ""  may contain \n and \t */
        -: 1082:		wchar_t const * aDialogType, /* "ok" "okcancel" "yesno" "yesnocancel" */
        -: 1083:		wchar_t const * aIconType, /* "info" "warning" "error" "question" */
        -: 1084:		int aDefaultButton) /* 0 for cancel/no , 1 for ok/yes , 2 for no in yesnocancel */
        -: 1085:{
        -: 1086:		int lBoxReturnValue;
        -: 1087:		UINT aCode;
        -: 1088:
        -: 1089:		if (aTitle&&!wcscmp(aTitle, L"tinyfd_query")){ strcpy(tinyfd_response, "windows_wchar"); return 1; }
        -: 1090:
        -: 1091:		/*if (quoteDetectedW(aTitle)) return tinyfd_messageBoxW(L"INVALID TITLE WITH QUOTES", aMessage, aDialogType, aIconType, aDefaultButton);
        -: 1092:		if (quoteDetectedW(aMessage)) return tinyfd_messageBoxW(aTitle, L"INVALID MESSAGE WITH QUOTES", aDialogType, aIconType, aDefaultButton);*/
        -: 1093:
        -: 1094:		if (aIconType && !wcscmp(L"warning", aIconType))
        -: 1095:		{
        -: 1096:				aCode = MB_ICONWARNING;
        -: 1097:		}
        -: 1098:		else if (aIconType && !wcscmp(L"error", aIconType))
        -: 1099:		{
        -: 1100:				aCode = MB_ICONERROR;
        -: 1101:		}
        -: 1102:		else if (aIconType && !wcscmp(L"question", aIconType))
        -: 1103:		{
        -: 1104:				aCode = MB_ICONQUESTION;
        -: 1105:		}
        -: 1106:		else
        -: 1107:		{
        -: 1108:				aCode = MB_ICONINFORMATION;
        -: 1109:		}
        -: 1110:
        -: 1111:		if (aDialogType && !wcscmp(L"okcancel", aDialogType))
        -: 1112:		{
        -: 1113:				aCode += MB_OKCANCEL;
        -: 1114:				if (!aDefaultButton)
        -: 1115:				{
        -: 1116:						aCode += MB_DEFBUTTON2;
        -: 1117:				}
        -: 1118:		}
        -: 1119:		else if (aDialogType && !wcscmp(L"yesno", aDialogType))
        -: 1120:		{
        -: 1121:				aCode += MB_YESNO;
        -: 1122:				if (!aDefaultButton)
        -: 1123:				{
        -: 1124:						aCode += MB_DEFBUTTON2;
        -: 1125:				}
        -: 1126:		}
        -: 1127:		else if (aDialogType && !wcscmp(L"yesnocancel", aDialogType))
        -: 1128:		{
        -: 1129:			aCode += MB_YESNOCANCEL;
        -: 1130:			if (aDefaultButton == 1)
        -: 1131:			{
        -: 1132:				aCode += MB_DEFBUTTON1;
        -: 1133:			}
        -: 1134:			else if (aDefaultButton == 2)
        -: 1135:			{
        -: 1136:				aCode += MB_DEFBUTTON2;
        -: 1137:			}
        -: 1138:			else
        -: 1139:			{
        -: 1140:				aCode += MB_DEFBUTTON3;
        -: 1141:			}
        -: 1142:		}
        -: 1143:		else
        -: 1144:		{
        -: 1145:				aCode += MB_OK;
        -: 1146:		}
        -: 1147:
        -: 1148:		aCode += MB_TOPMOST;
        -: 1149:
        -: 1150:		lBoxReturnValue = MessageBoxW(GetForegroundWindow(), aMessage, aTitle, aCode);
        -: 1151:
        -: 1152:		if ( (lBoxReturnValue == IDNO) && (aDialogType && !wcscmp(L"yesnocancel", aDialogType)) )
        -: 1153:		{
        -: 1154:			return 2;
        -: 1155:		}
        -: 1156:		else if ( (lBoxReturnValue == IDOK) || (lBoxReturnValue == IDYES) )
        -: 1157:		{
        -: 1158:			return 1;
        -: 1159:		}
        -: 1160:		else
        -: 1161:		{
        -: 1162:			return 0;
        -: 1163:		}
        -: 1164:}
        -: 1165:
        -: 1166:
        -: 1167:/* int tinyfd_notifyPopupW_ORIGINAL(
        -: 1168:		wchar_t const * aTitle,
        -: 1169:		wchar_t const * aMessage,
        -: 1170:		wchar_t const * aIconType)
        -: 1171:{
        -: 1172:		wchar_t * lDialogString;
        -: 1173:		size_t lTitleLen;
        -: 1174:		size_t lMessageLen;
        -: 1175:		size_t lDialogStringLen;
        -: 1176:
        -: 1177:		if (aTitle && !wcscmp(aTitle, L"tinyfd_query")) { strcpy(tinyfd_response, "windows_wchar"); return 1; }
        -: 1178:
        -: 1179:		if (quoteDetectedW(aTitle)) return tinyfd_notifyPopupW(L"INVALID TITLE WITH QUOTES", aMessage, aIconType);
        -: 1180:		if (quoteDetectedW(aMessage)) return tinyfd_notifyPopupW(aTitle, L"INVALID MESSAGE WITH QUOTES", aIconType);
        -: 1181:
        -: 1182:		lTitleLen = aTitle ? wcslen(aTitle) : 0;
        -: 1183:		lMessageLen = aMessage ? wcslen(aMessage) : 0;
        -: 1184:		lDialogStringLen = 3 * MAX_PATH_OR_CMD + lTitleLen + lMessageLen;
        -: 1185:		lDialogString = (wchar_t *) malloc(2 * lDialogStringLen);
        -: 1186:		if (!lDialogString) return 0;
        -: 1187:
        -: 1188:		wcscpy(lDialogString, L"powershell.exe -executionpolicy bypass -command \"\
        -: 1189:function Show-BalloonTip {\
        -: 1190:[cmdletbinding()] \
        -: 1191:param( \
        -: 1192:[string]$Title = ' ', \
        -: 1193:[string]$Message = ' ', \
        -: 1194:[ValidateSet('info', 'warning', 'error')] \
        -: 1195:[string]$IconType = 'info');\
        -: 1196:[system.Reflection.Assembly]::LoadWithPartialName('System.Windows.Forms') | Out-Null ; \
        -: 1197:$balloon = New-Object System.Windows.Forms.NotifyIcon ; \
        -: 1198:$path = Get-Process -id $pid | Select-Object -ExpandProperty Path ; \
        -: 1199:$icon = [System.Drawing.Icon]::ExtractAssociatedIcon($path) ;");
        -: 1200:
        -: 1201:		wcscat(lDialogString, L"\
        -: 1202:$balloon.Icon = $icon ; \
        -: 1203:$balloon.BalloonTipIcon = $IconType ; \
        -: 1204:$balloon.BalloonTipText = $Message ; \
        -: 1205:$balloon.BalloonTipTitle = $Title ; \
        -: 1206:$balloon.Text = 'tinyfiledialogs' ; \
        -: 1207:$balloon.Visible = $true ; \
        -: 1208:$balloon.ShowBalloonTip(5000)};\
        -: 1209:Show-BalloonTip");
        -: 1210:
        -: 1211:		if (aTitle && wcslen(aTitle))
        -: 1212:		{
        -: 1213:				wcscat(lDialogString, L" -Title '");
        -: 1214:				wcscat(lDialogString, aTitle);
        -: 1215:				wcscat(lDialogString, L"'");
        -: 1216:		}
        -: 1217:		if (aMessage && wcslen(aMessage))
        -: 1218:		{
        -: 1219:				wcscat(lDialogString, L" -Message '");
        -: 1220:				wcscat(lDialogString, aMessage);
        -: 1221:				wcscat(lDialogString, L"'");
        -: 1222:		}
        -: 1223:		if (aMessage && wcslen(aIconType))
        -: 1224:		{
        -: 1225:				wcscat(lDialogString, L" -IconType '");
        -: 1226:				wcscat(lDialogString, aIconType);
        -: 1227:				wcscat(lDialogString, L"'");
        -: 1228:		}
        -: 1229:		wcscat(lDialogString, L"\"");
        -: 1230:
        -: 1231:		hiddenConsoleW(lDialogString, aTitle, 0);
        -: 1232:		free(lDialogString);
        -: 1233:		return 1;
        -: 1234:}*/
        -: 1235:
        -: 1236:
        -: 1237:/* return has only meaning for tinyfd_query */
        -: 1238:int tinyfd_notifyPopupW(
        -: 1239:	wchar_t const* aTitle, /* NULL or L"" */
        -: 1240:	wchar_t const* aMessage, /* NULL or L"" may contain \n \t */
        -: 1241:	wchar_t const* aIconType) /* L"info" L"warning" L"error" */
        -: 1242:{
        -: 1243:	wchar_t* lDialogString;
        -: 1244:	size_t lTitleLen;
        -: 1245:	size_t lMessageLen;
        -: 1246:	size_t lDialogStringLen;
        -: 1247:
        -: 1248:	FILE* lIn;
        -: 1249:
        -: 1250:	if (aTitle && !wcscmp(aTitle, L"tinyfd_query")) { strcpy(tinyfd_response, "windows_wchar"); return 1; }
        -: 1251:
        -: 1252:	if (quoteDetectedW(aTitle)) return tinyfd_notifyPopupW(L"INVALID TITLE WITH QUOTES", aMessage, aIconType);
        -: 1253:	if (quoteDetectedW(aMessage)) return tinyfd_notifyPopupW(aTitle, L"INVALID MESSAGE WITH QUOTES", aIconType);
        -: 1254:
        -: 1255:	lTitleLen = aTitle ? wcslen(aTitle) : 0;
        -: 1256:	lMessageLen = aMessage ? wcslen(aMessage) : 0;
        -: 1257:	lDialogStringLen = 3 * MAX_PATH_OR_CMD + lTitleLen + lMessageLen;
        -: 1258:	lDialogString = (wchar_t*)malloc(2 * lDialogStringLen);
        -: 1259:	if (!lDialogString) return 0;
        -: 1260:
        -: 1261:	swprintf(lDialogString,
        -: 1262:#if !defined(__BORLANDC__) && !defined(__TINYC__) && !(defined(__MINGW32__) && !defined(__MINGW64_VERSION_MAJOR))
        -: 1263:		lDialogStringLen,
        -: 1264:#endif
        -: 1265:		L"%ls\\tinyfd.hta", _wgetenv(L"TEMP"));
        -: 1266:
        -: 1267:	lIn = _wfopen(lDialogString, L"w");
        -: 1268:	if (!lIn)
        -: 1269:	{
        -: 1270:		free(lDialogString);
        -: 1271:		return 0;
        -: 1272:	}
        -: 1273:
        -: 1274:	wcscpy(lDialogString, L"\n\
        -: 1275:<html>\n\
        -: 1276:<head>\n\
        -: 1277:<title>");
        -: 1278:	if ( aTitle && wcslen(aTitle) ) wcscat(lDialogString, aTitle);
        -: 1279:	wcscat(lDialogString, L"</title>\n\
        -: 1280:</head>\n\
        -: 1281:<HTA:APPLICATION\n\
        -: 1282:SysMenu = 'no'\n\
        -: 1283:ID = 'tinyfdHTA'\n\
        -: 1284:APPLICATIONNAME = 'tinyfd_notifyPopup'\n\
        -: 1285:MINIMIZEBUTTON = 'no'\n\
        -: 1286:MAXIMIZEBUTTON = 'no'\n\
        -: 1287:BORDER = 'dialog'\n\
        -: 1288:SCROLL = 'no'\n\
        -: 1289:SINGLEINSTANCE = 'yes'\n\
        -: 1290:WINDOWSTATE = 'hidden'>\n\
        -: 1291:<script language = 'VBScript'>\n\
        -: 1292:intWidth = Screen.Width/4\n\
        -: 1293:intHeight = Screen.Height/10\n\
        -: 1294:ResizeTo intWidth, intHeight\n\
        -: 1295:MoveTo Screen.Width * .7, Screen.Height * .8\n\
        -: 1296:result = 0\n\
        -: 1297:Sub Window_onLoad\n\
        -: 1298:idTimer = window.setTimeout(\"PausedSection\", 3000, \"VBScript\")\n\
        -: 1299:End Sub\n");
        -: 1300:
        -: 1301:	wcscat(lDialogString, L"\n\
        -: 1302:Sub PausedSection\n\
        -: 1303:window.Close\n\
        -: 1304:End Sub\n\
        -: 1305:</script>\n\
        -: 1306:<body style = 'background-color:#EEEEEE' onkeypress = 'vbs:Default_Buttons' align = 'top'>\n\
        -: 1307:<table width = '100%' height = '80%' align = 'center' border = '0'>\n\
        -: 1308:<tr border = '0'>\n\
        -: 1309:<td align = 'left' valign = 'middle' style='Font-Family:Arial'>\n");
        -: 1310:
        -: 1311:	wcscat(lDialogString, aMessage ? aMessage : L"");
        -: 1312:
        -: 1313:	wcscat(lDialogString, L"\n\
        -: 1314:</body>\n\
        -: 1315:</html>\n\
        -: 1316:");
        -: 1317:
        -: 1318:	fputws(lDialogString, lIn);
        -: 1319:	fclose(lIn);
        -: 1320:
        -: 1321:	if (aTitle && wcslen(aTitle))
        -: 1322:	{
        -: 1323:		wcscat(lDialogString, L" -Title '");
        -: 1324:		wcscat(lDialogString, aTitle);
        -: 1325:		wcscat(lDialogString, L"'");
        -: 1326:	}
        -: 1327:	if (aMessage && wcslen(aMessage))
        -: 1328:	{
        -: 1329:		wcscat(lDialogString, L" -Message '");
        -: 1330:		wcscat(lDialogString, aMessage);
        -: 1331:		wcscat(lDialogString, L"'");
        -: 1332:	}
        -: 1333:	if (aMessage && wcslen(aIconType))
        -: 1334:	{
        -: 1335:		wcscat(lDialogString, L" -IconType '");
        -: 1336:		wcscat(lDialogString, aIconType);
        -: 1337:		wcscat(lDialogString, L"'");
        -: 1338:	}
        -: 1339:	wcscat(lDialogString, L"\"");
        -: 1340:
        -: 1341:	/* wprintf ( L"lDialogString: %ls\n" , lDialogString ) ; */
        -: 1342:	wcscpy(lDialogString,
        -: 1343:		L"cmd.exe /c mshta.exe \"%TEMP%\\tinyfd.hta\"");
        -: 1344:
        -: 1345:	hiddenConsoleW(lDialogString, aTitle, 0);
        -: 1346:	free(lDialogString);
        -: 1347:	return 1;
        -: 1348:}
        -: 1349:
        -: 1350:
        -: 1351:wchar_t * tinyfd_inputBoxW(
        -: 1352:		wchar_t const * aTitle, /* NULL or L"" */
        -: 1353:		wchar_t const * aMessage, /* NULL or L"" (\n and \t have no effect) */
        -: 1354:		wchar_t const * aDefaultInput) /* L"" , if NULL it's a passwordBox */
        -: 1355:{
        -: 1356:		static wchar_t lBuff[MAX_PATH_OR_CMD];
        -: 1357:		wchar_t * lDialogString;
        -: 1358:		FILE * lIn;
        -: 1359:		FILE * lFile;
        -: 1360:		int lResult;
        -: 1361:		size_t lTitleLen;
        -: 1362:		size_t lMessageLen;
        -: 1363:		size_t lDialogStringLen;
        -: 1364:
        -: 1365:		if (aTitle&&!wcscmp(aTitle, L"tinyfd_query")){ strcpy(tinyfd_response, "windows_wchar"); return (wchar_t *)1; }
        -: 1366:
        -: 1367:		if (quoteDetectedW(aTitle)) return tinyfd_inputBoxW(L"INVALID TITLE WITH QUOTES", aMessage, aDefaultInput);
        -: 1368:		if (quoteDetectedW(aMessage)) return tinyfd_inputBoxW(aTitle, L"INVALID MESSAGE WITH QUOTES", aDefaultInput);
        -: 1369:		if (quoteDetectedW(aDefaultInput)) return tinyfd_inputBoxW(aTitle, aMessage, L"INVALID DEFAULT_INPUT WITH QUOTES: use the GRAVE ACCENT \\x60 instead.");
        -: 1370:
        -: 1371:		lTitleLen =  aTitle ? wcslen(aTitle) : 0 ;
        -: 1372:		lMessageLen =  aMessage ? wcslen(aMessage) : 0 ;
        -: 1373:		lDialogStringLen = 3 * MAX_PATH_OR_CMD + lTitleLen + lMessageLen;
        -: 1374:		lDialogString = (wchar_t *) malloc(2 * lDialogStringLen);
        -: 1375:
        -: 1376:		if (aDefaultInput)
        -: 1377:		{
        -: 1378:						swprintf(lDialogString,
        -: 1379:#if !defined(__BORLANDC__) && !defined(__TINYC__) && !(defined(__MINGW32__) && !defined(__MINGW64_VERSION_MAJOR))
        -: 1380:				lDialogStringLen,
        -: 1381:#endif
        -: 1382:				L"%ls\\tinyfd.vbs", _wgetenv(L"TEMP"));
        -: 1383:		}
        -: 1384:		else
        -: 1385:		{
        -: 1386:				swprintf(lDialogString,
        -: 1387:#if !defined(__BORLANDC__) && !defined(__TINYC__) && !(defined(__MINGW32__) && !defined(__MINGW64_VERSION_MAJOR))
        -: 1388:						lDialogStringLen,
        -: 1389:#endif
        -: 1390:				L"%ls\\tinyfd.hta", _wgetenv(L"TEMP"));
        -: 1391:		}
        -: 1392:		lIn = _wfopen(lDialogString, L"w");
        -: 1393:		if (!lIn)
        -: 1394:		{
        -: 1395:				free(lDialogString);
        -: 1396:				return NULL;
        -: 1397:		}
        -: 1398:
        -: 1399:		if ( aDefaultInput )
        -: 1400:		{
        -: 1401:				wcscpy(lDialogString, L"Dim result:result=InputBox(\"");
        -: 1402:				if (aMessage && wcslen(aMessage))
        -: 1403:				{
        -: 1404:										wcscpy(lBuff, aMessage);
        -: 1405:										replaceWchar(lBuff, L'\n', L' ');
        -: 1406:										wcscat(lDialogString, lBuff);
        -: 1407:				}
        -: 1408:				wcscat(lDialogString, L"\",\"");
        -: 1409:				if (aTitle) wcscat(lDialogString, aTitle);
        -: 1410:				wcscat(lDialogString, L"\",\"");
        -: 1411:
        -: 1412:				if (aDefaultInput && wcslen(aDefaultInput))
        -: 1413:				{
        -: 1414:										wcscpy(lBuff, aDefaultInput);
        -: 1415:										replaceWchar(lBuff, L'\n', L' ');
        -: 1416:										wcscat(lDialogString, lBuff);
        -: 1417:				}
        -: 1418:				wcscat(lDialogString, L"\"):If IsEmpty(result) then:WScript.Echo 0");
        -: 1419:				wcscat(lDialogString, L":Else: WScript.Echo \"1\" & result : End If");
        -: 1420:		}
        -: 1421:		else
        -: 1422:		{
        -: 1423:				wcscpy(lDialogString, L"\n\
        -: 1424:<html>\n\
        -: 1425:<head>\n\
        -: 1426:<title>");
        -: 1427:				if (aTitle) wcscat(lDialogString, aTitle);
        -: 1428:				wcscat(lDialogString, L"</title>\n\
        -: 1429:</head>\n\
        -: 1430:<HTA:APPLICATION\n\
        -: 1431:ID = 'tinyfdHTA'\n\
        -: 1432:APPLICATIONNAME = 'tinyfd_inputBox'\n\
        -: 1433:MINIMIZEBUTTON = 'no'\n\
        -: 1434:MAXIMIZEBUTTON = 'no'\n\
        -: 1435:BORDER = 'dialog'\n\
        -: 1436:SCROLL = 'no'\n\
        -: 1437:SINGLEINSTANCE = 'yes'\n\
        -: 1438:WINDOWSTATE = 'hidden'>\n\
        -: 1439:\n\
        -: 1440:<script language = 'VBScript'>\n\
        -: 1441:\n\
        -: 1442:intWidth = Screen.Width/4\n\
        -: 1443:intHeight = Screen.Height/6\n\
        -: 1444:ResizeTo intWidth, intHeight\n\
        -: 1445:MoveTo((Screen.Width/2)-(intWidth/2)),((Screen.Height/2)-(intHeight/2))\n\
        -: 1446:result = 0\n\
        -: 1447:\n\
        -: 1448:Sub Window_onLoad\n\
        -: 1449:txt_input.Focus\n\
        -: 1450:End Sub\n\
        -: 1451:\n");
        -: 1452:
        -: 1453:				wcscat(lDialogString, L"\
        -: 1454:Sub Window_onUnload\n\
        -: 1455:Set objFSO = CreateObject(\"Scripting.FileSystemObject\")\n\
        -: 1456:Set oShell = CreateObject(\"WScript.Shell\")\n\
        -: 1457:strTempFolder = oShell.ExpandEnvironmentStrings(\"%TEMP%\")\n\
        -: 1458:Set objFile = objFSO.CreateTextFile(strTempFolder & \"\\tinyfd.txt\",True,True)\n\
        -: 1459:If result = 1 Then\n\
        -: 1460:objFile.Write 1 & txt_input.Value\n\
        -: 1461:Else\n\
        -: 1462:objFile.Write 0\n\
        -: 1463:End If\n\
        -: 1464:objFile.Close\n\
        -: 1465:End Sub\n\
        -: 1466:\n\
        -: 1467:Sub Run_ProgramOK\n\
        -: 1468:result = 1\n\
        -: 1469:window.Close\n\
        -: 1470:End Sub\n\
        -: 1471:\n\
        -: 1472:Sub Run_ProgramCancel\n\
        -: 1473:window.Close\n\
        -: 1474:End Sub\n\
        -: 1475:\n");
        -: 1476:
        -: 1477:				wcscat(lDialogString, L"Sub Default_Buttons\n\
        -: 1478:If Window.Event.KeyCode = 13 Then\n\
        -: 1479:btn_OK.Click\n\
        -: 1480:ElseIf Window.Event.KeyCode = 27 Then\n\
        -: 1481:btn_Cancel.Click\n\
        -: 1482:End If\n\
        -: 1483:End Sub\n\
        -: 1484:\n\
        -: 1485:</script>\n\
        -: 1486:<body style = 'background-color:#EEEEEE' onkeypress = 'vbs:Default_Buttons' align = 'top'>\n\
        -: 1487:<table width = '100%' height = '80%' align = 'center' border = '0'>\n\
        -: 1488:<tr border = '0'>\n\
        -: 1489:<td align = 'left' valign = 'middle' style='Font-Family:Arial'>\n");
        -: 1490:
        -: 1491:				wcscat(lDialogString, aMessage ? aMessage : L"");
        -: 1492:
        -: 1493:				wcscat(lDialogString, L"\n\
        -: 1494:</td>\n\
        -: 1495:<td align = 'right' valign = 'middle' style = 'margin-top: 0em'>\n\
        -: 1496:<table  align = 'right' style = 'margin-right: 0em;'>\n\
        -: 1497:<tr align = 'right' style = 'margin-top: 5em;'>\n\
        -: 1498:<input type = 'button' value = 'OK' name = 'btn_OK' onClick = 'vbs:Run_ProgramOK' style = 'width: 5em; margin-top: 2em;'><br>\n\
        -: 1499:<input type = 'button' value = 'Cancel' name = 'btn_Cancel' onClick = 'vbs:Run_ProgramCancel' style = 'width: 5em;'><br><br>\n\
        -: 1500:</tr>\n\
        -: 1501:</table>\n\
        -: 1502:</td>\n\
        -: 1503:</tr>\n\
        -: 1504:</table>\n");
        -: 1505:
        -: 1506:				wcscat(lDialogString, L"<table width = '100%' height = '100%' align = 'center' border = '0'>\n\
        -: 1507:<tr>\n\
        -: 1508:<td align = 'left' valign = 'top'>\n\
        -: 1509:<input type = 'password' id = 'txt_input'\n\
        -: 1510:name = 'txt_input' value = '' style = 'float:left;width:100%' ><BR>\n\
        -: 1511:</td>\n\
        -: 1512:</tr>\n\
        -: 1513:</table>\n\
        -: 1514:</body>\n\
        -: 1515:</html>\n\
        -: 1516:"               ) ;
        -: 1517:		}
        -: 1518:		fputws(lDialogString, lIn);
        -: 1519:		fclose(lIn);
        -: 1520:
        -: 1521:		if (aDefaultInput)
        -: 1522:		{
        -: 1523:				swprintf(lDialogString,
        -: 1524:#if !defined(__BORLANDC__) && !defined(__TINYC__) && !(defined(__MINGW32__) && !defined(__MINGW64_VERSION_MAJOR))
        -: 1525:						lDialogStringLen,
        -: 1526:#endif
        -: 1527:						L"%ls\\tinyfd.txt",_wgetenv(L"TEMP"));
        -: 1528:
        -: 1529:#ifdef TINYFD_NOCCSUNICODE
        -: 1530:								lFile = _wfopen(lDialogString, L"w");
        -: 1531:								fputc(0xFF, lFile);
        -: 1532:								fputc(0xFE, lFile);
        -: 1533:#else
        -: 1534:								lFile = _wfopen(lDialogString, L"wt, ccs=UNICODE"); /*or ccs=UTF-16LE*/
        -: 1535:#endif
        -: 1536:								fclose(lFile);
        -: 1537:
        -: 1538:				wcscpy(lDialogString, L"cmd.exe /c cscript.exe //U //Nologo ");
        -: 1539:				wcscat(lDialogString, L"\"%TEMP%\\tinyfd.vbs\" ");
        -: 1540:				wcscat(lDialogString, L">> \"%TEMP%\\tinyfd.txt\"");
        -: 1541:		}
        -: 1542:		else
        -: 1543:		{
        -: 1544:				wcscpy(lDialogString,
        -: 1545:						L"cmd.exe /c mshta.exe \"%TEMP%\\tinyfd.hta\"");
        -: 1546:		}
        -: 1547:
        -: 1548:		/* wprintf ( "lDialogString: %ls\n" , lDialogString ) ; */
        -: 1549:
        -: 1550:		hiddenConsoleW(lDialogString, aTitle, 1);
        -: 1551:
        -: 1552:		swprintf(lDialogString,
        -: 1553:#if !defined(__BORLANDC__) && !defined(__TINYC__) && !(defined(__MINGW32__) && !defined(__MINGW64_VERSION_MAJOR))
        -: 1554:				lDialogStringLen,
        -: 1555:#endif
        -: 1556:								L"%ls\\tinyfd.txt", _wgetenv(L"TEMP"));
        -: 1557:				/* wprintf(L"lDialogString: %ls\n", lDialogString); */
        -: 1558:#ifdef TINYFD_NOCCSUNICODE
        -: 1559:				if (!(lIn = _wfopen(lDialogString, L"r")))
        -: 1560:#else
        -: 1561:				if (!(lIn = _wfopen(lDialogString, L"rt, ccs=UNICODE"))) /*or ccs=UTF-16LE*/
        -: 1562:#endif
        -: 1563:				{
        -: 1564:				_wremove(lDialogString);
        -: 1565:				free(lDialogString);
        -: 1566:				return NULL;
        -: 1567:		}
        -: 1568:
        -: 1569:				memset(lBuff, 0, MAX_PATH_OR_CMD * sizeof(wchar_t) );
        -: 1570:
        -: 1571:#ifdef TINYFD_NOCCSUNICODE
        -: 1572:				fgets((char *)lBuff, 2*MAX_PATH_OR_CMD, lIn);
        -: 1573:#else
        -: 1574:				fgetws(lBuff, MAX_PATH_OR_CMD, lIn);
        -: 1575:#endif
        -: 1576:				fclose(lIn);
        -: 1577:				wipefileW(lDialogString);
        -: 1578:				_wremove(lDialogString);
        -: 1579:
        -: 1580:				if (aDefaultInput)
        -: 1581:				{
        -: 1582:						swprintf(lDialogString,
        -: 1583:#if !defined(__BORLANDC__) && !defined(__TINYC__) && !(defined(__MINGW32__) && !defined(__MINGW64_VERSION_MAJOR))
        -: 1584:						lDialogStringLen,
        -: 1585:#endif
        -: 1586:						L"%ls\\tinyfd.vbs", _wgetenv(L"TEMP"));
        -: 1587:		}
        -: 1588:		else
        -: 1589:		{
        -: 1590:				swprintf(lDialogString,
        -: 1591:#if !defined(__BORLANDC__) && !defined(__TINYC__) && !(defined(__MINGW32__) && !defined(__MINGW64_VERSION_MAJOR))
        -: 1592:						lDialogStringLen,
        -: 1593:#endif
        -: 1594:						L"%ls\\tinyfd.hta", _wgetenv(L"TEMP"));
        -: 1595:		}
        -: 1596:		_wremove(lDialogString);
        -: 1597:		free(lDialogString);
        -: 1598:		/* wprintf( L"lBuff: %ls\n" , lBuff ) ; */
        -: 1599:#ifdef TINYFD_NOCCSUNICODE
        -: 1600:				lResult = !wcsncmp(lBuff+1, L"1", 1);
        -: 1601:#else
        -: 1602:				lResult = !wcsncmp(lBuff, L"1", 1);
        -: 1603:#endif
        -: 1604:
        -: 1605:		/* printf( "lResult: %d \n" , lResult ) ; */
        -: 1606:		if (!lResult)
        -: 1607:		{
        -: 1608:			return NULL ;
        -: 1609:		}
        -: 1610:
        -: 1611:		/* wprintf( "lBuff+1: %ls\n" , lBuff+1 ) ; */
        -: 1612:
        -: 1613:#ifdef TINYFD_NOCCSUNICODE
        -: 1614:				if (aDefaultInput)
        -: 1615:				{
        -: 1616:						lDialogStringLen = wcslen(lBuff) ;
        -: 1617:						lBuff[lDialogStringLen - 1] = L'\0';
        -: 1618:						lBuff[lDialogStringLen - 2] = L'\0';
        -: 1619:				}
        -: 1620:				return lBuff + 2;
        -: 1621:#else
        -: 1622:				if (aDefaultInput) lBuff[wcslen(lBuff) - 1] = L'\0';
        -: 1623:				return lBuff + 1;
        -: 1624:#endif
        -: 1625:}
        -: 1626:
        -: 1627:
        -: 1628:wchar_t * tinyfd_saveFileDialogW(
        -: 1629:		wchar_t const * aTitle, /* NULL or "" */
        -: 1630:		wchar_t const * aDefaultPathAndOrFile, /* NULL or "" */
        -: 1631:		int aNumOfFilterPatterns, /* 0 */
        -: 1632:		wchar_t const * const * aFilterPatterns, /* NULL or {"*.jpg","*.png"} */
        -: 1633:		wchar_t const * aSingleFilterDescription) /* NULL or "image files" */
        -: 1634:{
        -: 1635:		static wchar_t lBuff[MAX_PATH_OR_CMD];
        -: 1636:		wchar_t lDirname[MAX_PATH_OR_CMD];
        -: 1637:		wchar_t lDialogString[MAX_PATH_OR_CMD];
        -: 1638:		wchar_t lFilterPatterns[MAX_PATH_OR_CMD] = L"";
        -: 1639:		wchar_t * p;
        -: 1640:		wchar_t * lRetval;
        -: 1641:				wchar_t const * ldefExt = NULL;
        -: 1642:				int i;
        -: 1643:		HRESULT lHResult;
        -: 1644:		OPENFILENAMEW ofn = {0};
        -: 1645:
        -: 1646:		if (aTitle&&!wcscmp(aTitle, L"tinyfd_query")){ strcpy(tinyfd_response, "windows_wchar"); return (wchar_t *)1; }
        -: 1647:
        -: 1648:		/*if (quoteDetectedW(aTitle)) return tinyfd_saveFileDialogW(L"INVALID TITLE WITH QUOTES", aDefaultPathAndOrFile, aNumOfFilterPatterns, aFilterPatterns, aSingleFilterDescription);
        -: 1649:		if (quoteDetectedW(aDefaultPathAndOrFile)) return tinyfd_saveFileDialogW(aTitle, L"INVALID DEFAULT_PATH WITH QUOTES", aNumOfFilterPatterns, aFilterPatterns, aSingleFilterDescription);
        -: 1650:		if (quoteDetectedW(aSingleFilterDescription)) return tinyfd_saveFileDialogW(aTitle, aDefaultPathAndOrFile, aNumOfFilterPatterns, aFilterPatterns, L"INVALID FILTER_DESCRIPTION WITH QUOTES");
        -: 1651:		for (i = 0; i < aNumOfFilterPatterns; i++)
        -: 1652:		{
        -: 1653:				if (quoteDetectedW(aFilterPatterns[i])) return tinyfd_saveFileDialogW(L"INVALID FILTER_PATTERN WITH QUOTES: use the GRAVE ACCENT \\x60 instead.", aDefaultPathAndOrFile, 0, NULL, NULL);
        -: 1654:		}*/
        -: 1655:
        -: 1656:		lHResult = CoInitializeEx(NULL, 0);
        -: 1657:
        -: 1658:		getPathWithoutFinalSlashW(lDirname, aDefaultPathAndOrFile);
        -: 1659:		getLastNameW(lBuff, aDefaultPathAndOrFile);
        -: 1660:
        -: 1661:		if (aNumOfFilterPatterns > 0)
        -: 1662:		{
        -: 1663:						ldefExt = aFilterPatterns[0];
        -: 1664:
        -: 1665:				if (aSingleFilterDescription && wcslen(aSingleFilterDescription))
        -: 1666:				{
        -: 1667:						wcscpy(lFilterPatterns, aSingleFilterDescription);
        -: 1668:						wcscat(lFilterPatterns, L"\n");
        -: 1669:				}
        -: 1670:				wcscat(lFilterPatterns, aFilterPatterns[0]);
        -: 1671:				for (i = 1; i < aNumOfFilterPatterns; i++)
        -: 1672:				{
        -: 1673:						wcscat(lFilterPatterns, L";");
        -: 1674:						wcscat(lFilterPatterns, aFilterPatterns[i]);
        -: 1675:				}
        -: 1676:				wcscat(lFilterPatterns, L"\n");
        -: 1677:				if (!(aSingleFilterDescription && wcslen(aSingleFilterDescription)))
        -: 1678:				{
        -: 1679:						wcscpy(lDialogString, lFilterPatterns);
        -: 1680:						wcscat(lFilterPatterns, lDialogString);
        -: 1681:				}
        -: 1682:				wcscat(lFilterPatterns, L"All Files\n*.*\n");
        -: 1683:				p = lFilterPatterns;
        -: 1684:				while ((p = wcschr(p, L'\n')) != NULL)
        -: 1685:				{
        -: 1686:						*p = L'\0';
        -: 1687:						p++;
        -: 1688:				}
        -: 1689:		}
        -: 1690:
        -: 1691:		ofn.lStructSize = sizeof(OPENFILENAMEW);
        -: 1692:		ofn.hwndOwner = GetForegroundWindow();
        -: 1693:		ofn.hInstance = 0;
        -: 1694:		ofn.lpstrFilter = wcslen(lFilterPatterns) ? lFilterPatterns : NULL;
        -: 1695:		ofn.lpstrCustomFilter = NULL;
        -: 1696:		ofn.nMaxCustFilter = 0;
        -: 1697:		ofn.nFilterIndex = 1;
        -: 1698:		ofn.lpstrFile = lBuff;
        -: 1699:
        -: 1700:		ofn.nMaxFile = MAX_PATH_OR_CMD;
        -: 1701:		ofn.lpstrFileTitle = NULL;
        -: 1702:		ofn.nMaxFileTitle = MAX_PATH_OR_CMD/2;
        -: 1703:		ofn.lpstrInitialDir = wcslen(lDirname) ? lDirname : NULL;
        -: 1704:		ofn.lpstrTitle = aTitle && wcslen(aTitle) ? aTitle : NULL;
        -: 1705:		ofn.Flags = OFN_OVERWRITEPROMPT | OFN_NOCHANGEDIR | OFN_PATHMUSTEXIST ;
        -: 1706:		ofn.nFileOffset = 0;
        -: 1707:		ofn.nFileExtension = 0;
        -: 1708:				ofn.lpstrDefExt = ldefExt;
        -: 1709:		ofn.lCustData = 0L;
        -: 1710:		ofn.lpfnHook = NULL;
        -: 1711:		ofn.lpTemplateName = NULL;
        -: 1712:
        -: 1713:		if (GetSaveFileNameW(&ofn) == 0)
        -: 1714:		{
        -: 1715:				lRetval = NULL;
        -: 1716:		}
        -: 1717:		else
        -: 1718:		{
        -: 1719:				lRetval = lBuff;
        -: 1720:		}
        -: 1721:
        -: 1722:		if (lHResult == S_OK || lHResult == S_FALSE)
        -: 1723:		{
        -: 1724:				CoUninitialize();
        -: 1725:		}
        -: 1726:		return lRetval;
        -: 1727:}
        -: 1728:
        -: 1729:
        -: 1730:wchar_t * tinyfd_openFileDialogW(
        -: 1731:		wchar_t const * aTitle, /* NULL or "" */
        -: 1732:		wchar_t const * aDefaultPathAndOrFile, /* NULL or "" */
        -: 1733:		int aNumOfFilterPatterns, /* 0 */
        -: 1734:		wchar_t const * const * aFilterPatterns, /* NULL or {"*.jpg","*.png"} */
        -: 1735:		wchar_t const * aSingleFilterDescription, /* NULL or "image files" */
        -: 1736:		int aAllowMultipleSelects) /* 0 or 1 ; -1 to free allocated memory and return */
        -: 1737:{
        -: 1738:		size_t lLengths[MAX_MULTIPLE_FILES];
        -: 1739:		wchar_t lDirname[MAX_PATH_OR_CMD];
        -: 1740:		wchar_t lFilterPatterns[MAX_PATH_OR_CMD] = L"";
        -: 1741:		wchar_t lDialogString[MAX_PATH_OR_CMD];
        -: 1742:		wchar_t * lPointers[MAX_MULTIPLE_FILES+1];
        -: 1743:		wchar_t * p;
        -: 1744:		int i, j;
        -: 1745:		size_t lBuffLen;
        -: 1746:		DWORD lFullBuffLen;
        -: 1747:		HRESULT lHResult;
        -: 1748:		OPENFILENAMEW ofn = { 0 };
        -: 1749:		static wchar_t * lBuff = NULL;
        -: 1750:
        -: 1751:		free(lBuff);
        -: 1752:		lBuff = NULL;
        -: 1753:		if (aAllowMultipleSelects < 0) return (wchar_t *)0;
        -: 1754:
        -: 1755:		if (aTitle&&!wcscmp(aTitle, L"tinyfd_query")){ strcpy(tinyfd_response, "windows_wchar"); return (wchar_t *)1; }
        -: 1756:
        -: 1757:		/*if (quoteDetectedW(aTitle)) return tinyfd_openFileDialogW(L"INVALID TITLE WITH QUOTES", aDefaultPathAndOrFile, aNumOfFilterPatterns, aFilterPatterns, aSingleFilterDescription, aAllowMultipleSelects);
        -: 1758:		if (quoteDetectedW(aDefaultPathAndOrFile)) return tinyfd_openFileDialogW(aTitle, L"INVALID DEFAULT_PATH WITH QUOTES", aNumOfFilterPatterns, aFilterPatterns, aSingleFilterDescription, aAllowMultipleSelects);
        -: 1759:		if (quoteDetectedW(aSingleFilterDescription)) return tinyfd_openFileDialogW(aTitle, aDefaultPathAndOrFile, aNumOfFilterPatterns, aFilterPatterns, L"INVALID FILTER_DESCRIPTION WITH QUOTES", aAllowMultipleSelects);
        -: 1760:		for (i = 0; i < aNumOfFilterPatterns; i++)
        -: 1761:		{
        -: 1762:				if (quoteDetectedW(aFilterPatterns[i])) return tinyfd_openFileDialogW(L"INVALID FILTER_PATTERN WITH QUOTES: use the GRAVE ACCENT \\x60 instead.", aDefaultPathAndOrFile, 0, NULL, NULL, aAllowMultipleSelects);
        -: 1763:		}*/
        -: 1764:
        -: 1765:		if (aAllowMultipleSelects)
        -: 1766:		{
        -: 1767:				lFullBuffLen = MAX_MULTIPLE_FILES * MAX_PATH_OR_CMD + 1;
        -: 1768:				lBuff = (wchar_t*) malloc(lFullBuffLen * sizeof(wchar_t));
        -: 1769:				if (!lBuff)
        -: 1770:				{
        -: 1771:						lFullBuffLen = LOW_MULTIPLE_FILES * MAX_PATH_OR_CMD + 1;
        -: 1772:						lBuff = (wchar_t*) malloc( lFullBuffLen * sizeof(wchar_t));
        -: 1773:				}
        -: 1774:		}
        -: 1775:		else
        -: 1776:		{
        -: 1777:				lFullBuffLen = MAX_PATH_OR_CMD + 1;
        -: 1778:				lBuff = (wchar_t*) malloc(lFullBuffLen * sizeof(wchar_t));
        -: 1779:		}
        -: 1780:		if (!lBuff) return NULL;
        -: 1781:
        -: 1782:		lHResult = CoInitializeEx(NULL, 0);
        -: 1783:
        -: 1784:		getPathWithoutFinalSlashW(lDirname, aDefaultPathAndOrFile);
        -: 1785:		getLastNameW(lBuff, aDefaultPathAndOrFile);
        -: 1786:
        -: 1787:		if (aNumOfFilterPatterns > 0)
        -: 1788:		{
        -: 1789:			if (aSingleFilterDescription && wcslen(aSingleFilterDescription))
        -: 1790:			{
        -: 1791:				wcscpy(lFilterPatterns, aSingleFilterDescription);
        -: 1792:				wcscat(lFilterPatterns, L"\n");
        -: 1793:			}
        -: 1794:			wcscat(lFilterPatterns, aFilterPatterns[0]);
        -: 1795:			for (i = 1; i < aNumOfFilterPatterns; i++)
        -: 1796:			{
        -: 1797:				wcscat(lFilterPatterns, L";");
        -: 1798:				wcscat(lFilterPatterns, aFilterPatterns[i]);
        -: 1799:			}
        -: 1800:			wcscat(lFilterPatterns, L"\n");
        -: 1801:			if (!(aSingleFilterDescription && wcslen(aSingleFilterDescription)))
        -: 1802:			{
        -: 1803:				wcscpy(lDialogString, lFilterPatterns);
        -: 1804:				wcscat(lFilterPatterns, lDialogString);
        -: 1805:			}
        -: 1806:			wcscat(lFilterPatterns, L"All Files\n*.*\n");
        -: 1807:			p = lFilterPatterns;
        -: 1808:			while ((p = wcschr(p, L'\n')) != NULL)
        -: 1809:			{
        -: 1810:				*p = L'\0';
        -: 1811:				p++;
        -: 1812:			}
        -: 1813:		}
        -: 1814:
        -: 1815:		ofn.lStructSize = sizeof(OPENFILENAME);
        -: 1816:		ofn.hwndOwner = GetForegroundWindow();
        -: 1817:		ofn.hInstance = 0;
        -: 1818:		ofn.lpstrFilter = wcslen(lFilterPatterns) ? lFilterPatterns : NULL;
        -: 1819:		ofn.lpstrCustomFilter = NULL;
        -: 1820:		ofn.nMaxCustFilter = 0;
        -: 1821:		ofn.nFilterIndex = 1;
        -: 1822:		ofn.lpstrFile = lBuff;
        -: 1823:		ofn.nMaxFile = lFullBuffLen;
        -: 1824:		ofn.lpstrFileTitle = NULL;
        -: 1825:		ofn.nMaxFileTitle = MAX_PATH_OR_CMD / 2;
        -: 1826:		ofn.lpstrInitialDir = wcslen(lDirname) ? lDirname : NULL;
        -: 1827:		ofn.lpstrTitle = aTitle && wcslen(aTitle) ? aTitle : NULL;
        -: 1828:		ofn.Flags = OFN_EXPLORER | OFN_NOCHANGEDIR | OFN_PATHMUSTEXIST | OFN_FILEMUSTEXIST;
        -: 1829:		ofn.nFileOffset = 0;
        -: 1830:		ofn.nFileExtension = 0;
        -: 1831:		ofn.lpstrDefExt = NULL;
        -: 1832:		ofn.lCustData = 0L;
        -: 1833:		ofn.lpfnHook = NULL;
        -: 1834:		ofn.lpTemplateName = NULL;
        -: 1835:
        -: 1836:		if (aAllowMultipleSelects)
        -: 1837:		{
        -: 1838:			ofn.Flags |= OFN_ALLOWMULTISELECT;
        -: 1839:		}
        -: 1840:
        -: 1841:		if (GetOpenFileNameW(&ofn) == 0)
        -: 1842:		{
        -: 1843:			free(lBuff);
        -: 1844:			lBuff = NULL;
        -: 1845:		}
        -: 1846:		else
        -: 1847:		{
        -: 1848:			lBuffLen = wcslen(lBuff);
        -: 1849:			lPointers[0] = lBuff + lBuffLen + 1;
        -: 1850:			if (aAllowMultipleSelects && (lPointers[0][0] != L'\0'))
        -: 1851:			{
        -: 1852:				i = 0;
        -: 1853:				do
        -: 1854:				{
        -: 1855:					lLengths[i] = wcslen(lPointers[i]);
        -: 1856:					lPointers[i + 1] = lPointers[i] + lLengths[i] + 1;
        -: 1857:					i++;
        -: 1858:				} while (lPointers[i][0] != L'\0' && i < MAX_MULTIPLE_FILES );
        -: 1859:
        -: 1860:				if (i > MAX_MULTIPLE_FILES)
        -: 1861:				{
        -: 1862:						free(lBuff);
        -: 1863:						lBuff = NULL;
        -: 1864:				}
        -: 1865:				else
        -: 1866:				{
        -: 1867:						i--;
        -: 1868:						p = lBuff + lFullBuffLen - 1;
        -: 1869:						*p = L'\0';
        -: 1870:						for (j = i; j >= 0; j--)
        -: 1871:						{
        -: 1872:								p -= lLengths[j];
        -: 1873:								memmove(p, lPointers[j], lLengths[j] * sizeof(wchar_t));
        -: 1874:								p--;
        -: 1875:								*p = L'\\';
        -: 1876:								p -= lBuffLen;
        -: 1877:								memmove(p, lBuff, lBuffLen*sizeof(wchar_t));
        -: 1878:								p--;
        -: 1879:								*p = L'|';
        -: 1880:						}
        -: 1881:						p++;
        -: 1882:						wcscpy(lBuff, p);
        -: 1883:						lBuffLen = wcslen(lBuff);
        -: 1884:				}
        -: 1885:			}
        -: 1886:			if (lBuff) lBuff = (wchar_t*)(realloc(lBuff, (lBuffLen + 1) * sizeof(wchar_t)));
        -: 1887:		}
        -: 1888:
        -: 1889:		if (lHResult == S_OK || lHResult == S_FALSE)
        -: 1890:		{
        -: 1891:			CoUninitialize();
        -: 1892:		}
        -: 1893:
        -: 1894:		return lBuff;
        -: 1895:}
        -: 1896:
        -: 1897:
        -: 1898:BOOL CALLBACK BrowseCallbackProcW_enum(HWND hWndChild, LPARAM lParam)
        -: 1899:{
        -: 1900:	wchar_t buf[255];
        -: 1901:	(void)lParam;
        -: 1902:	GetClassNameW(hWndChild, buf, sizeof(buf));
        -: 1903:	if (wcscmp(buf, L"SysTreeView32") == 0)
        -: 1904:	{
        -: 1905:		HTREEITEM hNode = TreeView_GetSelection(hWndChild);
        -: 1906:		TreeView_EnsureVisible(hWndChild, hNode);
        -: 1907:		return FALSE;
        -: 1908:	}
        -: 1909:	return TRUE;
        -: 1910:}
        -: 1911:
        -: 1912:
        -: 1913:static int __stdcall BrowseCallbackProcW(HWND hwnd, UINT uMsg, LPARAM lp, LPARAM pData)
        -: 1914:{
        -: 1915:	(void)lp;
        -: 1916:	switch (uMsg)
        -: 1917:	{
        -: 1918:		case BFFM_INITIALIZED:
        -: 1919:			SendMessage(hwnd, BFFM_SETSELECTIONW, TRUE, (LPARAM)pData);
        -: 1920:			break;
        -: 1921:		case BFFM_SELCHANGED:
        -: 1922:			EnumChildWindows(hwnd, BrowseCallbackProcW_enum, 0);
        -: 1923:	}
        -: 1924:	return 0;
        -: 1925:}
        -: 1926:
        -: 1927:wchar_t * tinyfd_selectFolderDialogW(
        -: 1928:		wchar_t const * aTitle, /* NULL or "" */
        -: 1929:		wchar_t const * aDefaultPath) /* NULL or "" */
        -: 1930:{
        -: 1931:		static wchar_t lBuff[MAX_PATH_OR_CMD];
        -: 1932:		wchar_t * lRetval;
        -: 1933:
        -: 1934:		BROWSEINFOW bInfo;
        -: 1935:		LPITEMIDLIST lpItem;
        -: 1936:		HRESULT lHResult;
        -: 1937:
        -: 1938:		if (aTitle&&!wcscmp(aTitle, L"tinyfd_query")){ strcpy(tinyfd_response, "windows_wchar"); return (wchar_t *)1; }
        -: 1939:
        -: 1940:		/*if (quoteDetectedW(aTitle)) return tinyfd_selectFolderDialogW(L"INVALID TITLE WITH QUOTES", aDefaultPath);
        -: 1941:		if (quoteDetectedW(aDefaultPath)) return tinyfd_selectFolderDialogW(aTitle, L"INVALID DEFAULT_PATH WITH QUOTES");*/
        -: 1942:
        -: 1943:		lHResult = CoInitializeEx(NULL, COINIT_APARTMENTTHREADED);
        -: 1944:
        -: 1945:		bInfo.hwndOwner = GetForegroundWindow();
        -: 1946:		bInfo.pidlRoot = NULL;
        -: 1947:		bInfo.pszDisplayName = lBuff;
        -: 1948:		bInfo.lpszTitle = aTitle && wcslen(aTitle) ? aTitle : NULL;
        -: 1949:		if (lHResult == S_OK || lHResult == S_FALSE)
        -: 1950:		{
        -: 1951:				bInfo.ulFlags = BIF_USENEWUI;
        -: 1952:		}
        -: 1953:		bInfo.lpfn = BrowseCallbackProcW;
        -: 1954:		bInfo.lParam = (LPARAM)aDefaultPath;
        -: 1955:		bInfo.iImage = -1;
        -: 1956:
        -: 1957:		lpItem = SHBrowseForFolderW(&bInfo);
        -: 1958:		if (!lpItem)
        -: 1959:				{
        -: 1960:						lRetval = NULL;
        -: 1961:				}
        -: 1962:				else
        -: 1963:		{
        -: 1964:				SHGetPathFromIDListW(lpItem, lBuff);
        -: 1965:								lRetval = lBuff ;
        -: 1966:		}
        -: 1967:
        -: 1968:		if (lHResult == S_OK || lHResult == S_FALSE)
        -: 1969:		{
        -: 1970:				CoUninitialize();
        -: 1971:		}
        -: 1972:				return lRetval;
        -: 1973:}
        -: 1974:
        -: 1975:
        -: 1976:wchar_t * tinyfd_colorChooserW(
        -: 1977:		wchar_t const * aTitle, /* NULL or "" */
        -: 1978:		wchar_t const * aDefaultHexRGB, /* NULL or "#FF0000"*/
        -: 1979:		unsigned char const aDefaultRGB[3], /* { 0 , 255 , 255 } */
        -: 1980:		unsigned char aoResultRGB[3]) /* { 0 , 0 , 0 } */
        -: 1981:{
        -: 1982:		static wchar_t lResultHexRGB[8];
        -: 1983:		CHOOSECOLORW cc;
        -: 1984:		COLORREF crCustColors[16];
        -: 1985:		unsigned char lDefaultRGB[3];
        -: 1986:		int lRet;
        -: 1987:
        -: 1988:		HRESULT lHResult;
        -: 1989:
        -: 1990:		if (aTitle&&!wcscmp(aTitle, L"tinyfd_query")){ strcpy(tinyfd_response, "windows_wchar"); return (wchar_t *)1; }
        -: 1991:
        -: 1992:		/*if (quoteDetectedW(aTitle)) return tinyfd_colorChooserW(L"INVALID TITLE WITH QUOTES", aDefaultHexRGB, aDefaultRGB, aoResultRGB);
        -: 1993:		if (quoteDetectedW(aDefaultHexRGB)) return tinyfd_colorChooserW(aTitle, L"INVALID DEFAULT_HEX_RGB WITH QUOTES: use the GRAVE ACCENT \\x60 instead.", aDefaultRGB, aoResultRGB);*/
        -: 1994:
        -: 1995:		lHResult = CoInitializeEx(NULL, 0);
        -: 1996:
        -: 1997:		if ( aDefaultHexRGB && wcslen(aDefaultHexRGB) )
        -: 1998:		{
        -: 1999:				Hex2RGBW(aDefaultHexRGB, lDefaultRGB);
        -: 2000:		}
        -: 2001:		else
        -: 2002:		{
        -: 2003:				lDefaultRGB[0] = aDefaultRGB[0];
        -: 2004:				lDefaultRGB[1] = aDefaultRGB[1];
        -: 2005:				lDefaultRGB[2] = aDefaultRGB[2];
        -: 2006:		}
        -: 2007:
        -: 2008:		/* we can't use aTitle */
        -: 2009:		cc.lStructSize = sizeof(CHOOSECOLOR);
        -: 2010:		cc.hwndOwner = GetForegroundWindow();
        -: 2011:		cc.hInstance = NULL;
        -: 2012:		cc.rgbResult = RGB(lDefaultRGB[0], lDefaultRGB[1], lDefaultRGB[2]);
        -: 2013:		cc.lpCustColors = crCustColors;
        -: 2014:		cc.Flags = CC_RGBINIT | CC_FULLOPEN | CC_ANYCOLOR ;
        -: 2015:		cc.lCustData = 0;
        -: 2016:		cc.lpfnHook = NULL;
        -: 2017:		cc.lpTemplateName = NULL;
        -: 2018:
        -: 2019:		lRet = ChooseColorW(&cc);
        -: 2020:
        -: 2021:		if (!lRet)
        -: 2022:		{
        -: 2023:				return NULL;
        -: 2024:		}
        -: 2025:
        -: 2026:		aoResultRGB[0] = GetRValue(cc.rgbResult);
        -: 2027:		aoResultRGB[1] = GetGValue(cc.rgbResult);
        -: 2028:		aoResultRGB[2] = GetBValue(cc.rgbResult);
        -: 2029:
        -: 2030:		RGB2HexW(aoResultRGB, lResultHexRGB);
        -: 2031:
        -: 2032:		if (lHResult == S_OK || lHResult == S_FALSE)
        -: 2033:		{
        -: 2034:				CoUninitialize();
        -: 2035:		}
        -: 2036:
        -: 2037:		return lResultHexRGB;
        -: 2038:}
        -: 2039:
        -: 2040:
        -: 2041:static int messageBoxWinGui(
        -: 2042:		char const * aTitle, /* NULL or "" */
        -: 2043:		char const * aMessage, /* NULL or ""  may contain \n and \t */
        -: 2044:		char const * aDialogType, /* "ok" "okcancel" "yesno" "yesnocancel" */
        -: 2045:		char const * aIconType, /* "info" "warning" "error" "question" */
        -: 2046:		int aDefaultButton) /* 0 for cancel/no , 1 for ok/yes , 2 for no in yesnocancel */
        -: 2047:{
        -: 2048:		int lIntRetVal;
        -: 2049:		wchar_t lTitle[128] = L"";
        -: 2050:		wchar_t * lMessage = NULL;
        -: 2051:		wchar_t lDialogType[16] = L"";
        -: 2052:		wchar_t lIconType[16] = L"";
        -: 2053:		wchar_t * lTmpWChar;
        -: 2054:
        -: 2055:		if (aTitle)
        -: 2056:		{
        -: 2057:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aTitle);
        -: 2058:				else lTmpWChar = tinyfd_mbcsTo16(aTitle);
        -: 2059:				wcscpy(lTitle, lTmpWChar);
        -: 2060:		}
        -: 2061:		if (aMessage)
        -: 2062:		{
        -: 2063:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aMessage);
        -: 2064:				else lTmpWChar = tinyfd_mbcsTo16(aMessage);
        -: 2065:				lMessage = (wchar_t *) malloc((wcslen(lTmpWChar) + 1)* sizeof(wchar_t));
        -: 2066:				if (lMessage) wcscpy(lMessage, lTmpWChar);
        -: 2067:		}
        -: 2068:		if (aDialogType)
        -: 2069:		{
        -: 2070:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aDialogType);
        -: 2071:				else lTmpWChar = tinyfd_mbcsTo16(aDialogType);
        -: 2072:				wcscpy(lDialogType, lTmpWChar);
        -: 2073:		}
        -: 2074:		if (aIconType)
        -: 2075:		{
        -: 2076:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aIconType);
        -: 2077:				else lTmpWChar = tinyfd_mbcsTo16(aIconType);
        -: 2078:				wcscpy(lIconType, lTmpWChar);
        -: 2079:		}
        -: 2080:
        -: 2081:		lIntRetVal = tinyfd_messageBoxW(lTitle, lMessage, lDialogType, lIconType, aDefaultButton);
        -: 2082:
        -: 2083:		free(lMessage);
        -: 2084:
        -: 2085:		return lIntRetVal;
        -: 2086:}
        -: 2087:
        -: 2088:
        -: 2089:static int notifyWinGui(
        -: 2090:		char const * aTitle, /* NULL or "" */
        -: 2091:		char const * aMessage, /* NULL or "" may NOT contain \n nor \t */
        -: 2092:		char const * aIconType)
        -: 2093:{
        -: 2094:		wchar_t lTitle[128] = L"";
        -: 2095:		wchar_t * lMessage = NULL;
        -: 2096:		wchar_t lIconType[16] = L"";
        -: 2097:		wchar_t * lTmpWChar;
        -: 2098:
        -: 2099:		if (aTitle)
        -: 2100:		{
        -: 2101:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aTitle);
        -: 2102:				else lTmpWChar = tinyfd_mbcsTo16(aTitle);
        -: 2103:				wcscpy(lTitle, lTmpWChar);
        -: 2104:		}
        -: 2105:		if (aMessage)
        -: 2106:		{
        -: 2107:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aMessage);
        -: 2108:				else lTmpWChar = tinyfd_mbcsTo16(aMessage);
        -: 2109:				lMessage = (wchar_t *) malloc((wcslen(lTmpWChar) + 1)* sizeof(wchar_t));
        -: 2110:		if (lMessage) wcscpy(lMessage, lTmpWChar);
        -: 2111:		}
        -: 2112:		if (aIconType)
        -: 2113:		{
        -: 2114:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aIconType);
        -: 2115:				else lTmpWChar = tinyfd_mbcsTo16(aIconType);
        -: 2116:				wcscpy(lIconType, lTmpWChar);
        -: 2117:		}
        -: 2118:
        -: 2119:		tinyfd_notifyPopupW(lTitle, lMessage, lIconType);
        -: 2120:
        -: 2121:		free(lMessage);
        -: 2122:
        -: 2123:		return 1;
        -: 2124:}
        -: 2125:
        -: 2126:
        -: 2127:static int inputBoxWinGui(
        -: 2128:		char * aoBuff,
        -: 2129:		char const * aTitle, /* NULL or "" */
        -: 2130:		char const * aMessage, /* NULL or "" may NOT contain \n nor \t */
        -: 2131:		char const * aDefaultInput) /* "" , if NULL it's a passwordBox */
        -: 2132:{
        -: 2133:		wchar_t lTitle[128] = L"";
        -: 2134:		wchar_t * lMessage = NULL;
        -: 2135:		wchar_t lDefaultInput[MAX_PATH_OR_CMD] = L"";
        -: 2136:		wchar_t * lTmpWChar;
        -: 2137:		char * lTmpChar;
        -: 2138:
        -: 2139:		if (aTitle)
        -: 2140:		{
        -: 2141:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aTitle);
        -: 2142:				else lTmpWChar = tinyfd_mbcsTo16(aTitle);
        -: 2143:				wcscpy(lTitle, lTmpWChar);
        -: 2144:		}
        -: 2145:		if (aMessage)
        -: 2146:		{
        -: 2147:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aMessage);
        -: 2148:				else lTmpWChar = tinyfd_mbcsTo16(aMessage);
        -: 2149:				lMessage = (wchar_t *) malloc((wcslen(lTmpWChar) + 1)* sizeof(wchar_t));
        -: 2150:	  if (lMessage) wcscpy(lMessage, lTmpWChar);
        -: 2151:		}
        -: 2152:		if (aDefaultInput)
        -: 2153:		{
        -: 2154:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aDefaultInput);
        -: 2155:				else lTmpWChar = tinyfd_mbcsTo16(aDefaultInput);
        -: 2156:				wcscpy(lDefaultInput, lTmpWChar);
        -: 2157:		lTmpWChar = tinyfd_inputBoxW(lTitle, lMessage, lDefaultInput);
        -: 2158:		}
        -: 2159:	else lTmpWChar = tinyfd_inputBoxW(lTitle, lMessage, NULL);
        -: 2160:
        -: 2161:		free(lMessage);
        -: 2162:
        -: 2163:		if (!lTmpWChar)
        -: 2164:		{
        -: 2165:				aoBuff[0] = '\0';
        -: 2166:				return 0;
        -: 2167:		}
        -: 2168:
        -: 2169:		if (tinyfd_winUtf8) lTmpChar = tinyfd_utf16to8(lTmpWChar);
        -: 2170:		else lTmpChar = tinyfd_utf16toMbcs(lTmpWChar);
        -: 2171:
        -: 2172:		strcpy(aoBuff, lTmpChar);
        -: 2173:
        -: 2174:		return 1;
        -: 2175:}
        -: 2176:
        -: 2177:
        -: 2178:static char * saveFileDialogWinGui(
        -: 2179:		char * aoBuff,
        -: 2180:		char const * aTitle, /* NULL or "" */
        -: 2181:		char const * aDefaultPathAndOrFile, /* NULL or "" */
        -: 2182:		int aNumOfFilterPatterns, /* 0 */
        -: 2183:		char const * const * aFilterPatterns, /* NULL or {"*.jpg","*.png"} */
        -: 2184:		char const * aSingleFilterDescription) /* NULL or "image files" */
        -: 2185:{
        -: 2186:		wchar_t lTitle[128] = L"";
        -: 2187:		wchar_t lDefaultPathAndFile[MAX_PATH_OR_CMD] = L"";
        -: 2188:		wchar_t lSingleFilterDescription[128] = L"";
        -: 2189:		wchar_t * * lFilterPatterns;
        -: 2190:		wchar_t * lTmpWChar;
        -: 2191:		char * lTmpChar;
        -: 2192:		int i;
        -: 2193:
        -: 2194:		lFilterPatterns = (wchar_t **) malloc(aNumOfFilterPatterns*sizeof(wchar_t *));
        -: 2195:		for (i = 0; i < aNumOfFilterPatterns; i++)
        -: 2196:		{
        -: 2197:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aFilterPatterns[i]);
        -: 2198:				else lTmpWChar = tinyfd_mbcsTo16(aFilterPatterns[i]);
        -: 2199:				lFilterPatterns[i] = (wchar_t *) malloc((wcslen(lTmpWChar) + 1) * sizeof(wchar_t *));
        -: 2200:				if (lFilterPatterns[i]) wcscpy(lFilterPatterns[i], lTmpWChar);
        -: 2201:		}
        -: 2202:
        -: 2203:		if (aTitle)
        -: 2204:		{
        -: 2205:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aTitle);
        -: 2206:				else lTmpWChar = tinyfd_mbcsTo16(aTitle);
        -: 2207:				wcscpy(lTitle, lTmpWChar);
        -: 2208:		}
        -: 2209:		if (aDefaultPathAndOrFile)
        -: 2210:		{
        -: 2211:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aDefaultPathAndOrFile);
        -: 2212:				else lTmpWChar = tinyfd_mbcsTo16(aDefaultPathAndOrFile);
        -: 2213:				wcscpy(lDefaultPathAndFile, lTmpWChar);
        -: 2214:		}
        -: 2215:		if (aSingleFilterDescription)
        -: 2216:		{
        -: 2217:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aSingleFilterDescription);
        -: 2218:				else lTmpWChar = tinyfd_mbcsTo16(aSingleFilterDescription);
        -: 2219:				wcscpy(lSingleFilterDescription, lTmpWChar);
        -: 2220:		}
        -: 2221:
        -: 2222:		lTmpWChar = tinyfd_saveFileDialogW(
        -: 2223:				lTitle,
        -: 2224:				lDefaultPathAndFile,
        -: 2225:				aNumOfFilterPatterns,
        -: 2226:				(wchar_t const**) lFilterPatterns, /*stupid cast for gcc*/
        -: 2227:				lSingleFilterDescription);
        -: 2228:
        -: 2229:		for (i = 0; i < aNumOfFilterPatterns; i++)
        -: 2230:		{
        -: 2231:				free(lFilterPatterns[i]);
        -: 2232:		}
        -: 2233:		free(lFilterPatterns);
        -: 2234:
        -: 2235:		if (!lTmpWChar)
        -: 2236:		{
        -: 2237:				return NULL;
        -: 2238:		}
        -: 2239:
        -: 2240:		if (tinyfd_winUtf8) lTmpChar = tinyfd_utf16to8(lTmpWChar);
        -: 2241:		else lTmpChar = tinyfd_utf16toMbcs(lTmpWChar);
        -: 2242:		strcpy(aoBuff, lTmpChar);
        -: 2243:		if (tinyfd_winUtf8) (void)tinyfd_utf16to8(NULL);
        -: 2244:		else (void)tinyfd_utf16toMbcs(NULL);
        -: 2245:
        -: 2246:		return aoBuff;
        -: 2247:}
        -: 2248:
        -: 2249:
        -: 2250:static char * openFileDialogWinGui(
        -: 2251:		char const * aTitle, /*  NULL or "" */
        -: 2252:		char const * aDefaultPathAndOrFile, /*  NULL or "" */
        -: 2253:		int aNumOfFilterPatterns, /* 0 */
        -: 2254:		char const * const * aFilterPatterns, /* NULL or {"*.jpg","*.png"} */
        -: 2255:		char const * aSingleFilterDescription, /* NULL or "image files" */
        -: 2256:		int aAllowMultipleSelects) /* 0 or 1 */
        -: 2257:{
        -: 2258:		wchar_t lTitle[128] = L"";
        -: 2259:		wchar_t lDefaultPathAndFile[MAX_PATH_OR_CMD] = L"";
        -: 2260:		wchar_t lSingleFilterDescription[128] = L"";
        -: 2261:		wchar_t * * lFilterPatterns;
        -: 2262:		wchar_t * lTmpWChar;
        -: 2263:		char * lTmpChar;
        -: 2264:		int i;
        -: 2265:
        -: 2266:		lFilterPatterns = (wchar_t * *) malloc(aNumOfFilterPatterns*sizeof(wchar_t *));
        -: 2267:		for (i = 0; i < aNumOfFilterPatterns; i++)
        -: 2268:		{
        -: 2269:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aFilterPatterns[i]);
        -: 2270:				else lTmpWChar = tinyfd_mbcsTo16(aFilterPatterns[i]);
        -: 2271:				lFilterPatterns[i] = (wchar_t *) malloc((wcslen(lTmpWChar) + 1)*sizeof(wchar_t *));
        -: 2272:	  if (lFilterPatterns[i]) wcscpy(lFilterPatterns[i], lTmpWChar);
        -: 2273:		}
        -: 2274:
        -: 2275:		if (aTitle)
        -: 2276:		{
        -: 2277:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aTitle);
        -: 2278:				else lTmpWChar = tinyfd_mbcsTo16(aTitle);
        -: 2279:				wcscpy(lTitle, lTmpWChar);
        -: 2280:		}
        -: 2281:		if (aDefaultPathAndOrFile)
        -: 2282:		{
        -: 2283:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aDefaultPathAndOrFile);
        -: 2284:				else lTmpWChar = tinyfd_mbcsTo16(aDefaultPathAndOrFile);
        -: 2285:				wcscpy(lDefaultPathAndFile, lTmpWChar);
        -: 2286:		}
        -: 2287:		if (aSingleFilterDescription)
        -: 2288:		{
        -: 2289:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aSingleFilterDescription);
        -: 2290:				else lTmpWChar = tinyfd_mbcsTo16(aSingleFilterDescription);
        -: 2291:				wcscpy(lSingleFilterDescription, lTmpWChar);
        -: 2292:		}
        -: 2293:
        -: 2294:		lTmpWChar = tinyfd_openFileDialogW(
        -: 2295:				lTitle,
        -: 2296:				lDefaultPathAndFile,
        -: 2297:				aNumOfFilterPatterns,
        -: 2298:				(wchar_t const**) lFilterPatterns, /*stupid cast for gcc*/
        -: 2299:				lSingleFilterDescription,
        -: 2300:				aAllowMultipleSelects);
        -: 2301:
        -: 2302:		for (i = 0; i < aNumOfFilterPatterns; i++)
        -: 2303:		{
        -: 2304:				free(lFilterPatterns[i]);
        -: 2305:		}
        -: 2306:		free(lFilterPatterns);
        -: 2307:
        -: 2308:		if (!lTmpWChar) return NULL;
        -: 2309:
        -: 2310:		if (tinyfd_winUtf8) lTmpChar = tinyfd_utf16to8(lTmpWChar);
        -: 2311:		else lTmpChar = tinyfd_utf16toMbcs(lTmpWChar);
        -: 2312:		(void)tinyfd_openFileDialogW(NULL, NULL, 0, NULL, NULL, -1);
        -: 2313:
        -: 2314:		return lTmpChar;
        -: 2315:}
        -: 2316:
        -: 2317:
        -: 2318:static char * selectFolderDialogWinGui(
        -: 2319:		char * aoBuff,
        -: 2320:		char const * aTitle, /*  NULL or "" */
        -: 2321:		char const * aDefaultPath) /* NULL or "" */
        -: 2322:{
        -: 2323:		wchar_t lTitle[128] = L"";
        -: 2324:		wchar_t lDefaultPath[MAX_PATH_OR_CMD] = L"";
        -: 2325:		wchar_t * lTmpWChar;
        -: 2326:		char * lTmpChar;
        -: 2327:
        -: 2328:		if (aTitle)
        -: 2329:		{
        -: 2330:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aTitle);
        -: 2331:				else lTmpWChar = tinyfd_mbcsTo16(aTitle);
        -: 2332:				wcscpy(lTitle, lTmpWChar);
        -: 2333:		}
        -: 2334:		if (aDefaultPath)
        -: 2335:		{
        -: 2336:				if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aDefaultPath);
        -: 2337:				else lTmpWChar = tinyfd_mbcsTo16(aDefaultPath);
        -: 2338:				wcscpy(lDefaultPath, lTmpWChar);
        -: 2339:		}
        -: 2340:
        -: 2341:		lTmpWChar = tinyfd_selectFolderDialogW(
        -: 2342:				lTitle,
        -: 2343:				lDefaultPath);
        -: 2344:
        -: 2345:		if (!lTmpWChar)
        -: 2346:		{
        -: 2347:				return NULL;
        -: 2348:		}
        -: 2349:
        -: 2350:		if (tinyfd_winUtf8) lTmpChar = tinyfd_utf16to8(lTmpWChar);
        -: 2351:		else lTmpChar = tinyfd_utf16toMbcs(lTmpWChar);
        -: 2352:		strcpy(aoBuff, lTmpChar);
        -: 2353:
        -: 2354:		return aoBuff;
        -: 2355:}
        -: 2356:
        -: 2357:
        -: 2358:static char * colorChooserWinGui(
        -: 2359:		char const * aTitle, /* NULL or "" */
        -: 2360:		char const * aDefaultHexRGB, /* NULL or "#FF0000"*/
        -: 2361:		unsigned char const aDefaultRGB[3], /* { 0 , 255 , 255 } */
        -: 2362:		unsigned char aoResultRGB[3]) /* { 0 , 0 , 0 } */
        -: 2363:{
        -: 2364:		static char lResultHexRGB[8];
        -: 2365:
        -: 2366:		wchar_t lTitle[128];
        -: 2367:		wchar_t * lTmpWChar;
        -: 2368:		char * lTmpChar;
        -: 2369:		wchar_t lDefaultHexRGB[16] = L"";
        -: 2370:
        -: 2371:				if (aTitle)
        -: 2372:				{
        -: 2373:						if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aTitle);
        -: 2374:						else lTmpWChar = tinyfd_mbcsTo16(aTitle);
        -: 2375:						wcscpy(lTitle, lTmpWChar);
        -: 2376:				}
        -: 2377:				if (aDefaultHexRGB)
        -: 2378:				{
        -: 2379:						if (tinyfd_winUtf8) lTmpWChar = tinyfd_utf8to16(aDefaultHexRGB);
        -: 2380:						else lTmpWChar = tinyfd_mbcsTo16(aDefaultHexRGB);
        -: 2381:						wcscpy(lDefaultHexRGB, lTmpWChar);
        -: 2382:				}
        -: 2383:
        -: 2384:		lTmpWChar = tinyfd_colorChooserW(
        -: 2385:				lTitle,
        -: 2386:				lDefaultHexRGB,
        -: 2387:				aDefaultRGB,
        -: 2388:				aoResultRGB );
        -: 2389:
        -: 2390:		if (!lTmpWChar)
        -: 2391:		{
        -: 2392:				return NULL;
        -: 2393:		}
        -: 2394:
        -: 2395:				if (tinyfd_winUtf8) lTmpChar = tinyfd_utf16to8(lTmpWChar);
        -: 2396:				else lTmpChar = tinyfd_utf16toMbcs(lTmpWChar);
        -: 2397:				strcpy(lResultHexRGB, lTmpChar);
        -: 2398:
        -: 2399:		return lResultHexRGB;
        -: 2400:}
        -: 2401:
        -: 2402:
        -: 2403:static int dialogPresent(void)
        -: 2404:{
        -: 2405:		static int lDialogPresent = -1 ;
        -: 2406:		char lBuff[MAX_PATH_OR_CMD] ;
        -: 2407:		FILE * lIn ;
        -: 2408:		char const * lString = "dialog.exe";
        -: 2409:				if (!tinyfd_allowCursesDialogs) return 0;
        -: 2410:				if (lDialogPresent < 0)
        -: 2411:		{
        -: 2412:				lIn = _popen("where dialog.exe", "r");
        -: 2413:				if ( ! lIn )
        -: 2414:				{
        -: 2415:						lDialogPresent = 0 ;
        -: 2416:						return 0 ;
        -: 2417:				}
        -: 2418:				while ( fgets( lBuff , sizeof( lBuff ) , lIn ) != NULL )
        -: 2419:				{}
        -: 2420:				_pclose( lIn ) ;
        -: 2421:				if ( lBuff[strlen( lBuff ) -1] == '\n' )
        -: 2422:				{
        -: 2423:						lBuff[strlen( lBuff ) -1] = '\0' ;
        -: 2424:				}
        -: 2425:				if ( strcmp(lBuff+strlen(lBuff)-strlen(lString),lString) )
        -: 2426:				{
        -: 2427:						lDialogPresent = 0 ;
        -: 2428:				}
        -: 2429:				else
        -: 2430:				{
        -: 2431:						lDialogPresent = 1 ;
        -: 2432:				}
        -: 2433:		}
        -: 2434:				return lDialogPresent;
        -: 2435:}
        -: 2436:
        -: 2437:
        -: 2438:static int messageBoxWinConsole(
        -: 2439:	char const * aTitle , /* NULL or "" */
        -: 2440:	char const * aMessage , /* NULL or ""  may contain \n and \t */
        -: 2441:	char const * aDialogType , /* "ok" "okcancel" "yesno" "yesnocancel" */
        -: 2442:	char const * aIconType , /* "info" "warning" "error" "question" */
        -: 2443:	int aDefaultButton ) /* 0 for cancel/no , 1 for ok/yes , 2 for no in yesnocancel */
        -: 2444:{
        -: 2445:		char lDialogString[MAX_PATH_OR_CMD];
        -: 2446:		char lDialogFile[MAX_PATH_OR_CMD];
        -: 2447:		FILE * lIn;
        -: 2448:		char lBuff[MAX_PATH_OR_CMD] = "";
        -: 2449:		(void)aIconType;
        -: 2450:
        -: 2451:				strcpy(lDialogString, "dialog ");
        -: 2452:				if (aTitle && strlen(aTitle))
        -: 2453:		{
        -: 2454:				strcat(lDialogString, "--title \"") ;
        -: 2455:				strcat(lDialogString, aTitle) ;
        -: 2456:				strcat(lDialogString, "\" ") ;
        -: 2457:		}
        -: 2458:
        -: 2459:		if ( aDialogType && ( !strcmp( "okcancel" , aDialogType )
        -: 2460:				|| !strcmp("yesno", aDialogType) || !strcmp("yesnocancel", aDialogType) ) )
        -: 2461:		{
        -: 2462:				strcat(lDialogString, "--backtitle \"") ;
        -: 2463:				strcat(lDialogString, "tab: move focus") ;
        -: 2464:				strcat(lDialogString, "\" ") ;
        -: 2465:		}
        -: 2466:
        -: 2467:		if ( aDialogType && ! strcmp( "okcancel" , aDialogType ) )
        -: 2468:		{
        -: 2469:				if ( ! aDefaultButton )
        -: 2470:				{
        -: 2471:						strcat( lDialogString , "--defaultno " ) ;
        -: 2472:				}
        -: 2473:				strcat( lDialogString ,
        -: 2474:								"--yes-label \"Ok\" --no-label \"Cancel\" --yesno " ) ;
        -: 2475:		}
        -: 2476:		else if ( aDialogType && ! strcmp( "yesno" , aDialogType ) )
        -: 2477:		{
        -: 2478:				if ( ! aDefaultButton )
        -: 2479:				{
        -: 2480:						strcat( lDialogString , "--defaultno " ) ;
        -: 2481:				}
        -: 2482:				strcat( lDialogString , "--yesno " ) ;
        -: 2483:		}
        -: 2484:		else if (aDialogType && !strcmp("yesnocancel", aDialogType))
        -: 2485:		{
        -: 2486:				if (!aDefaultButton)
        -: 2487:				{
        -: 2488:						strcat(lDialogString, "--defaultno ");
        -: 2489:				}
        -: 2490:				strcat(lDialogString, "--menu ");
        -: 2491:		}
        -: 2492:		else
        -: 2493:		{
        -: 2494:				strcat( lDialogString , "--msgbox " ) ;
        -: 2495:		}
        -: 2496:
        -: 2497:		strcat( lDialogString , "\"" ) ;
        -: 2498:		if ( aMessage && strlen(aMessage) )
        -: 2499:		{
        -: 2500:				tfd_replaceSubStr( aMessage , "\n" , "\\n" , lBuff ) ;
        -: 2501:				strcat(lDialogString, lBuff) ;
        -: 2502:				lBuff[0]='\0';
        -: 2503:		}
        -: 2504:		strcat(lDialogString, "\" ");
        -: 2505:
        -: 2506:		if (aDialogType && !strcmp("yesnocancel", aDialogType))
        -: 2507:		{
        -: 2508:				strcat(lDialogString, "0 60 0 Yes \"\" No \"\"");
        -: 2509:				strcat(lDialogString, "2>>");
        -: 2510:		}
        -: 2511:		else
        -: 2512:		{
        -: 2513:				strcat(lDialogString, "10 60");
        -: 2514:				strcat(lDialogString, " && echo 1 > ");
        -: 2515:		}
        -: 2516:
        -: 2517:		strcpy(lDialogFile, getenv("TEMP"));
        -: 2518:		strcat(lDialogFile, "\\tinyfd.txt");
        -: 2519:		strcat(lDialogString, lDialogFile);
        -: 2520:
        -: 2521:		/*if (tinyfd_verbose) printf( "lDialogString: %s\n" , lDialogString ) ;*/
        -: 2522:		system( lDialogString ) ;
        -: 2523:
        -: 2524:		if (!(lIn = fopen(lDialogFile, "r")))
        -: 2525:		{
        -: 2526:				remove(lDialogFile);
        -: 2527:				return 0 ;
        -: 2528:		}
        -: 2529:				while (fgets(lBuff, sizeof(lBuff), lIn) != NULL)
        -: 2530:		{}
        -: 2531:		fclose(lIn);
        -: 2532:		remove(lDialogFile);
        -: 2533:	if ( lBuff[strlen( lBuff ) -1] == '\n' )
        -: 2534:	{
        -: 2535:		lBuff[strlen( lBuff ) -1] = '\0' ;
        -: 2536:	}
        -: 2537:
        -: 2538:		/* if (tinyfd_verbose) printf("lBuff: %s\n", lBuff); */
        -: 2539:		if ( ! strlen(lBuff) )
        -: 2540:		{
        -: 2541:				return 0;
        -: 2542:		}
        -: 2543:
        -: 2544:		if (aDialogType && !strcmp("yesnocancel", aDialogType))
        -: 2545:		{
        -: 2546:				if (lBuff[0] == 'Y') return 1;
        -: 2547:				else return 2;
        -: 2548:		}
        -: 2549:
        -: 2550:		return 1;
        -: 2551:}
        -: 2552:
        -: 2553:
        -: 2554:static int inputBoxWinConsole(
        -: 2555:		char * aoBuff ,
        -: 2556:		char const * aTitle , /* NULL or "" */
        -: 2557:		char const * aMessage , /* NULL or "" may NOT contain \n nor \t */
        -: 2558:		char const * aDefaultInput ) /* "" , if NULL it's a passwordBox */
        -: 2559:{
        -: 2560:		char lDialogString[MAX_PATH_OR_CMD];
        -: 2561:		char lDialogFile[MAX_PATH_OR_CMD];
        -: 2562:		FILE * lIn;
        -: 2563:		int lResult;
        -: 2564:
        -: 2565:		strcpy(lDialogFile, getenv("TEMP"));
        -: 2566:		strcat(lDialogFile, "\\tinyfd.txt");
        -: 2567:		strcpy(lDialogString , "echo|set /p=1 >" ) ;
        -: 2568:		strcat(lDialogString, lDialogFile);
        -: 2569:		strcat( lDialogString , " & " ) ;
        -: 2570:
        -: 2571:		strcat( lDialogString , "dialog " ) ;
        -: 2572:		if ( aTitle && strlen(aTitle) )
        -: 2573:		{
        -: 2574:				strcat(lDialogString, "--title \"") ;
        -: 2575:				strcat(lDialogString, aTitle) ;
        -: 2576:				strcat(lDialogString, "\" ") ;
        -: 2577:		}
        -: 2578:
        -: 2579:		strcat(lDialogString, "--backtitle \"") ;
        -: 2580:		strcat(lDialogString, "tab: move focus") ;
        -: 2581:		if ( ! aDefaultInput )
        -: 2582:		{
        -: 2583:				strcat(lDialogString, " (sometimes nothing, no blink nor star, is shown in text field)") ;
        -: 2584:		}
        -: 2585:
        -: 2586:		strcat(lDialogString, "\" ") ;
        -: 2587:
        -: 2588:		if ( ! aDefaultInput )
        -: 2589:		{
        -: 2590:				strcat( lDialogString , "--insecure --passwordbox" ) ;
        -: 2591:		}
        -: 2592:		else
        -: 2593:		{
        -: 2594:				strcat( lDialogString , "--inputbox" ) ;
        -: 2595:		}
        -: 2596:		strcat( lDialogString , " \"" ) ;
        -: 2597:		if ( aMessage && strlen(aMessage) )
        -: 2598:		{
        -: 2599:				strcat(lDialogString, aMessage) ;
        -: 2600:		}
        -: 2601:		strcat(lDialogString,"\" 10 60 ") ;
        -: 2602:		if ( aDefaultInput && strlen(aDefaultInput) )
        -: 2603:		{
        -: 2604:				strcat(lDialogString, "\"") ;
        -: 2605:				strcat(lDialogString, aDefaultInput) ;
        -: 2606:				strcat(lDialogString, "\" ") ;
        -: 2607:		}
        -: 2608:
        -: 2609:		strcat(lDialogString, "2>>");
        -: 2610:		strcpy(lDialogFile, getenv("TEMP"));
        -: 2611:		strcat(lDialogFile, "\\tinyfd.txt");
        -: 2612:		strcat(lDialogString, lDialogFile);
        -: 2613:		strcat(lDialogString, " || echo 0 > ");
        -: 2614:		strcat(lDialogString, lDialogFile);
        -: 2615:
        -: 2616:		/* printf( "lDialogString: %s\n" , lDialogString ) ; */
        -: 2617:		system( lDialogString ) ;
        -: 2618:
        -: 2619:		if (!(lIn = fopen(lDialogFile, "r")))
        -: 2620:		{
        -: 2621:				remove(lDialogFile);
        -: 2622:								aoBuff[0] = '\0';
        -: 2623:								return 0;
        -: 2624:		}
        -: 2625:		while (fgets(aoBuff, MAX_PATH_OR_CMD, lIn) != NULL)
        -: 2626:		{}
        -: 2627:		fclose(lIn);
        -: 2628:
        -: 2629:		wipefile(lDialogFile);
        -: 2630:		remove(lDialogFile);
        -: 2631:	if ( aoBuff[strlen( aoBuff ) -1] == '\n' )
        -: 2632:	{
        -: 2633:		aoBuff[strlen( aoBuff ) -1] = '\0' ;
        -: 2634:	}
        -: 2635:		/* printf( "aoBuff: %s\n" , aoBuff ) ; */
        -: 2636:
        -: 2637:		/* printf( "aoBuff: %s len: %lu \n" , aoBuff , strlen(aoBuff) ) ; */
        -: 2638:	lResult =  strncmp( aoBuff , "1" , 1) ? 0 : 1 ;
        -: 2639:		/* printf( "lResult: %d \n" , lResult ) ; */
        -: 2640:		if ( ! lResult )
        -: 2641:		{
        -: 2642:				aoBuff[0] = '\0';
        -: 2643:				return 0 ;
        -: 2644:		}
        -: 2645:		/* printf( "aoBuff+1: %s\n" , aoBuff+1 ) ; */
        -: 2646:		strcpy(aoBuff, aoBuff+3);
        -: 2647:		return 1;
        -: 2648:}
        -: 2649:
        -: 2650:
        -: 2651:static char * saveFileDialogWinConsole(
        -: 2652:		char * aoBuff ,
        -: 2653:		char const * aTitle , /* NULL or "" */
        -: 2654:		char const * aDefaultPathAndOrFile ) /* NULL or "" */
        -: 2655:{
        -: 2656:		char lDialogString[MAX_PATH_OR_CMD];
        -: 2657:		char lPathAndFile[MAX_PATH_OR_CMD] = "";
        -: 2658:		FILE * lIn;
        -: 2659:
        -: 2660:		strcpy( lDialogString , "dialog " ) ;
        -: 2661:		if ( aTitle && strlen(aTitle) )
        -: 2662:		{
        -: 2663:				strcat(lDialogString, "--title \"") ;
        -: 2664:				strcat(lDialogString, aTitle) ;
        -: 2665:				strcat(lDialogString, "\" ") ;
        -: 2666:		}
        -: 2667:
        -: 2668:		strcat(lDialogString, "--backtitle \"") ;
        -: 2669:		strcat(lDialogString,
        -: 2670:				"tab: focus | /: populate | spacebar: fill text field | ok: TEXT FIELD ONLY") ;
        -: 2671:		strcat(lDialogString, "\" ") ;
        -: 2672:
        -: 2673:		strcat( lDialogString , "--fselect \"" ) ;
        -: 2674:		if ( aDefaultPathAndOrFile && strlen(aDefaultPathAndOrFile) )
        -: 2675:		{
        -: 2676:				/* dialog.exe uses unix separators even on windows */
        -: 2677:				strcpy(lPathAndFile, aDefaultPathAndOrFile);
        -: 2678:				replaceChr( lPathAndFile , '\\' , '/' ) ;
        -: 2679:		}
        -: 2680:
        -: 2681:		/* dialog.exe needs at least one separator */
        -: 2682:		if ( ! strchr(lPathAndFile, '/') )
        -: 2683:		{
        -: 2684:				strcat(lDialogString, "./") ;
        -: 2685:		}
        -: 2686:		strcat(lDialogString, lPathAndFile) ;
        -: 2687:		strcat(lDialogString, "\" 0 60 2>");
        -: 2688:		strcpy(lPathAndFile, getenv("TEMP"));
        -: 2689:		strcat(lPathAndFile, "\\tinyfd.txt");
        -: 2690:		strcat(lDialogString, lPathAndFile);
        -: 2691:
        -: 2692:		/* printf( "lDialogString: %s\n" , lDialogString ) ; */
        -: 2693:		system( lDialogString ) ;
        -: 2694:
        -: 2695:		if (!(lIn = fopen(lPathAndFile, "r")))
        -: 2696:		{
        -: 2697:				remove(lPathAndFile);
        -: 2698:				return NULL;
        -: 2699:		}
        -: 2700:		while (fgets(aoBuff, MAX_PATH_OR_CMD, lIn) != NULL)
        -: 2701:		{}
        -: 2702:		fclose(lIn);
        -: 2703:		remove(lPathAndFile);
        -: 2704:		replaceChr( aoBuff , '/' , '\\' ) ;
        -: 2705:		/* printf( "aoBuff: %s\n" , aoBuff ) ; */
        -: 2706:		getLastName(lDialogString,aoBuff);
        -: 2707:		if ( ! strlen(lDialogString) )
        -: 2708:		{
        -: 2709:				return NULL;
        -: 2710:		}
        -: 2711:		return aoBuff;
        -: 2712:}
        -: 2713:
        -: 2714:
        -: 2715:static char * openFileDialogWinConsole(
        -: 2716:		char const * aTitle , /*  NULL or "" */
        -: 2717:		char const * aDefaultPathAndOrFile ) /*  NULL or "" */
        -: 2718:{
        -: 2719:		char lFilterPatterns[MAX_PATH_OR_CMD] = "";
        -: 2720:		char lDialogString[MAX_PATH_OR_CMD] ;
        -: 2721:		FILE * lIn;
        -: 2722:
        -: 2723:				static char aoBuff[MAX_PATH_OR_CMD];
        -: 2724:
        -: 2725:		strcpy( lDialogString , "dialog " ) ;
        -: 2726:		if ( aTitle && strlen(aTitle) )
        -: 2727:		{
        -: 2728:				strcat(lDialogString, "--title \"") ;
        -: 2729:				strcat(lDialogString, aTitle) ;
        -: 2730:				strcat(lDialogString, "\" ") ;
        -: 2731:		}
        -: 2732:
        -: 2733:		strcat(lDialogString, "--backtitle \"") ;
        -: 2734:		strcat(lDialogString,
        -: 2735:				"tab: focus | /: populate | spacebar: fill text field | ok: TEXT FIELD ONLY") ;
        -: 2736:		strcat(lDialogString, "\" ") ;
        -: 2737:
        -: 2738:		strcat( lDialogString , "--fselect \"" ) ;
        -: 2739:		if ( aDefaultPathAndOrFile && strlen(aDefaultPathAndOrFile) )
        -: 2740:		{
        -: 2741:				/* dialog.exe uses unix separators even on windows */
        -: 2742:				strcpy(lFilterPatterns, aDefaultPathAndOrFile);
        -: 2743:				replaceChr( lFilterPatterns , '\\' , '/' ) ;
        -: 2744:		}
        -: 2745:
        -: 2746:		/* dialog.exe needs at least one separator */
        -: 2747:		if ( ! strchr(lFilterPatterns, '/') )
        -: 2748:		{
        -: 2749:				strcat(lDialogString, "./") ;
        -: 2750:		}
        -: 2751:		strcat(lDialogString, lFilterPatterns) ;
        -: 2752:		strcat(lDialogString, "\" 0 60 2>");
        -: 2753:		strcpy(lFilterPatterns, getenv("TEMP"));
        -: 2754:		strcat(lFilterPatterns, "\\tinyfd.txt");
        -: 2755:		strcat(lDialogString, lFilterPatterns);
        -: 2756:
        -: 2757:		/* printf( "lDialogString: %s\n" , lDialogString ) ; */
        -: 2758:		system( lDialogString ) ;
        -: 2759:
        -: 2760:		if (!(lIn = fopen(lFilterPatterns, "r")))
        -: 2761:		{
        -: 2762:				remove(lFilterPatterns);
        -: 2763:				return NULL;
        -: 2764:		}
        -: 2765:		while (fgets(aoBuff, MAX_PATH_OR_CMD, lIn) != NULL)
        -: 2766:		{}
        -: 2767:		fclose(lIn);
        -: 2768:		remove(lFilterPatterns);
        -: 2769:		replaceChr( aoBuff , '/' , '\\' ) ;
        -: 2770:		/* printf( "aoBuff: %s\n" , aoBuff ) ; */
        -: 2771:		return aoBuff;
        -: 2772:}
        -: 2773:
        -: 2774:
        -: 2775:static char * selectFolderDialogWinConsole(
        -: 2776:		char * aoBuff ,
        -: 2777:		char const * aTitle , /*  NULL or "" */
        -: 2778:		char const * aDefaultPath ) /* NULL or "" */
        -: 2779:{
        -: 2780:		char lDialogString[MAX_PATH_OR_CMD] ;
        -: 2781:		char lString[MAX_PATH_OR_CMD] ;
        -: 2782:		FILE * lIn ;
        -: 2783:
        -: 2784:		strcpy( lDialogString , "dialog " ) ;
        -: 2785:		if ( aTitle && strlen(aTitle) )
        -: 2786:		{
        -: 2787:				strcat(lDialogString, "--title \"") ;
        -: 2788:				strcat(lDialogString, aTitle) ;
        -: 2789:				strcat(lDialogString, "\" ") ;
        -: 2790:		}
        -: 2791:
        -: 2792:		strcat(lDialogString, "--backtitle \"") ;
        -: 2793:		strcat(lDialogString,
        -: 2794:				"tab: focus | /: populate | spacebar: fill text field | ok: TEXT FIELD ONLY") ;
        -: 2795:		strcat(lDialogString, "\" ") ;
        -: 2796:
        -: 2797:		strcat( lDialogString , "--dselect \"" ) ;
        -: 2798:		if ( aDefaultPath && strlen(aDefaultPath) )
        -: 2799:		{
        -: 2800:				/* dialog.exe uses unix separators even on windows */
        -: 2801:				strcpy(lString, aDefaultPath) ;
        -: 2802:				ensureFinalSlash(lString);
        -: 2803:				replaceChr( lString , '\\' , '/' ) ;
        -: 2804:				strcat(lDialogString, lString) ;
        -: 2805:		}
        -: 2806:		else
        -: 2807:		{
        -: 2808:				/* dialog.exe needs at least one separator */
        -: 2809:				strcat(lDialogString, "./") ;
        -: 2810:		}
        -: 2811:		strcat(lDialogString, "\" 0 60 2>");
        -: 2812:		strcpy(lString, getenv("TEMP"));
        -: 2813:		strcat(lString, "\\tinyfd.txt");
        -: 2814:		strcat(lDialogString, lString);
        -: 2815:
        -: 2816:		/* printf( "lDialogString: %s\n" , lDialogString ) ; */
        -: 2817:		system( lDialogString ) ;
        -: 2818:
        -: 2819:		if (!(lIn = fopen(lString, "r")))
        -: 2820:		{
        -: 2821:				remove(lString);
        -: 2822:				return NULL;
        -: 2823:		}
        -: 2824:		while (fgets(aoBuff, MAX_PATH_OR_CMD, lIn) != NULL)
        -: 2825:		{}
        -: 2826:		fclose(lIn);
        -: 2827:		remove(lString);
        -: 2828:		replaceChr( aoBuff , '/' , '\\' ) ;
        -: 2829:		/* printf( "aoBuff: %s\n" , aoBuff ) ; */
        -: 2830:		return aoBuff;
        -: 2831:}
        -: 2832:
        -: 2833:static void writeUtf8( char const * aUtf8String )
        -: 2834:{
        -: 2835:		unsigned long lNum;
        -: 2836:		void * lConsoleHandle;
        -: 2837:		wchar_t * lTmpWChar;
        -: 2838:
        -: 2839:		lConsoleHandle = GetStdHandle(STD_OUTPUT_HANDLE);
        -: 2840:		lTmpWChar = tinyfd_utf8to16(aUtf8String);
        -: 2841:		(void)WriteConsoleW(lConsoleHandle, lTmpWChar, (DWORD) wcslen(lTmpWChar), &lNum, NULL);
        -: 2842:}
        -: 2843:
        -: 2844:
        -: 2845:int tinyfd_messageBox(
        -: 2846:		char const * aTitle, /* NULL or "" */
        -: 2847:		char const * aMessage, /* NULL or ""  may contain \n and \t */
        -: 2848:		char const * aDialogType, /* "ok" "okcancel" "yesno" "yesnocancel" */
        -: 2849:		char const * aIconType, /* "info" "warning" "error" "question" */
        -: 2850:		int aDefaultButton) /* 0 for cancel/no , 1 for ok/yes , 2 for no in yesnocancel */
        -: 2851:{
        -: 2852:		char lChar;
        -: 2853:		UINT lOriginalCP = 0;
        -: 2854:		UINT lOriginalOutputCP = 0;
        -: 2855:
        -: 2856:		if (tfd_quoteDetected(aTitle)) return tinyfd_messageBox("INVALID TITLE WITH QUOTES", aMessage, aDialogType, aIconType, aDefaultButton);
        -: 2857:		if (tfd_quoteDetected(aMessage)) return tinyfd_messageBox(aTitle, "INVALID MESSAGE WITH QUOTES", aDialogType, aIconType, aDefaultButton);
        -: 2858:
        -: 2859:		if ((!tinyfd_forceConsole || !(GetConsoleWindow() || dialogPresent()))
        -: 2860:				&& (!getenv("SSH_CLIENT") || getenvDISPLAY()))
        -: 2861:		{
        -: 2862:				if (aTitle&&!strcmp(aTitle, "tinyfd_query")){ strcpy(tinyfd_response, "windows"); return 1; }
        -: 2863:				return messageBoxWinGui(aTitle, aMessage, aDialogType, aIconType, aDefaultButton);
        -: 2864:		}
        -: 2865:		else if (dialogPresent())
        -: 2866:		{
        -: 2867:				if (aTitle&&!strcmp(aTitle, "tinyfd_query")){ strcpy(tinyfd_response, "dialog"); return 0; }
        -: 2868:				return messageBoxWinConsole(
        -: 2869:						aTitle, aMessage, aDialogType, aIconType, aDefaultButton);
        -: 2870:		}
        -: 2871:		else
        -: 2872:		{
        -: 2873:				if (!tinyfd_winUtf8)
        -: 2874:				{
        -: 2875:						lOriginalCP = GetConsoleCP();
        -: 2876:						lOriginalOutputCP = GetConsoleOutputCP();
        -: 2877:						(void)SetConsoleCP(GetACP());
        -: 2878:						(void)SetConsoleOutputCP(GetACP());
        -: 2879:				}
        -: 2880:
        -: 2881:				if (aTitle&&!strcmp(aTitle, "tinyfd_query")){ strcpy(tinyfd_response, "basicinput"); return 0; }
        -: 2882:				if (!gWarningDisplayed && !tinyfd_forceConsole)
        -: 2883:				{
        -: 2884:						gWarningDisplayed = 1;
        -: 2885:						printf("\n\n%s\n", gTitle);
        -: 2886:						printf("%s\n\n", tinyfd_needs);
        -: 2887:				}
        -: 2888:
        -: 2889:				if (aTitle && strlen(aTitle))
        -: 2890:				{
        -: 2891:						printf("\n");
        -: 2892:						if (tinyfd_winUtf8) writeUtf8(aTitle);
        -: 2893:						else printf("%s", aTitle);
        -: 2894:						printf("\n\n");
        -: 2895:				}
        -: 2896:				if (aDialogType && !strcmp("yesno", aDialogType))
        -: 2897:				{
        -: 2898:						do
        -: 2899:						{
        -: 2900:								if (aMessage && strlen(aMessage))
        -: 2901:								{
        -: 2902:										if (tinyfd_winUtf8) writeUtf8(aMessage);
        -: 2903:										else printf("%s", aMessage);
        -: 2904:										printf("\n");
        -: 2905:								}
        -: 2906:								printf("y/n: ");
        -: 2907:								lChar = (char)tolower(_getch());
        -: 2908:								printf("\n\n");
        -: 2909:						} while (lChar != 'y' && lChar != 'n');
        -: 2910:						if (!tinyfd_winUtf8) { (void)SetConsoleCP(lOriginalCP); (void)SetConsoleOutputCP(lOriginalOutputCP); }
        -: 2911:						return lChar == 'y' ? 1 : 0;
        -: 2912:				}
        -: 2913:				else if (aDialogType && !strcmp("okcancel", aDialogType))
        -: 2914:				{
        -: 2915:						do
        -: 2916:						{
        -: 2917:								if (aMessage && strlen(aMessage))
        -: 2918:								{
        -: 2919:										if (tinyfd_winUtf8) writeUtf8(aMessage);
        -: 2920:										else printf("%s", aMessage);
        -: 2921:										printf("\n");
        -: 2922:								}
        -: 2923:								printf("[O]kay/[C]ancel: ");
        -: 2924:								lChar = (char)tolower(_getch());
        -: 2925:								printf("\n\n");
        -: 2926:						} while (lChar != 'o' && lChar != 'c');
        -: 2927:						if (!tinyfd_winUtf8) { (void)SetConsoleCP(lOriginalCP); (void)SetConsoleOutputCP(lOriginalOutputCP); }
        -: 2928:						return lChar == 'o' ? 1 : 0;
        -: 2929:				}
        -: 2930:				else if (aDialogType && !strcmp("yesnocancel", aDialogType))
        -: 2931:				{
        -: 2932:						do
        -: 2933:						{
        -: 2934:								if (aMessage && strlen(aMessage))
        -: 2935:								{
        -: 2936:										if (tinyfd_winUtf8) writeUtf8(aMessage);
        -: 2937:										else printf("%s", aMessage);
        -: 2938:										printf("\n");
        -: 2939:								}
        -: 2940:								printf("[Y]es/[N]o/[C]ancel: ");
        -: 2941:								lChar = (char)tolower(_getch());
        -: 2942:								printf("\n\n");
        -: 2943:						} while (lChar != 'y' && lChar != 'n' && lChar != 'c');
        -: 2944:						if (!tinyfd_winUtf8) { (void)SetConsoleCP(lOriginalCP); (void)SetConsoleOutputCP(lOriginalOutputCP); }
        -: 2945:						return (lChar == 'y') ? 1 : (lChar == 'n') ? 2 : 0;
        -: 2946:				}
        -: 2947:				else
        -: 2948:				{
        -: 2949:						if (aMessage && strlen(aMessage))
        -: 2950:						{
        -: 2951:								if (tinyfd_winUtf8) writeUtf8(aMessage);
        -: 2952:								else printf("%s", aMessage);
        -: 2953:								printf("\n\n");
        -: 2954:						}
        -: 2955:						printf("press enter to continue "); fflush(stdout);
        -: 2956:						lChar = (char)_getch();
        -: 2957:						printf("\n\n");
        -: 2958:						if (!tinyfd_winUtf8) { (void)SetConsoleCP(lOriginalCP); (void)SetConsoleOutputCP(lOriginalOutputCP); }
        -: 2959:						return 1;
        -: 2960:				}
        -: 2961:		}
        -: 2962:}
        -: 2963:
        -: 2964:
        -: 2965:/* return has only meaning for tinyfd_query */
        -: 2966:int tinyfd_notifyPopup(
        -: 2967:		char const * aTitle, /* NULL or "" */
        -: 2968:		char const * aMessage , /* NULL or "" may contain \n \t */
        -: 2969:		char const * aIconType ) /* "info" "warning" "error" */
        -: 2970:{
        -: 2971:		if (tfd_quoteDetected(aTitle)) return tinyfd_notifyPopup("INVALID TITLE WITH QUOTES", aMessage, aIconType);
        -: 2972:		if (tfd_quoteDetected(aMessage)) return tinyfd_notifyPopup(aTitle, "INVALID MESSAGE WITH QUOTES", aIconType);
        -: 2973:
        -: 2974:	if ( powershellPresent() && (!tinyfd_forceConsole || !(
        -: 2975:			GetConsoleWindow() ||
        -: 2976:			dialogPresent()))
        -: 2977:						&& (!getenv("SSH_CLIENT") || getenvDISPLAY()))
        -: 2978:	{
        -: 2979:			if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"windows");return 1;}
        -: 2980:			return notifyWinGui(aTitle, aMessage, aIconType);
        -: 2981:	}
        -: 2982:	else
        -: 2983:			return tinyfd_messageBox(aTitle, aMessage, "ok" , aIconType, 0);
        -: 2984:}
        -: 2985:
        -: 2986:
        -: 2987:/* returns NULL on cancel */
        -: 2988:char * tinyfd_inputBox(
        -: 2989:		char const * aTitle , /* NULL or "" */
        -: 2990:		char const * aMessage , /* NULL or "" (\n and \t have no effect) */
        -: 2991:		char const * aDefaultInput ) /* "" , if NULL it's a passwordBox */
        -: 2992:{
        -: 2993:		static char lBuff[MAX_PATH_OR_CMD] = "";
        -: 2994:		char * lEOF;
        -: 2995:
        -: 2996:		DWORD mode = 0;
        -: 2997:		HANDLE hStdin = GetStdHandle(STD_INPUT_HANDLE);
        -: 2998:
        -: 2999:		unsigned long lNum;
        -: 3000:		void * lConsoleHandle;
        -: 3001:		char * lTmpChar;
        -: 3002:		wchar_t lBuffW[1024];
        -: 3003:
        -: 3004:		UINT lOriginalCP = 0;
        -: 3005:		UINT lOriginalOutputCP = 0;
        -: 3006:
        -: 3007:		if (!aTitle && !aMessage && !aDefaultInput) return lBuff; /* now I can fill lBuff from outside */
        -: 3008:
        -: 3009:		if (tfd_quoteDetected(aTitle)) return tinyfd_inputBox("INVALID TITLE WITH QUOTES", aMessage, aDefaultInput);
        -: 3010:		if (tfd_quoteDetected(aMessage)) return tinyfd_inputBox(aTitle, "INVALID MESSAGE WITH QUOTES", aDefaultInput);
        -: 3011:		if (tfd_quoteDetected(aDefaultInput)) return tinyfd_inputBox(aTitle, aMessage, "INVALID DEFAULT_INPUT WITH QUOTES: use the GRAVE ACCENT \\x60 instead.");
        -: 3012:
        -: 3013:	mode = 0;
        -: 3014:	hStdin = GetStdHandle(STD_INPUT_HANDLE);
        -: 3015:
        -: 3016:	if ((!tinyfd_forceConsole || !(
        -: 3017:			GetConsoleWindow() ||
        -: 3018:			dialogPresent()))
        -: 3019:						&& (!getenv("SSH_CLIENT") || getenvDISPLAY()))
        -: 3020:	{
        -: 3021:		if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"windows");return (char *)1;}
        -: 3022:		lBuff[0]='\0';
        -: 3023:				if (inputBoxWinGui(lBuff, aTitle, aMessage, aDefaultInput)) return lBuff;
        -: 3024:				else return NULL;
        -: 3025:		}
        -: 3026:	else if ( dialogPresent() )
        -: 3027:	{
        -: 3028:		if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"dialog");return (char *)0;}
        -: 3029:		lBuff[0]='\0';
        -: 3030:				if (inputBoxWinConsole(lBuff, aTitle, aMessage, aDefaultInput) ) return lBuff;
        -: 3031:				else return NULL;
        -: 3032:		}
        -: 3033:	else
        -: 3034:	{
        -: 3035:	  if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"basicinput");return (char *)0;}
        -: 3036:	  lBuff[0]='\0';
        -: 3037:	  if (!gWarningDisplayed && !tinyfd_forceConsole)
        -: 3038:	  {
        -: 3039:		  gWarningDisplayed = 1 ;
        -: 3040:		  printf("\n\n%s\n", gTitle);
        -: 3041:		  printf("%s\n\n", tinyfd_needs);
        -: 3042:	  }
        -: 3043:
        -: 3044:	  if (!tinyfd_winUtf8)
        -: 3045:	  {
        -: 3046:			  lOriginalCP = GetConsoleCP();
        -: 3047:			  lOriginalOutputCP = GetConsoleOutputCP();
        -: 3048:			  (void)SetConsoleCP(GetACP());
        -: 3049:			  (void)SetConsoleOutputCP(GetACP());
        -: 3050:	  }
        -: 3051:
        -: 3052:	  if (aTitle && strlen(aTitle))
        -: 3053:	  {
        -: 3054:				printf("\n");
        -: 3055:				if (tinyfd_winUtf8) writeUtf8(aTitle);
        -: 3056:				else printf("%s", aTitle);
        -: 3057:				printf("\n\n");
        -: 3058:		  }
        -: 3059:	  if ( aMessage && strlen(aMessage) )
        -: 3060:	  {
        -: 3061:				if (tinyfd_winUtf8) writeUtf8(aMessage);
        -: 3062:				else printf("%s", aMessage);
        -: 3063:				printf("\n");
        -: 3064:	  }
        -: 3065:	  printf("(ctrl-Z + enter to cancel): "); fflush(stdout);
        -: 3066:	  if ( ! aDefaultInput )
        -: 3067:	  {
        -: 3068:				  (void) GetConsoleMode(hStdin, &mode);
        -: 3069:				  (void) SetConsoleMode(hStdin, mode & (~ENABLE_ECHO_INPUT));
        -: 3070:	  }
        -: 3071:		  if (tinyfd_winUtf8)
        -: 3072:		  {
        -: 3073:				lConsoleHandle = GetStdHandle(STD_INPUT_HANDLE);
        -: 3074:				(void) ReadConsoleW(lConsoleHandle, lBuffW, MAX_PATH_OR_CMD, &lNum, NULL);
        -: 3075:				if (!aDefaultInput)
        -: 3076:				{
        -: 3077:						(void)SetConsoleMode(hStdin, mode);
        -: 3078:						printf("\n");
        -: 3079:				}
        -: 3080:				lBuffW[lNum] = '\0';
        -: 3081:				if (lBuffW[wcslen(lBuffW) - 1] == '\n') lBuffW[wcslen(lBuffW) - 1] = '\0';
        -: 3082:				if (lBuffW[wcslen(lBuffW) - 1] == '\r') lBuffW[wcslen(lBuffW) - 1] = '\0';
        -: 3083:				lTmpChar = tinyfd_utf16to8(lBuffW);
        -: 3084:				if (lTmpChar)
        -: 3085:				{
        -: 3086:						strcpy(lBuff, lTmpChar);
        -: 3087:						return lBuff;
        -: 3088:				}
        -: 3089:				else
        -: 3090:						return NULL;
        -: 3091:		  }
        -: 3092:		  else
        -: 3093:		  {
        -: 3094:				  lEOF = fgets(lBuff, MAX_PATH_OR_CMD, stdin);
        -: 3095:				  if (!aDefaultInput)
        -: 3096:				  {
        -: 3097:						  (void)SetConsoleMode(hStdin, mode);
        -: 3098:						  printf("\n");
        -: 3099:				  }
        -: 3100:
        -: 3101:				  if (!tinyfd_winUtf8)
        -: 3102:				  {
        -: 3103:						  (void)SetConsoleCP(lOriginalCP);
        -: 3104:						  (void)SetConsoleOutputCP(lOriginalOutputCP);
        -: 3105:				  }
        -: 3106:
        -: 3107:				  if (!lEOF)
        -: 3108:				  {
        -: 3109:						  return NULL;
        -: 3110:				  }
        -: 3111:				  printf("\n");
        -: 3112:				  if (strchr(lBuff, 27))
        -: 3113:				  {
        -: 3114:						  return NULL;
        -: 3115:				  }
        -: 3116:				  if (lBuff[strlen(lBuff) - 1] == '\n')
        -: 3117:				  {
        -: 3118:						  lBuff[strlen(lBuff) - 1] = '\0';
        -: 3119:				  }
        -: 3120:				  return lBuff;
        -: 3121:				}
        -: 3122:		}
        -: 3123:}
        -: 3124:
        -: 3125:
        -: 3126:char * tinyfd_saveFileDialog(
        -: 3127:		char const * aTitle , /* NULL or "" */
        -: 3128:		char const * aDefaultPathAndOrFile , /* NULL or "" */
        -: 3129:		int aNumOfFilterPatterns , /* 0 */
        -: 3130:		char const * const * aFilterPatterns , /* NULL or {"*.jpg","*.png"} */
        -: 3131:		char const * aSingleFilterDescription ) /* NULL or "image files" */
        -: 3132:{
        -: 3133:		static char lBuff[MAX_PATH_OR_CMD] ;
        -: 3134:		char lString[MAX_PATH_OR_CMD] ;
        -: 3135:		char * p ;
        -: 3136:				char * lPointerInputBox;
        -: 3137:				int i;
        -: 3138:
        -: 3139:		lBuff[0]='\0';
        -: 3140:
        -: 3141:		if ( ! aFilterPatterns ) aNumOfFilterPatterns = 0 ;
        -: 3142:				if (tfd_quoteDetected(aTitle)) return tinyfd_saveFileDialog("INVALID TITLE WITH QUOTES", aDefaultPathAndOrFile, aNumOfFilterPatterns, aFilterPatterns, aSingleFilterDescription);
        -: 3143:				if (tfd_quoteDetected(aDefaultPathAndOrFile)) return tinyfd_saveFileDialog(aTitle, "INVALID DEFAULT_PATH WITH QUOTES", aNumOfFilterPatterns, aFilterPatterns, aSingleFilterDescription);
        -: 3144:				if (tfd_quoteDetected(aSingleFilterDescription)) return tinyfd_saveFileDialog(aTitle, aDefaultPathAndOrFile, aNumOfFilterPatterns, aFilterPatterns, "INVALID FILTER_DESCRIPTION WITH QUOTES");
        -: 3145:				for (i = 0; i < aNumOfFilterPatterns; i++)
        -: 3146:				{
        -: 3147:						if (tfd_quoteDetected(aFilterPatterns[i])) return tinyfd_saveFileDialog("INVALID FILTER_PATTERN WITH QUOTES: use the GRAVE ACCENT \\x60 instead.", aDefaultPathAndOrFile, 0, NULL, NULL);
        -: 3148:				}
        -: 3149:
        -: 3150:
        -: 3151:				if ( ( !tinyfd_forceConsole || !( GetConsoleWindow() || dialogPresent() ) )
        -: 3152:						&& (!getenv("SSH_CLIENT") || getenvDISPLAY()))
        -: 3153:		{
        -: 3154:			if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"windows");return (char *)1;}
        -: 3155:			p = saveFileDialogWinGui(lBuff,
        -: 3156:								aTitle, aDefaultPathAndOrFile, aNumOfFilterPatterns, (char const * const *)aFilterPatterns, aSingleFilterDescription);
        -: 3157:		}
        -: 3158:				else if (dialogPresent())
        -: 3159:				{
        -: 3160:						if (aTitle&&!strcmp(aTitle, "tinyfd_query")){ strcpy(tinyfd_response, "dialog"); return (char *)0; }
        -: 3161:						p = saveFileDialogWinConsole(lBuff, aTitle, aDefaultPathAndOrFile);
        -: 3162:				}
        -: 3163:				else
        -: 3164:				{
        -: 3165:						if (aTitle&&!strcmp(aTitle, "tinyfd_query")){ strcpy(tinyfd_response, "basicinput"); return (char *)0; }
        -: 3166:						strcpy(lBuff, "Save file in ");
        -: 3167:						strcat(lBuff, getCurDir());
        -: 3168:
        -: 3169:						lPointerInputBox = tinyfd_inputBox(NULL,NULL,NULL); /* obtain a pointer on the current content of tinyfd_inputBox */
        -: 3170:						if (lPointerInputBox) strcpy(lString, lPointerInputBox); /* preserve the current content of tinyfd_inputBox */
        -: 3171:						p = tinyfd_inputBox(aTitle, lBuff, "");
        -: 3172:						if (p) strcpy(lBuff, p); else lBuff[0] = '\0';
        -: 3173:						if (lPointerInputBox) strcpy(lPointerInputBox, lString); /* restore its previous content to tinyfd_inputBox */
        -: 3174:						p = lBuff;
        -: 3175:				}
        -: 3176:
        -: 3177:		if ( ! p || ! strlen( p )  )
        -: 3178:		{
        -: 3179:				return NULL;
        -: 3180:		}
        -: 3181:		getPathWithoutFinalSlash( lString , p ) ;
        -: 3182:		if ( strlen( lString ) && ! dirExists( lString ) )
        -: 3183:		{
        -: 3184:				return NULL ;
        -: 3185:		}
        -: 3186:		getLastName(lString,p);
        -: 3187:		if ( ! filenameValid(lString) )
        -: 3188:		{
        -: 3189:				return NULL;
        -: 3190:		}
        -: 3191:		return p ;
        -: 3192:}
        -: 3193:
        -: 3194:
        -: 3195:/* in case of multiple files, the separator is | */
        -: 3196:char * tinyfd_openFileDialog(
        -: 3197:	char const * aTitle , /* NULL or "" */
        -: 3198:		char const * aDefaultPathAndOrFile, /* NULL or "" */
        -: 3199:	int aNumOfFilterPatterns , /* 0 */
        -: 3200:		char const * const * aFilterPatterns, /* NULL or {"*.jpg","*.png"} */
        -: 3201:		char const * aSingleFilterDescription, /* NULL or "image files" */
        -: 3202:	int aAllowMultipleSelects ) /* 0 or 1 */
        -: 3203:{
        -: 3204:	static char lBuff[MAX_PATH_OR_CMD];
        -: 3205:	char lString[MAX_PATH_OR_CMD];
        -: 3206:		char * p;
        -: 3207:		char * lPointerInputBox;
        -: 3208:		int i;
        -: 3209:
        -: 3210:	if ( ! aFilterPatterns ) aNumOfFilterPatterns = 0 ;
        -: 3211:		if (tfd_quoteDetected(aTitle)) return tinyfd_openFileDialog("INVALID TITLE WITH QUOTES", aDefaultPathAndOrFile, aNumOfFilterPatterns, aFilterPatterns, aSingleFilterDescription, aAllowMultipleSelects);
        -: 3212:		if (tfd_quoteDetected(aDefaultPathAndOrFile)) return tinyfd_openFileDialog(aTitle, "INVALID DEFAULT_PATH WITH QUOTES", aNumOfFilterPatterns, aFilterPatterns, aSingleFilterDescription, aAllowMultipleSelects);
        -: 3213:		if (tfd_quoteDetected(aSingleFilterDescription)) return tinyfd_openFileDialog(aTitle, aDefaultPathAndOrFile, aNumOfFilterPatterns, aFilterPatterns, "INVALID FILTER_DESCRIPTION WITH QUOTES", aAllowMultipleSelects);
        -: 3214:		for (i = 0; i < aNumOfFilterPatterns; i++)
        -: 3215:		{
        -: 3216:				if (tfd_quoteDetected(aFilterPatterns[i])) return tinyfd_openFileDialog("INVALID FILTER_PATTERN WITH QUOTES: use the GRAVE ACCENT \\x60 instead.", aDefaultPathAndOrFile, 0, NULL, NULL, aAllowMultipleSelects);
        -: 3217:		}
        -: 3218:
        -: 3219:	if ( ( !tinyfd_forceConsole || !( GetConsoleWindow() || dialogPresent() ) )
        -: 3220:				&& (!getenv("SSH_CLIENT") || getenvDISPLAY()))
        -: 3221:		{
        -: 3222:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"windows");return (char *)1;}
        -: 3223:				p = openFileDialogWinGui( aTitle, aDefaultPathAndOrFile, aNumOfFilterPatterns,
        -: 3224:										(char const * const *)aFilterPatterns, aSingleFilterDescription, aAllowMultipleSelects);
        -: 3225:		}
        -: 3226:				else if (dialogPresent())
        -: 3227:				{
        -: 3228:						if (aTitle&&!strcmp(aTitle, "tinyfd_query")){ strcpy(tinyfd_response, "dialog"); return (char *)0; }
        -: 3229:						p = openFileDialogWinConsole(aTitle, aDefaultPathAndOrFile);
        -: 3230:				}
        -: 3231:				else
        -: 3232:				{
        -: 3233:						if (aTitle&&!strcmp(aTitle, "tinyfd_query")){ strcpy(tinyfd_response, "basicinput"); return (char *)0; }
        -: 3234:						strcpy(lBuff, "Open file from ");
        -: 3235:						strcat(lBuff, getCurDir());
        -: 3236:						lPointerInputBox = tinyfd_inputBox(NULL, NULL, NULL); /* obtain a pointer on the current content of tinyfd_inputBox */
        -: 3237:						if (lPointerInputBox) strcpy(lString, lPointerInputBox); /* preserve the current content of tinyfd_inputBox */
        -: 3238:						p = tinyfd_inputBox(aTitle, lBuff, "");
        -: 3239:						if (p) strcpy(lBuff, p); else lBuff[0] = '\0';
        -: 3240:						if (lPointerInputBox) strcpy(lPointerInputBox, lString); /* restore its previous content to tinyfd_inputBox */
        -: 3241:						p = lBuff;
        -: 3242:				}
        -: 3243:
        -: 3244:		if ( ! p || ! strlen( p )  )
        -: 3245:		{
        -: 3246:				return NULL;
        -: 3247:		}
        -: 3248:		if ( aAllowMultipleSelects && strchr(p, '|') )
        -: 3249:		{
        -: 3250:				p = ensureFilesExist( (char *) p , p ) ;
        -: 3251:		}
        -: 3252:		else if ( ! fileExists(p) )
        -: 3253:		{
        -: 3254:				return NULL ;
        -: 3255:		}
        -: 3256:		/* printf( "lBuff3: %s\n" , p ) ; */
        -: 3257:		return p ;
        -: 3258:}
        -: 3259:
        -: 3260:
        -: 3261:char * tinyfd_selectFolderDialog(
        -: 3262:		char const * aTitle , /* NULL or "" */
        -: 3263:		char const * aDefaultPath ) /* NULL or "" */
        -: 3264:{
        -: 3265:		static char lBuff[MAX_PATH_OR_CMD];
        -: 3266:		char * p;
        -: 3267:		char * lPointerInputBox;
        -: 3268:		char lString[MAX_PATH_OR_CMD];
        -: 3269:
        -: 3270:		if (tfd_quoteDetected(aTitle)) return tinyfd_selectFolderDialog("INVALID TITLE WITH QUOTES", aDefaultPath);
        -: 3271:		if (tfd_quoteDetected(aDefaultPath)) return tinyfd_selectFolderDialog(aTitle, "INVALID DEFAULT_PATH WITH QUOTES");
        -: 3272:
        -: 3273:	if ( ( !tinyfd_forceConsole || !( GetConsoleWindow() || dialogPresent() ) )
        -: 3274:				&& (!getenv("SSH_CLIENT") || getenvDISPLAY()))
        -: 3275:		{
        -: 3276:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"windows");return (char *)1;}
        -: 3277:				p = selectFolderDialogWinGui(lBuff, aTitle, aDefaultPath);
        -: 3278:		}
        -: 3279:				else
        -: 3280:				if (dialogPresent())
        -: 3281:				{
        -: 3282:						if (aTitle&&!strcmp(aTitle, "tinyfd_query")){ strcpy(tinyfd_response, "dialog"); return (char *)0; }
        -: 3283:						p = selectFolderDialogWinConsole(lBuff, aTitle, aDefaultPath);
        -: 3284:				}
        -: 3285:				else
        -: 3286:				{
        -: 3287:						if (aTitle&&!strcmp(aTitle, "tinyfd_query")){ strcpy(tinyfd_response, "basicinput"); return (char *)0; }
        -: 3288:						strcpy(lBuff, "Select folder from ");
        -: 3289:						strcat(lBuff, getCurDir());
        -: 3290:						lPointerInputBox = tinyfd_inputBox(NULL, NULL, NULL); /* obtain a pointer on the current content of tinyfd_inputBox */
        -: 3291:						if (lPointerInputBox) strcpy(lString, lPointerInputBox); /* preserve the current content of tinyfd_inputBox */
        -: 3292:						p = tinyfd_inputBox(aTitle, lBuff, "");
        -: 3293:						if (p) strcpy(lBuff, p); else lBuff[0] = '\0';
        -: 3294:						if (lPointerInputBox) strcpy(lPointerInputBox, lString); /* restore its previous content to tinyfd_inputBox */
        -: 3295:						p = lBuff;
        -: 3296:				}
        -: 3297:
        -: 3298:		if ( ! p || ! strlen( p ) || ! dirExists( p ) )
        -: 3299:		{
        -: 3300:				return NULL ;
        -: 3301:		}
        -: 3302:		return p ;
        -: 3303:}
        -: 3304:
        -: 3305:
        -: 3306:/* aDefaultRGB is used only if aDefaultHexRGB is absent */
        -: 3307:/* aDefaultRGB and aoResultRGB can be the same array */
        -: 3308:/* returns NULL on cancel */
        -: 3309:/* returns the hexcolor as a string "#FF0000" */
        -: 3310:/* aoResultRGB also contains the result */
        -: 3311:char * tinyfd_colorChooser(
        -: 3312:		char const * aTitle, /* NULL or "" */
        -: 3313:		char const * aDefaultHexRGB, /* NULL or "" or "#FF0000"*/
        -: 3314:		unsigned char const aDefaultRGB[3], /* { 0 , 255 , 255 } */
        -: 3315:		unsigned char aoResultRGB[3]) /* { 0 , 0 , 0 } */
        -: 3316:{
        -: 3317:		static char lDefaultHexRGB[16];
        -: 3318:	int i;
        -: 3319:	char * p ;
        -: 3320:		char * lPointerInputBox;
        -: 3321:		char lString[MAX_PATH_OR_CMD];
        -: 3322:
        -: 3323:		lDefaultHexRGB[0] = '\0';
        -: 3324:
        -: 3325:		if (tfd_quoteDetected(aTitle)) return tinyfd_colorChooser("INVALID TITLE WITH QUOTES", aDefaultHexRGB, aDefaultRGB, aoResultRGB);
        -: 3326:		if (tfd_quoteDetected(aDefaultHexRGB)) return tinyfd_colorChooser(aTitle, "INVALID DEFAULT_HEX_RGB WITH QUOTES: use the GRAVE ACCENT \\x60 instead.", aDefaultRGB, aoResultRGB);
        -: 3327:
        -: 3328:	if ( (!tinyfd_forceConsole || !( GetConsoleWindow() || dialogPresent()) )
        -: 3329:				&& (!getenv("SSH_CLIENT") || getenvDISPLAY()))
        -: 3330:	{
        -: 3331:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"windows");return (char *)1;}
        -: 3332:				p = colorChooserWinGui(aTitle, aDefaultHexRGB, aDefaultRGB, aoResultRGB);
        -: 3333:		if (p)
        -: 3334:		{
        -: 3335:			strcpy(lDefaultHexRGB, p);
        -: 3336:			return lDefaultHexRGB;
        -: 3337:		}
        -: 3338:		return NULL;
        -: 3339:	}
        -: 3340:		else if (dialogPresent())
        -: 3341:		{
        -: 3342:				if (aTitle&&!strcmp(aTitle, "tinyfd_query")){ strcpy(tinyfd_response, "dialog"); return (char *)0; }
        -: 3343:		}
        -: 3344:		else
        -: 3345:		{
        -: 3346:				if (aTitle&&!strcmp(aTitle, "tinyfd_query")){ strcpy(tinyfd_response, "basicinput"); return (char *)0; }
        -: 3347:		}
        -: 3348:
        -: 3349:		if (aDefaultHexRGB && (strlen(aDefaultHexRGB)==7) )
        -: 3350:		{
        -: 3351:				strncpy(lDefaultHexRGB, aDefaultHexRGB,7);
        -: 3352:				lDefaultHexRGB[7]='\0';
        -: 3353:		}
        -: 3354:		else
        -: 3355:		{
        -: 3356:				RGB2Hex(aDefaultRGB, lDefaultHexRGB);
        -: 3357:		}
        -: 3358:
        -: 3359:		lPointerInputBox = tinyfd_inputBox(NULL, NULL, NULL); /* obtain a pointer on the current content of tinyfd_inputBox */
        -: 3360:		if (lPointerInputBox) strcpy(lString, lPointerInputBox); /* preserve the current content of tinyfd_inputBox */
        -: 3361:		p = tinyfd_inputBox(aTitle, "Enter hex rgb color (i.e. #f5ca20)", lDefaultHexRGB);
        -: 3362:
        -: 3363:	if ( !p || (strlen(p) != 7) || (p[0] != '#') )
        -: 3364:	{
        -: 3365:			return NULL ;
        -: 3366:	}
        -: 3367:	for ( i = 1 ; i < 7 ; i ++ )
        -: 3368:	{
        -: 3369:			if ( ! isxdigit( (int) p[i] ) )
        -: 3370:			{
        -: 3371:					return NULL ;
        -: 3372:			}
        -: 3373:	}
        -: 3374:	Hex2RGB(p,aoResultRGB);
        -: 3375:
        -: 3376:		strcpy(lDefaultHexRGB, p);
        -: 3377:
        -: 3378:		if (lPointerInputBox) strcpy(lPointerInputBox, lString); /* restore its previous content to tinyfd_inputBox */
        -: 3379:
        -: 3380:		return lDefaultHexRGB;
        -: 3381:}
        -: 3382:
        -: 3383:
        -: 3384:#else /* unix */
        -: 3385:
        -: 3386:static char gPython2Name[16];
        -: 3387:static char gPython3Name[16];
        -: 3388:static char gPythonName[16];
        -: 3389:
function tfd_isDarwin called 0 returned 0% blocks executed 0%
    #####: 3390:int tfd_isDarwin(void)
        -: 3391:{
        -: 3392:		static int lsIsDarwin = -1 ;
        -: 3393:		struct utsname lUtsname ;
    #####: 3394:		if ( lsIsDarwin < 0 )
    %%%%%: 3394-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3395:		{
    #####: 3396:				lsIsDarwin = !uname(&lUtsname) && !strcmp(lUtsname.sysname,"Darwin") ;
    %%%%%: 3396-block 3
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 3396-block 5
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 3396-block 6
    %%%%%: 3396-block 7
    %%%%%: 3396-block 8
        -: 3397:		}
    #####: 3398:		return lsIsDarwin ;
    %%%%%: 3398-block 9
        -: 3399:}
        -: 3400:
        -: 3401:
function dirExists called 0 returned 0% blocks executed 0%
    #####: 3402:static int dirExists( char const * aDirPath )
        -: 3403:{
        -: 3404:		DIR * lDir ;
    #####: 3405:		if ( ! aDirPath || ! strlen( aDirPath ) )
    %%%%%: 3405-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3405-block 3
branch  2 never executed (fallthrough)
branch  3 never executed
    #####: 3406:				return 0 ;
    %%%%%: 3406-block 4
    #####: 3407:		lDir = opendir( aDirPath ) ;
    %%%%%: 3407-block 5
call    0 never executed
    #####: 3408:		if ( ! lDir )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3409:		{
    #####: 3410:			return 0 ;
    %%%%%: 3410-block 7
        -: 3411:		}
    #####: 3412:		closedir( lDir ) ;
    %%%%%: 3412-block 8
call    0 never executed
    #####: 3413:		return 1 ;
        -: 3414:}
        -: 3415:
        -: 3416:
function detectPresence called 0 returned 0% blocks executed 0%
    #####: 3417:static int detectPresence( char const * aExecutable )
        -: 3418:{
        -: 3419:   char lBuff[MAX_PATH_OR_CMD] ;
    #####: 3420:   char lTestedString[MAX_PATH_OR_CMD] = "command -v " ;
        -: 3421:   FILE * lIn ;
        -: 3422:#ifdef _GNU_SOURCE
        -: 3423:   char* lAllocatedCharString;
        -: 3424:   int lSubstringUndetected;
        -: 3425:#endif
        -: 3426:
    #####: 3427:   strcat( lTestedString , aExecutable ) ;
    #####: 3428:   strcat( lTestedString, " 2>/dev/null ");
    #####: 3429:   lIn = popen( lTestedString , "r" ) ;
    %%%%%: 3429-block 2
call    0 never executed
    #####: 3430:   if ( ( fgets( lBuff , sizeof( lBuff ) , lIn ) != NULL )
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    #####: 3431:	&& ( ! strchr( lBuff , ':' ) ) && ( strncmp(lBuff, "no ", 3) ) )
    %%%%%: 3431-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3431-block 6
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 3432:   {   /* present */
    #####: 3433:	  pclose( lIn ) ;
    %%%%%: 3433-block 7
call    0 never executed
        -: 3434:
        -: 3435:#ifdef _GNU_SOURCE /*to bypass this, just comment out "#define _GNU_SOURCE" at the top of the file*/
    #####: 3436:	  if ( lBuff[strlen( lBuff ) -1] == '\n' ) lBuff[strlen( lBuff ) -1] = '\0' ;
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3436-block 9
    #####: 3437:	  lAllocatedCharString = realpath(lBuff,NULL); /*same as canonicalize_file_name*/
    %%%%%: 3437-block 10
call    0 never executed
    #####: 3438:	  lSubstringUndetected = ! strstr(lAllocatedCharString, aExecutable);
    #####: 3439:	  free(lAllocatedCharString);
    #####: 3440:	  if (lSubstringUndetected)
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3441:	  {
    #####: 3442:		 if (tinyfd_verbose) printf("detectPresence %s %d\n", aExecutable, 0);
    %%%%%: 3442-block 12
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3442-block 13
call    2 never executed
    #####: 3443:		 return 0;
    %%%%%: 3443-block 14
        -: 3444:	  }
        -: 3445:#endif /*_GNU_SOURCE*/
        -: 3446:
    #####: 3447:	  if (tinyfd_verbose) printf("detectPresence %s %d\n", aExecutable, 1);
    %%%%%: 3447-block 15
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3447-block 16
call    2 never executed
    #####: 3448:	  return 1 ;
    %%%%%: 3448-block 17
        -: 3449:   }
        -: 3450:   else
        -: 3451:   {
    #####: 3452:	  pclose( lIn ) ;
    %%%%%: 3452-block 18
call    0 never executed
    #####: 3453:	  if (tinyfd_verbose) printf("detectPresence %s %d\n", aExecutable, 0);
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3453-block 20
call    2 never executed
    #####: 3454:	  return 0 ;
    %%%%%: 3454-block 21
        -: 3455:   }
        -: 3456:}
        -: 3457:
        -: 3458:
function getVersion called 0 returned 0% blocks executed 0%
    #####: 3459:static char * getVersion( char const * aExecutable ) /*version must be first numeral*/
        -: 3460:{
        -: 3461:		static char lBuff[MAX_PATH_OR_CMD] ;
        -: 3462:		char lTestedString[MAX_PATH_OR_CMD] ;
        -: 3463:		FILE * lIn ;
        -: 3464:		char * lTmp ;
        -: 3465:
    #####: 3466:	strcpy( lTestedString , aExecutable ) ;
    #####: 3467:	strcat( lTestedString , " --version" ) ;
        -: 3468:
    #####: 3469:	lIn = popen( lTestedString , "r" ) ;
    %%%%%: 3469-block 2
call    0 never executed
    #####: 3470:		lTmp = fgets( lBuff , sizeof( lBuff ) , lIn ) ;
call    0 never executed
    #####: 3471:		pclose( lIn ) ;
call    0 never executed
        -: 3472:
    #####: 3473:		lTmp += strcspn(lTmp,"0123456789");
        -: 3474:		 /* printf("lTmp:%s\n", lTmp); */
    #####: 3475:		return lTmp ;
        -: 3476:}
        -: 3477:
        -: 3478:
function getMajorMinorPatch called 0 returned 0% blocks executed 0%
    #####: 3479:static int * getMajorMinorPatch( char const * aExecutable )
        -: 3480:{
        -: 3481:		static int lArray[3] ;
        -: 3482:		char * lTmp ;
        -: 3483:
    #####: 3484:		lTmp = (char *) getVersion(aExecutable);
    %%%%%: 3484-block 2
call    0 never executed
    #####: 3485:		lArray[0] = atoi( strtok(lTmp," ,.-") ) ;
call    0 never executed
        -: 3486:		/* printf("lArray0 %d\n", lArray[0]); */
    #####: 3487:		lArray[1] = atoi( strtok(0," ,.-") ) ;
call    0 never executed
        -: 3488:		/* printf("lArray1 %d\n", lArray[1]); */
    #####: 3489:		lArray[2] = atoi( strtok(0," ,.-") ) ;
call    0 never executed
        -: 3490:		/* printf("lArray2 %d\n", lArray[2]); */
        -: 3491:
    #####: 3492:		if ( !lArray[0] && !lArray[1] && !lArray[2] ) return NULL;
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3492-block 7
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 3492-block 8
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 3492-block 9
    #####: 3493:		return lArray ;
    %%%%%: 3493-block 10
        -: 3494:}
        -: 3495:
        -: 3496:
function tryCommand called 0 returned 0% blocks executed 0%
    #####: 3497:static int tryCommand( char const * aCommand )
        -: 3498:{
        -: 3499:		char lBuff[MAX_PATH_OR_CMD] ;
        -: 3500:		FILE * lIn ;
        -: 3501:
    #####: 3502:		lIn = popen( aCommand , "r" ) ;
    %%%%%: 3502-block 2
call    0 never executed
    #####: 3503:		if ( fgets( lBuff , sizeof( lBuff ) , lIn ) == NULL )
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 3504:		{       /* present */
    #####: 3505:				pclose( lIn ) ;
    %%%%%: 3505-block 5
call    0 never executed
    #####: 3506:				return 1 ;
        -: 3507:		}
        -: 3508:		else
        -: 3509:		{
    #####: 3510:				pclose( lIn ) ;
    %%%%%: 3510-block 7
call    0 never executed
    #####: 3511:				return 0 ;
        -: 3512:		}
        -: 3513:
        -: 3514:}
        -: 3515:
        -: 3516:
function isTerminalRunning called 0 returned 0% blocks executed 0%
    #####: 3517:static int isTerminalRunning(void)
        -: 3518:{
        -: 3519:		static int lIsTerminalRunning = -1 ;
    #####: 3520:		if ( lIsTerminalRunning < 0 )
    %%%%%: 3520-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3521:		{
    #####: 3522:				lIsTerminalRunning = isatty(1);
    %%%%%: 3522-block 3
call    0 never executed
    #####: 3523:				if (tinyfd_verbose) printf("isTerminalRunning %d\n", lIsTerminalRunning );
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3523-block 5
call    2 never executed
        -: 3524:		}
    #####: 3525:		return lIsTerminalRunning;
    %%%%%: 3525-block 6
        -: 3526:}
        -: 3527:
        -: 3528:
function dialogNameOnly called 0 returned 0% blocks executed 0%
    #####: 3529:static char * dialogNameOnly(void)
        -: 3530:{
        -: 3531:		static char lDialogName[128] = "*" ;
    #####: 3532:		if ( lDialogName[0] == '*' )
    %%%%%: 3532-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3533:		{
    #####: 3534:				if (!tinyfd_allowCursesDialogs)
    %%%%%: 3534-block 3
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3535:				{
    #####: 3536:						strcpy(lDialogName , "" );
    %%%%%: 3536-block 4
        -: 3537:				}
    #####: 3538:				else if ( tfd_isDarwin() && * strcpy(lDialogName , "/opt/local/bin/dialog" )
    %%%%%: 3538-block 5
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 3538-block 7
branch  3 never executed (fallthrough)
branch  4 never executed
    #####: 3539:						&& detectPresence( lDialogName ) )
    %%%%%: 3539-block 8
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 3539-block 10
        -: 3540:				{}
    #####: 3541:				else if ( * strcpy(lDialogName , "dialog" )
    %%%%%: 3541-block 11
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 3542:						&& detectPresence( lDialogName ) )
    %%%%%: 3542-block 12
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 3542-block 14
        -: 3543:				{}
        -: 3544:				else
        -: 3545:				{
    #####: 3546:						strcpy(lDialogName , "" );
    %%%%%: 3546-block 15
        -: 3547:				}
        -: 3548:		}
    #####: 3549:		return lDialogName ;
    %%%%%: 3549-block 16
        -: 3550:}
        -: 3551:
        -: 3552:
function isDialogVersionBetter09b called 0 returned 0% blocks executed 0%
    #####: 3553:int isDialogVersionBetter09b(void)
        -: 3554:{
        -: 3555:		char const * lDialogName ;
        -: 3556:		char * lVersion ;
        -: 3557:		int lMajor ;
        -: 3558:		int lMinor ;
        -: 3559:		int lDate ;
        -: 3560:		int lResult ;
        -: 3561:		char * lMinorP ;
        -: 3562:		char * lLetter ;
        -: 3563:		char lBuff[128] ;
        -: 3564:
        -: 3565:		/*char lTest[128] = " 0.9b-20031126" ;*/
        -: 3566:
    #####: 3567:		lDialogName = dialogNameOnly() ;
    %%%%%: 3567-block 2
call    0 never executed
    #####: 3568:		if ( ! strlen(lDialogName) || !(lVersion = (char *) getVersion(lDialogName)) ) return 0 ;
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3568-block 4
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 3568-block 6
        -: 3569:		/*lVersion = lTest ;*/
        -: 3570:		/*printf("lVersion %s\n", lVersion);*/
    #####: 3571:		strcpy(lBuff,lVersion);
    #####: 3572:		lMajor = atoi( strtok(lVersion," ,.-") ) ;
    %%%%%: 3572-block 7
call    0 never executed
        -: 3573:		/*printf("lMajor %d\n", lMajor);*/
    #####: 3574:		lMinorP = strtok(0," ,.-abcdefghijklmnopqrstuvxyz");
call    0 never executed
    #####: 3575:		lMinor = atoi( lMinorP ) ;
        -: 3576:		/*printf("lMinor %d\n", lMinor );*/
    #####: 3577:		lDate = atoi( strtok(0," ,.-") ) ;
call    0 never executed
    #####: 3578:		if (lDate<0) lDate = - lDate;
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3578-block 11
        -: 3579:		/*printf("lDate %d\n", lDate);*/
    #####: 3580:		lLetter = lMinorP + strlen(lMinorP) ;
    #####: 3581:		strcpy(lVersion,lBuff);
    #####: 3582:		strtok(lLetter," ,.-");
    %%%%%: 3582-block 12
call    0 never executed
        -: 3583:		/*printf("lLetter %s\n", lLetter);*/
    #####: 3584:		lResult = (lMajor > 0) || ( ( lMinor == 9 ) && (*lLetter == 'b') && (lDate >= 20031126) );
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3584-block 14
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 3584-block 15
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 3584-block 16
branch  6 never executed (fallthrough)
branch  7 never executed
    %%%%%: 3584-block 17
    %%%%%: 3584-block 18
        -: 3585:		/*printf("lResult %d\n", lResult);*/
    #####: 3586:		return lResult;
    %%%%%: 3586-block 19
        -: 3587:}
        -: 3588:
        -: 3589:
function whiptailPresentOnly called 0 returned 0% blocks executed 0%
    #####: 3590:static int whiptailPresentOnly(void)
        -: 3591:{
        -: 3592:		static int lWhiptailPresent = -1 ;
    #####: 3593:				if (!tinyfd_allowCursesDialogs) return 0;
    %%%%%: 3593-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3593-block 3
    #####: 3594:		if ( lWhiptailPresent < 0 )
    %%%%%: 3594-block 4
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3595:		{
    #####: 3596:				lWhiptailPresent = detectPresence( "whiptail" ) ;
    %%%%%: 3596-block 5
call    0 never executed
        -: 3597:		}
    #####: 3598:		return lWhiptailPresent ;
    %%%%%: 3598-block 7
        -: 3599:}
        -: 3600:
        -: 3601:
function terminalName called 0 returned 0% blocks executed 0%
    #####: 3602:static char * terminalName(void)
        -: 3603:{
        -: 3604:		static char lTerminalName[128] = "*" ;
    #####: 3605:		char lShellName[64] = "*" ;
        -: 3606:		int * lArray;
        -: 3607:
    #####: 3608:		if ( lTerminalName[0] == '*' )
    %%%%%: 3608-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3609:		{
    #####: 3610:				if ( detectPresence( "bash" ) )
    %%%%%: 3610-block 3
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 3611:				{
    #####: 3612:						strcpy(lShellName , "bash -c " ) ; /*good for basic input*/
    %%%%%: 3612-block 5
        -: 3613:				}
    #####: 3614:								else if ( strlen(dialogNameOnly()) || whiptailPresentOnly() )
    %%%%%: 3614-block 6
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 3614-block 8
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 3615:								{
    #####: 3616:												strcpy(lShellName , "sh -c " ) ; /*good enough for dialog & whiptail*/
    %%%%%: 3616-block 10
        -: 3617:								}
        -: 3618:								else
        -: 3619:								{
    #####: 3620:										strcpy(lTerminalName , "" ) ;
    #####: 3621:										return NULL ;
    %%%%%: 3621-block 11
        -: 3622:								}
        -: 3623:
    #####: 3624:				if ( tfd_isDarwin() )
    %%%%%: 3624-block 12
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 3625:				{
    #####: 3626:										if ( * strcpy(lTerminalName , "/opt/X11/bin/xterm" )
    %%%%%: 3626-block 14
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 3627:					  && detectPresence( lTerminalName ) )
    %%%%%: 3627-block 15
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 3628:						{
    #####: 3629:								strcat(lTerminalName , " -fa 'DejaVu Sans Mono' -fs 10 -title tinyfiledialogs -e " ) ;
    #####: 3630:								strcat(lTerminalName , lShellName ) ;
    %%%%%: 3630-block 17
        -: 3631:						}
        -: 3632:						else
        -: 3633:						{
    #####: 3634:								strcpy(lTerminalName , "" ) ;
    %%%%%: 3634-block 18
        -: 3635:						}
        -: 3636:				}
    #####: 3637:				else if ( * strcpy(lTerminalName,"xterm") /*good (small without parameters)*/
    %%%%%: 3637-block 20
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 3638:						&& detectPresence(lTerminalName) )
    %%%%%: 3638-block 21
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 3639:				{
    #####: 3640:						strcat(lTerminalName , " -fa 'DejaVu Sans Mono' -fs 10 -title tinyfiledialogs -e " ) ;
    #####: 3641:						strcat(lTerminalName , lShellName ) ;
    %%%%%: 3641-block 23
        -: 3642:				}
    #####: 3643:				else if ( * strcpy(lTerminalName,"terminator") /*good*/
    %%%%%: 3643-block 24
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 3644:						  && detectPresence(lTerminalName) )
    %%%%%: 3644-block 25
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 3645:				{
    #####: 3646:						strcat(lTerminalName , " -x " ) ;
    #####: 3647:						strcat(lTerminalName , lShellName ) ;
    %%%%%: 3647-block 27
        -: 3648:				}
    #####: 3649:				else if ( * strcpy(lTerminalName,"lxterminal") /*good*/
    %%%%%: 3649-block 28
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 3650:						  && detectPresence(lTerminalName) )
    %%%%%: 3650-block 29
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 3651:				{
    #####: 3652:						strcat(lTerminalName , " -e " ) ;
    #####: 3653:						strcat(lTerminalName , lShellName ) ;
    %%%%%: 3653-block 31
        -: 3654:				}
    #####: 3655:				else if ( * strcpy(lTerminalName,"konsole") /*good*/
    %%%%%: 3655-block 32
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 3656:						  && detectPresence(lTerminalName) )
    %%%%%: 3656-block 33
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 3657:				{
    #####: 3658:						strcat(lTerminalName , " -e " ) ;
    #####: 3659:						strcat(lTerminalName , lShellName ) ;
    %%%%%: 3659-block 35
        -: 3660:				}
    #####: 3661:				else if ( * strcpy(lTerminalName,"kterm") /*good*/
    %%%%%: 3661-block 36
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 3662:						  && detectPresence(lTerminalName) )
    %%%%%: 3662-block 37
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 3663:				{
    #####: 3664:						strcat(lTerminalName , " -e " ) ;
    #####: 3665:						strcat(lTerminalName , lShellName ) ;
    %%%%%: 3665-block 39
        -: 3666:				}
    #####: 3667:				else if ( * strcpy(lTerminalName,"tilix") /*good*/
    %%%%%: 3667-block 40
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 3668:						  && detectPresence(lTerminalName) )
    %%%%%: 3668-block 41
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 3669:				{
    #####: 3670:						strcat(lTerminalName , " -e " ) ;
    #####: 3671:						strcat(lTerminalName , lShellName ) ;
    %%%%%: 3671-block 43
        -: 3672:				}
    #####: 3673:				else if ( * strcpy(lTerminalName,"xfce4-terminal") /*good*/
    %%%%%: 3673-block 44
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 3674:						  && detectPresence(lTerminalName) )
    %%%%%: 3674-block 45
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 3675:				{
    #####: 3676:						strcat(lTerminalName , " -x " ) ;
    #####: 3677:						strcat(lTerminalName , lShellName ) ;
    %%%%%: 3677-block 47
        -: 3678:				}
    #####: 3679:				else if ( * strcpy(lTerminalName,"mate-terminal") /*good*/
    %%%%%: 3679-block 48
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 3680:						  && detectPresence(lTerminalName) )
    %%%%%: 3680-block 49
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 3681:				{
    #####: 3682:						strcat(lTerminalName , " -x " ) ;
    #####: 3683:						strcat(lTerminalName , lShellName ) ;
    %%%%%: 3683-block 51
        -: 3684:				}
    #####: 3685:				else if ( * strcpy(lTerminalName,"Eterm") /*good*/
    %%%%%: 3685-block 52
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 3686:						  && detectPresence(lTerminalName) )
    %%%%%: 3686-block 53
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 3687:				{
    #####: 3688:						strcat(lTerminalName , " -e " ) ;
    #####: 3689:						strcat(lTerminalName , lShellName ) ;
    %%%%%: 3689-block 55
        -: 3690:				}
    #####: 3691:				else if ( * strcpy(lTerminalName,"evilvte") /*good*/
    %%%%%: 3691-block 56
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 3692:						  && detectPresence(lTerminalName) )
    %%%%%: 3692-block 57
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 3693:				{
    #####: 3694:						strcat(lTerminalName , " -e " ) ;
    #####: 3695:						strcat(lTerminalName , lShellName ) ;
    %%%%%: 3695-block 59
        -: 3696:				}
    #####: 3697:				else if ( * strcpy(lTerminalName,"pterm") /*good (only letters)*/
    %%%%%: 3697-block 60
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 3698:						  && detectPresence(lTerminalName) )
    %%%%%: 3698-block 61
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 3699:				{
    #####: 3700:						strcat(lTerminalName , " -e " ) ;
    #####: 3701:						strcat(lTerminalName , lShellName ) ;
    %%%%%: 3701-block 63
        -: 3702:				}
    #####: 3703:								else if ( * strcpy(lTerminalName,"gnome-terminal")
    %%%%%: 3703-block 64
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 3704:				&& detectPresence(lTerminalName) && (lArray = getMajorMinorPatch(lTerminalName))
    %%%%%: 3704-block 65
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 3704-block 67
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    #####: 3705:								&& ((lArray[0]<3) || (lArray[0]==3 && lArray[1]<=6)) )
    %%%%%: 3705-block 69
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3705-block 70
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 3705-block 71
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 3706:				{
    #####: 3707:						strcat(lTerminalName , " --disable-factory -x " ) ;
    #####: 3708:						strcat(lTerminalName , lShellName ) ;
    %%%%%: 3708-block 72
        -: 3709:				}
        -: 3710:				else
        -: 3711:				{
    #####: 3712:						strcpy(lTerminalName , "" ) ;
    %%%%%: 3712-block 73
        -: 3713:				}
        -: 3714:				/* bad: koi rxterm guake tilda vala-terminal qterminal kgx
        -: 3715:				aterm Terminal terminology sakura lilyterm weston-terminal
        -: 3716:				roxterm termit xvt rxvt mrxvt urxvt */
        -: 3717:		}
    #####: 3718:		if ( strlen(lTerminalName) )
    %%%%%: 3718-block 74
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3719:		{
    #####: 3720:				return lTerminalName ;
    %%%%%: 3720-block 75
        -: 3721:		}
        -: 3722:		else
        -: 3723:		{
    #####: 3724:				return NULL ;
    %%%%%: 3724-block 76
        -: 3725:		}
        -: 3726:}
        -: 3727:
        -: 3728:
function dialogName called 0 returned 0% blocks executed 0%
    #####: 3729:static char * dialogName(void)
        -: 3730:{
        -: 3731:	char * lDialogName ;
    #####: 3732:	lDialogName = dialogNameOnly( ) ;
    %%%%%: 3732-block 2
call    0 never executed
    #####: 3733:		if ( strlen(lDialogName) && ( isTerminalRunning() || terminalName() ) )
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3733-block 4
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 3733-block 6
call    5 never executed
branch  6 never executed (fallthrough)
branch  7 never executed
        -: 3734:		{
    #####: 3735:				return lDialogName ;
    %%%%%: 3735-block 8
        -: 3736:		}
        -: 3737:		else
        -: 3738:		{
    #####: 3739:				return NULL ;
    %%%%%: 3739-block 9
        -: 3740:		}
        -: 3741:}
        -: 3742:
        -: 3743:
function whiptailPresent called 0 returned 0% blocks executed 0%
    #####: 3744:static int whiptailPresent(void)
        -: 3745:{
        -: 3746:		int lWhiptailPresent ;
    #####: 3747:	lWhiptailPresent = whiptailPresentOnly( ) ;
    %%%%%: 3747-block 2
call    0 never executed
    #####: 3748:		if ( lWhiptailPresent && ( isTerminalRunning() || terminalName() ) )
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3748-block 4
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 3748-block 6
call    5 never executed
branch  6 never executed (fallthrough)
branch  7 never executed
        -: 3749:		{
    #####: 3750:				return lWhiptailPresent ;
    %%%%%: 3750-block 8
        -: 3751:		}
        -: 3752:		else
        -: 3753:		{
    #####: 3754:				return 0 ;
    %%%%%: 3754-block 9
        -: 3755:		}
        -: 3756:}
        -: 3757:
        -: 3758:
        -: 3759:
function graphicMode called 0 returned 0% blocks executed 0%
    #####: 3760:static int graphicMode(void)
        -: 3761:{
    #####: 3762:		return !( tinyfd_forceConsole && (isTerminalRunning() || terminalName()) )
    %%%%%: 3762-block 3
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 3762-block 5
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    #####: 3763:						&& ( getenvDISPLAY()
    %%%%%: 3763-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3763-block 7
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 3763-block 15
    %%%%%: 3763-block 16
    %%%%%: 3763-block 17
    #####: 3764:						|| (tfd_isDarwin() && (!getenv("SSH_TTY") || getenvDISPLAY() ) ) ) ;
    %%%%%: 3764-block 9
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 3764-block 11
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 3764-block 13
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
        -: 3765:}
        -: 3766:
        -: 3767:
function ffplayPresent called 0 returned 0% blocks executed 0%
    #####: 3768:static int ffplayPresent(void)
        -: 3769:{
        -: 3770:   static int lFFplayPresent = -1;
    #####: 3771:   if (lFFplayPresent < 0)
    %%%%%: 3771-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3772:   {
    #####: 3773:	  lFFplayPresent = detectPresence("ffplay");
    %%%%%: 3773-block 3
call    0 never executed
        -: 3774:   }
    #####: 3775:   return lFFplayPresent;
    %%%%%: 3775-block 5
        -: 3776:}
        -: 3777:
        -: 3778:
function pactlPresent called 0 returned 0% blocks executed 0%
    #####: 3779:static int pactlPresent( void )
        -: 3780:{
        -: 3781:	static int lPactlPresent = -1 ;
        -: 3782:	char lBuff [256] ;
        -: 3783:	FILE * lIn ;
        -: 3784:
    #####: 3785:	if ( lPactlPresent < 0 )
    %%%%%: 3785-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3786:	{
    #####: 3787:		lPactlPresent = detectPresence("pactl") ;
    %%%%%: 3787-block 3
call    0 never executed
    #####: 3788:		if ( lPactlPresent )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3789:		{
    #####: 3790:			lIn = popen( "pactl info | grep -iF pulseaudio" , "r" ) ;
    %%%%%: 3790-block 5
call    0 never executed
    #####: 3791:			if ( ! (fgets( lBuff , sizeof( lBuff ) , lIn ) && ! strstr(lBuff, "PipeWire") ) )
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 3791-block 8
branch  3 never executed (fallthrough)
branch  4 never executed
        -: 3792:			{
    #####: 3793:				lPactlPresent = 0 ;
    %%%%%: 3793-block 9
        -: 3794:			}
    #####: 3795:			pclose( lIn ) ;
    %%%%%: 3795-block 10
call    0 never executed
    #####: 3796:			if (tinyfd_verbose) printf("is pactl valid ? %d\n", lPactlPresent);
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3796-block 12
call    2 never executed
        -: 3797:		}
        -: 3798:	}
    #####: 3799:	return lPactlPresent ;
    %%%%%: 3799-block 13
        -: 3800:}
        -: 3801:
        -: 3802:
function speakertestPresent called 0 returned 0% blocks executed 0%
    #####: 3803:static int speakertestPresent(void)
        -: 3804:{
        -: 3805:		static int lSpeakertestPresent = -1 ;
    #####: 3806:		if ( lSpeakertestPresent < 0 )
    %%%%%: 3806-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3807:		{
    #####: 3808:				lSpeakertestPresent = detectPresence("speaker-test") ;
    %%%%%: 3808-block 3
call    0 never executed
        -: 3809:		}
    #####: 3810:		return lSpeakertestPresent ;
    %%%%%: 3810-block 5
        -: 3811:}
        -: 3812:
        -: 3813:
function playPresent called 0 returned 0% blocks executed 0%
    #####: 3814:static int playPresent(void) /* play is part of sox */
        -: 3815:{
        -: 3816:   static int lPlayPresent = -1;
    #####: 3817:   if (lPlayPresent < 0)
    %%%%%: 3817-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3818:   {
    #####: 3819:	  lPlayPresent = detectPresence("sox"); /*if sox is present, play is ready*/
    %%%%%: 3819-block 3
call    0 never executed
        -: 3820:   }
    #####: 3821:   return lPlayPresent;
    %%%%%: 3821-block 5
        -: 3822:}
        -: 3823:
        -: 3824:
function beepexePresent called 0 returned 0% blocks executed 0%
    #####: 3825:static int beepexePresent(void)
        -: 3826:{
        -: 3827:   static int lBeepexePresent = -1;
    #####: 3828:   if (lBeepexePresent < 0)
    %%%%%: 3828-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3829:   {
    #####: 3830:	  lBeepexePresent = detectPresence("beep.exe");
    %%%%%: 3830-block 3
call    0 never executed
        -: 3831:   }
    #####: 3832:   return lBeepexePresent;
    %%%%%: 3832-block 5
        -: 3833:}
        -: 3834:
        -: 3835:
        -: 3836:/*static int beepPresent(void)
        -: 3837:{
        -: 3838:		static int lBeepPresent = -1 ;
        -: 3839:		if ( lBeepPresent < 0 )
        -: 3840:		{
        -: 3841:				lBeepPresent = detectPresence("beep") ;
        -: 3842:		}
        -: 3843:		return lBeepPresent ;
        -: 3844:}*/
        -: 3845:
        -: 3846:
function playsoundPresent called 0 returned 0% blocks executed 0%
    #####: 3847:static int playsoundPresent(void) /* playsound is part of pipewire */
        -: 3848:{
        -: 3849:    static int lPlaysoundPresent = -1 ;
    #####: 3850:    if (lPlaysoundPresent < 0)
    %%%%%: 3850-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3851:    {
    #####: 3852:        lPlaysoundPresent = detectPresence("playsound_simple");
    %%%%%: 3852-block 3
call    0 never executed
    #####: 3853:        if ( lPlaysoundPresent && ! fileExists("/usr/share/sounds/freedesktop/stereo/bell.oga") )
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3853-block 5
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
        -: 3854:        {
    #####: 3855:            lPlaysoundPresent = 0 ;
    %%%%%: 3855-block 7
        -: 3856:        }
        -: 3857:    }
    #####: 3858:    return lPlaysoundPresent;
    %%%%%: 3858-block 8
        -: 3859:}
        -: 3860:
        -: 3861:
function paplayPresent called 0 returned 0% blocks executed 0%
    #####: 3862:static int paplayPresent(void) /* playsound is part of pipewire */
        -: 3863:{
        -: 3864:    static int lPaplayPresent = -1 ;
    #####: 3865:    if (lPaplayPresent < 0)
    %%%%%: 3865-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3866:    {
    #####: 3867:        lPaplayPresent = detectPresence("paplay");
    %%%%%: 3867-block 3
call    0 never executed
    #####: 3868:        if ( lPaplayPresent && ! fileExists("/usr/share/sounds/freedesktop/stereo/bell.oga") )
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3868-block 5
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
        -: 3869:        {
    #####: 3870:            lPaplayPresent = 0 ;
    %%%%%: 3870-block 7
        -: 3871:        }
        -: 3872:    }
    #####: 3873:    return lPaplayPresent;
    %%%%%: 3873-block 8
        -: 3874:}
        -: 3875:
        -: 3876:
function xmessagePresent called 0 returned 0% blocks executed 0%
    #####: 3877:static int xmessagePresent(void)
        -: 3878:{
        -: 3879:		static int lXmessagePresent = -1 ;
    #####: 3880:		if ( lXmessagePresent < 0 )
    %%%%%: 3880-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3881:		{
    #####: 3882:				lXmessagePresent = detectPresence("xmessage");/*if not tty,not on osxpath*/
    %%%%%: 3882-block 3
call    0 never executed
        -: 3883:		}
    #####: 3884:		return lXmessagePresent && graphicMode( ) ;
    %%%%%: 3884-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3884-block 6
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 3884-block 8
    %%%%%: 3884-block 9
    %%%%%: 3884-block 10
        -: 3885:}
        -: 3886:
        -: 3887:
function gxmessagePresent called 0 returned 0% blocks executed 0%
    #####: 3888:static int gxmessagePresent(void)
        -: 3889:{
        -: 3890:	static int lGxmessagePresent = -1 ;
    #####: 3891:	if ( lGxmessagePresent < 0 )
    %%%%%: 3891-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3892:	{
    #####: 3893:		lGxmessagePresent = detectPresence("gxmessage") ;
    %%%%%: 3893-block 3
call    0 never executed
        -: 3894:	}
    #####: 3895:	return lGxmessagePresent && graphicMode( ) ;
    %%%%%: 3895-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3895-block 6
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 3895-block 8
    %%%%%: 3895-block 9
    %%%%%: 3895-block 10
        -: 3896:}
        -: 3897:
        -: 3898:
function gmessagePresent called 0 returned 0% blocks executed 0%
    #####: 3899:static int gmessagePresent(void)
        -: 3900:{
        -: 3901:		static int lGmessagePresent = -1 ;
    #####: 3902:		if ( lGmessagePresent < 0 )
    %%%%%: 3902-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3903:		{
    #####: 3904:				lGmessagePresent = detectPresence("gmessage") ;
    %%%%%: 3904-block 3
call    0 never executed
        -: 3905:		}
    #####: 3906:		return lGmessagePresent && graphicMode( ) ;
    %%%%%: 3906-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3906-block 6
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 3906-block 8
    %%%%%: 3906-block 9
    %%%%%: 3906-block 10
        -: 3907:}
        -: 3908:
        -: 3909:
function notifysendPresent called 0 returned 0% blocks executed 0%
    #####: 3910:static int notifysendPresent(void)
        -: 3911:{
        -: 3912:	static int lNotifysendPresent = -1 ;
    #####: 3913:	if ( lNotifysendPresent < 0 )
    %%%%%: 3913-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3914:	{
    #####: 3915:		lNotifysendPresent = detectPresence("notify-send") ;
    %%%%%: 3915-block 3
call    0 never executed
        -: 3916:	}
    #####: 3917:	return lNotifysendPresent && graphicMode( ) ;
    %%%%%: 3917-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3917-block 6
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 3917-block 8
    %%%%%: 3917-block 9
    %%%%%: 3917-block 10
        -: 3918:}
        -: 3919:
        -: 3920:
function perlPresent called 0 returned 0% blocks executed 0%
    #####: 3921:static int perlPresent(void)
        -: 3922:{
        -: 3923:   static int lPerlPresent = -1 ;
        -: 3924:   char lBuff[MAX_PATH_OR_CMD] ;
        -: 3925:   FILE * lIn ;
        -: 3926:
    #####: 3927:   if ( lPerlPresent < 0 )
    %%%%%: 3927-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3928:   {
    #####: 3929:	  lPerlPresent = detectPresence("perl") ;
    %%%%%: 3929-block 3
call    0 never executed
    #####: 3930:	  if (lPerlPresent)
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3931:	  {
    #####: 3932:		 lIn = popen("perl -MNet::DBus -e \"Net::DBus->session->get_service('org.freedesktop.Notifications')\" 2>&1", "r");
    %%%%%: 3932-block 5
call    0 never executed
    #####: 3933:		 if (fgets(lBuff, sizeof(lBuff), lIn) == NULL)
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 3934:		 {
    #####: 3935:			lPerlPresent = 2;
    %%%%%: 3935-block 8
        -: 3936:		 }
    #####: 3937:		 pclose(lIn);
    %%%%%: 3937-block 9
call    0 never executed
    #####: 3938:		 if (tinyfd_verbose) printf("perl-dbus %d\n", lPerlPresent);
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3938-block 11
call    2 never executed
        -: 3939:	  }
        -: 3940:   }
    #####: 3941:   return graphicMode() ? lPerlPresent : 0 ;
    %%%%%: 3941-block 12
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 3941-block 14
    %%%%%: 3941-block 15
    %%%%%: 3941-block 16
        -: 3942:}
        -: 3943:
        -: 3944:
function afplayPresent called 0 returned 0% blocks executed 0%
    #####: 3945:static int afplayPresent(void)
        -: 3946:{
        -: 3947:		static int lAfplayPresent = -1 ;
        -: 3948:		char lBuff[MAX_PATH_OR_CMD] ;
        -: 3949:		FILE * lIn ;
        -: 3950:
    #####: 3951:		if ( lAfplayPresent < 0 )
    %%%%%: 3951-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3952:		{
    #####: 3953:				lAfplayPresent = detectPresence("afplay") ;
    %%%%%: 3953-block 3
call    0 never executed
    #####: 3954:				if ( lAfplayPresent )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3955:				{
    #####: 3956:						lIn = popen( "test -e /System/Library/Sounds/Ping.aiff || echo Ping" , "r" ) ;
    %%%%%: 3956-block 5
call    0 never executed
    #####: 3957:						if ( fgets( lBuff , sizeof( lBuff ) , lIn ) == NULL )
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 3958:						{
    #####: 3959:								lAfplayPresent = 2 ;
    %%%%%: 3959-block 8
        -: 3960:						}
    #####: 3961:						pclose( lIn ) ;
    %%%%%: 3961-block 9
call    0 never executed
    #####: 3962:						if (tinyfd_verbose) printf("afplay %d\n", lAfplayPresent);
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3962-block 11
call    2 never executed
        -: 3963:				}
        -: 3964:		}
    #####: 3965:		return graphicMode() ? lAfplayPresent : 0 ;
    %%%%%: 3965-block 12
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 3965-block 14
    %%%%%: 3965-block 15
    %%%%%: 3965-block 16
        -: 3966:}
        -: 3967:
        -: 3968:
function xdialogPresent called 0 returned 0% blocks executed 0%
    #####: 3969:static int xdialogPresent(void)
        -: 3970:{
        -: 3971:	static int lXdialogPresent = -1 ;
    #####: 3972:	if ( lXdialogPresent < 0 )
    %%%%%: 3972-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3973:	{
    #####: 3974:		lXdialogPresent = detectPresence("Xdialog") ;
    %%%%%: 3974-block 3
call    0 never executed
        -: 3975:	}
    #####: 3976:	return lXdialogPresent && graphicMode( ) ;
    %%%%%: 3976-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3976-block 6
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 3976-block 8
    %%%%%: 3976-block 9
    %%%%%: 3976-block 10
        -: 3977:}
        -: 3978:
        -: 3979:
function gdialogPresent called 0 returned 0% blocks executed 0%
    #####: 3980:static int gdialogPresent(void)
        -: 3981:{
        -: 3982:	static int lGdialoglPresent = -1 ;
    #####: 3983:	if ( lGdialoglPresent < 0 )
    %%%%%: 3983-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3984:	{
    #####: 3985:		lGdialoglPresent = detectPresence( "gdialog" ) ;
    %%%%%: 3985-block 3
call    0 never executed
        -: 3986:	}
    #####: 3987:	return lGdialoglPresent && graphicMode( ) ;
    %%%%%: 3987-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3987-block 6
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 3987-block 8
    %%%%%: 3987-block 9
    %%%%%: 3987-block 10
        -: 3988:}
        -: 3989:
        -: 3990:
function osascriptPresent called 0 returned 0% blocks executed 0%
    #####: 3991:static int osascriptPresent(void)
        -: 3992:{
        -: 3993:	static int lOsascriptPresent = -1 ;
    #####: 3994:	if ( lOsascriptPresent < 0 )
    %%%%%: 3994-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 3995:	{
    #####: 3996:				gWarningDisplayed |= !!getenv("SSH_TTY");
    %%%%%: 3996-block 3
call    0 never executed
    #####: 3997:				lOsascriptPresent = detectPresence( "osascript" ) ;
call    0 never executed
        -: 3998:	}
    #####: 3999:		return lOsascriptPresent && graphicMode() && !getenv("SSH_TTY") ;
    %%%%%: 3999-block 6
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 3999-block 7
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 3999-block 9
call    5 never executed
branch  6 never executed (fallthrough)
branch  7 never executed
    %%%%%: 3999-block 11
    %%%%%: 3999-block 12
    %%%%%: 3999-block 13
        -: 4000:}
        -: 4001:
        -: 4002:
function dunstifyPresent called 0 returned 0% blocks executed 0%
    #####: 4003:static int dunstifyPresent(void)
        -: 4004:{
        -: 4005:	static int lDunstifyPresent = -1 ;
        -: 4006:		static char lBuff[MAX_PATH_OR_CMD] ;
        -: 4007:		FILE * lIn ;
        -: 4008:		char * lTmp ;
        -: 4009:
    #####: 4010:	if ( lDunstifyPresent < 0 )
    %%%%%: 4010-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4011:	{
    #####: 4012:		lDunstifyPresent = detectPresence( "dunstify" ) ;
    %%%%%: 4012-block 3
call    0 never executed
    #####: 4013:		if ( lDunstifyPresent )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4014:		{
    #####: 4015:			lIn = popen( "dunstify -s" , "r" ) ;
    %%%%%: 4015-block 5
call    0 never executed
    #####: 4016:			lTmp = fgets( lBuff , sizeof( lBuff ) , lIn ) ;
call    0 never executed
    #####: 4017:			pclose( lIn ) ;
call    0 never executed
        -: 4018:			/* printf("lTmp:%s\n", lTmp); */
    #####: 4019:			lDunstifyPresent = strstr(lTmp,"name:dunst\n") ? 1 : 0 ;
    #####: 4020:			if (tinyfd_verbose) printf("lDunstifyPresent %d\n", lDunstifyPresent);
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4020-block 9
call    2 never executed
        -: 4021:		}
        -: 4022:	}
    #####: 4023:	return lDunstifyPresent && graphicMode( ) ;
    %%%%%: 4023-block 10
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4023-block 11
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 4023-block 13
    %%%%%: 4023-block 14
    %%%%%: 4023-block 15
        -: 4024:}
        -: 4025:
        -: 4026:
function dunstPresent called 0 returned 0% blocks executed 0%
    #####: 4027:static int dunstPresent(void)
        -: 4028:{
        -: 4029:	static int lDunstPresent = -1 ;
        -: 4030:		static char lBuff[MAX_PATH_OR_CMD] ;
        -: 4031:		FILE * lIn ;
        -: 4032:		char * lTmp ;
        -: 4033:
    #####: 4034:	if ( lDunstPresent < 0 )
    %%%%%: 4034-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4035:	{
    #####: 4036:		lDunstPresent = detectPresence( "dunst" ) ;
    %%%%%: 4036-block 3
call    0 never executed
    #####: 4037:		if ( lDunstPresent )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4038:		{
    #####: 4039:			lIn = popen( "ps -e | grep dunst | grep -v grep" , "r" ) ; /* add "| wc -l" to receive the number of lines */
    %%%%%: 4039-block 5
call    0 never executed
    #####: 4040:			lTmp = fgets( lBuff , sizeof( lBuff ) , lIn ) ;
call    0 never executed
    #####: 4041:			pclose( lIn ) ;
call    0 never executed
        -: 4042:			/* if ( lTmp ) printf("lTmp:%s\n", lTmp); */
    #####: 4043:			if ( lTmp ) lDunstPresent = 1 ;
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4043-block 9
    #####: 4044:			else lDunstPresent = 0 ;
    %%%%%: 4044-block 10
    #####: 4045:			if (tinyfd_verbose) printf("lDunstPresent %d\n", lDunstPresent);
    %%%%%: 4045-block 11
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4045-block 12
call    2 never executed
        -: 4046:		}
        -: 4047:	}
    #####: 4048:	return lDunstPresent && graphicMode( ) ;
    %%%%%: 4048-block 13
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4048-block 14
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 4048-block 16
    %%%%%: 4048-block 17
    %%%%%: 4048-block 18
        -: 4049:}
        -: 4050:
        -: 4051:
function tfd_qarmaPresent called 0 returned 0% blocks executed 0%
    #####: 4052:int tfd_qarmaPresent(void)
        -: 4053:{
        -: 4054:		static int lQarmaPresent = -1 ;
    #####: 4055:		if ( lQarmaPresent < 0 )
    %%%%%: 4055-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4056:		{
    #####: 4057:				lQarmaPresent = detectPresence("qarma") ;
    %%%%%: 4057-block 3
call    0 never executed
        -: 4058:		}
    #####: 4059:		return lQarmaPresent && graphicMode( ) ;
    %%%%%: 4059-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4059-block 6
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 4059-block 8
    %%%%%: 4059-block 9
    %%%%%: 4059-block 10
        -: 4060:}
        -: 4061:
        -: 4062:
function tfd_matedialogPresent called 0 returned 0% blocks executed 0%
    #####: 4063:int tfd_matedialogPresent(void)
        -: 4064:{
        -: 4065:		static int lMatedialogPresent = -1 ;
    #####: 4066:		if ( lMatedialogPresent < 0 )
    %%%%%: 4066-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4067:		{
    #####: 4068:				lMatedialogPresent = detectPresence("matedialog") ;
    %%%%%: 4068-block 3
call    0 never executed
        -: 4069:		}
    #####: 4070:		return lMatedialogPresent && graphicMode( ) ;
    %%%%%: 4070-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4070-block 6
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 4070-block 8
    %%%%%: 4070-block 9
    %%%%%: 4070-block 10
        -: 4071:}
        -: 4072:
        -: 4073:
function tfd_shellementaryPresent called 0 returned 0% blocks executed 0%
    #####: 4074:int tfd_shellementaryPresent(void)
        -: 4075:{
        -: 4076:		static int lShellementaryPresent = -1 ;
    #####: 4077:		if ( lShellementaryPresent < 0 )
    %%%%%: 4077-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4078:		{
    #####: 4079:				lShellementaryPresent = 0 ; /*detectPresence("shellementary"); shellementary is not ready yet */
    %%%%%: 4079-block 3
        -: 4080:		}
    #####: 4081:		return lShellementaryPresent && graphicMode( ) ;
    %%%%%: 4081-block 4
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4081-block 5
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 4081-block 7
    %%%%%: 4081-block 8
    %%%%%: 4081-block 9
        -: 4082:}
        -: 4083:
        -: 4084:
function tfd_xpropPresent called 0 returned 0% blocks executed 0%
    #####: 4085:int tfd_xpropPresent(void)
        -: 4086:{
        -: 4087:	static int lXpropReady = 0 ;
        -: 4088:	static int lXpropDetected = -1 ;
        -: 4089:	char lBuff[MAX_PATH_OR_CMD] ;
        -: 4090:	FILE * lIn ;
        -: 4091:
    #####: 4092:	if ( lXpropDetected < 0 )
    %%%%%: 4092-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4093:	{
    #####: 4094:		lXpropDetected = detectPresence("xprop") ;
    %%%%%: 4094-block 3
call    0 never executed
        -: 4095:	}
        -: 4096:
    #####: 4097:	if ( !lXpropReady && lXpropDetected )
    %%%%%: 4097-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4097-block 6
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4098:	{	/* xwayland Debian issue reported by Kay F. Jahnke and solved with his help */
    #####: 4099:		lIn = popen( "xprop -root 32x '	$0' _NET_ACTIVE_WINDOW" , "r" ) ;
    %%%%%: 4099-block 7
call    0 never executed
    #####: 4100:		if ( fgets( lBuff , sizeof( lBuff ) , lIn ) != NULL )
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4101:		{
    #####: 4102:			if ( ! strstr( lBuff , "not found" ) )
    %%%%%: 4102-block 10
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4103:			{
    #####: 4104:				if (tinyfd_verbose) printf("xprop is ready\n");
    %%%%%: 4104-block 11
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4104-block 12
call    2 never executed
    #####: 4105:				lXpropReady = 1 ;
    %%%%%: 4105-block 13
        -: 4106:			}
        -: 4107:		}
    #####: 4108:		pclose( lIn ) ;
    %%%%%: 4108-block 14
call    0 never executed
        -: 4109:	}
    #####: 4110:	return graphicMode() ? lXpropReady : 0 ;
    %%%%%: 4110-block 15
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 4110-block 17
    %%%%%: 4110-block 18
    %%%%%: 4110-block 19
        -: 4111:}
        -: 4112:
        -: 4113:
function tfd_zenityPresent called 0 returned 0% blocks executed 0%
    #####: 4114:int tfd_zenityPresent(void)
        -: 4115:{
        -: 4116:		static int lZenityPresent = -1 ;
    #####: 4117:		if ( lZenityPresent < 0 )
    %%%%%: 4117-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4118:		{
    #####: 4119:				lZenityPresent = detectPresence("zenity") ;
    %%%%%: 4119-block 3
call    0 never executed
        -: 4120:		}
    #####: 4121:		return lZenityPresent && graphicMode( ) ;
    %%%%%: 4121-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4121-block 6
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 4121-block 8
    %%%%%: 4121-block 9
    %%%%%: 4121-block 10
        -: 4122:}
        -: 4123:
        -: 4124:
function tfd_yadPresent called 0 returned 0% blocks executed 0%
    #####: 4125:int tfd_yadPresent(void)
        -: 4126:{
        -: 4127:   static int lYadPresent = -1;
    #####: 4128:   if (lYadPresent < 0)
    %%%%%: 4128-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4129:   {
    #####: 4130:	  lYadPresent = detectPresence("yad");
    %%%%%: 4130-block 3
call    0 never executed
        -: 4131:   }
    #####: 4132:   return lYadPresent && graphicMode();
    %%%%%: 4132-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4132-block 6
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 4132-block 8
    %%%%%: 4132-block 9
    %%%%%: 4132-block 10
        -: 4133:}
        -: 4134:
        -: 4135:
function tfd_zenity3Present called 0 returned 0% blocks executed 0%
    #####: 4136:int tfd_zenity3Present(void)
        -: 4137:{
        -: 4138:		static int lZenity3Present = -1 ;
        -: 4139:		char lBuff[MAX_PATH_OR_CMD] ;
        -: 4140:		FILE * lIn ;
        -: 4141:				int lIntTmp ;
        -: 4142:
    #####: 4143:		if ( lZenity3Present < 0 )
    %%%%%: 4143-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4144:		{
    #####: 4145:				lZenity3Present = 0 ;
    #####: 4146:				if ( tfd_zenityPresent() )
    %%%%%: 4146-block 3
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4147:				{
    #####: 4148:						lIn = popen( "zenity --version" , "r" ) ;
    %%%%%: 4148-block 5
call    0 never executed
    #####: 4149:						if ( fgets( lBuff , sizeof( lBuff ) , lIn ) != NULL )
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4150:						{
    #####: 4151:								if ( atoi(lBuff) >= 3 )
    %%%%%: 4151-block 8
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4152:								{
    #####: 4153:									lZenity3Present = 3 ;
    #####: 4154:									lIntTmp = atoi(strtok(lBuff,".")+2 ) ;
    %%%%%: 4154-block 9
call    0 never executed
    #####: 4155:									if ( lIntTmp >= 18 )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4156:									{
    #####: 4157:											lZenity3Present = 5 ;
    %%%%%: 4157-block 11
        -: 4158:									}
    #####: 4159:									else if ( lIntTmp >= 10 )
    %%%%%: 4159-block 12
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4160:									{
    #####: 4161:											lZenity3Present = 4 ;
    %%%%%: 4161-block 13
        -: 4162:									}
        -: 4163:																}
    #####: 4164:								else if ( ( atoi(lBuff) == 2 ) && ( atoi(strtok(lBuff,".")+2 ) >= 32 ) )
    %%%%%: 4164-block 14
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4164-block 15
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
        -: 4165:								{
    #####: 4166:										lZenity3Present = 2 ;
    %%%%%: 4166-block 17
        -: 4167:								}
    #####: 4168:								if (tinyfd_verbose) printf("zenity type %d\n", lZenity3Present);
    %%%%%: 4168-block 18
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4168-block 19
call    2 never executed
        -: 4169:						}
    #####: 4170:						pclose( lIn ) ;
    %%%%%: 4170-block 20
call    0 never executed
        -: 4171:				}
        -: 4172:		}
    #####: 4173:		return graphicMode() ? lZenity3Present : 0 ;
    %%%%%: 4173-block 21
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 4173-block 23
    %%%%%: 4173-block 24
    %%%%%: 4173-block 25
        -: 4174:}
        -: 4175:
        -: 4176:
function tfd_kdialogPresent called 0 returned 0% blocks executed 0%
    #####: 4177:int tfd_kdialogPresent(void)
        -: 4178:{
        -: 4179:    static int lKdialogPresent = -1 ;
        -: 4180:    char lBuff[MAX_PATH_OR_CMD] ;
        -: 4181:    FILE * lIn ;
        -: 4182:    char * lDesktop;
        -: 4183:
    #####: 4184:    if ( lKdialogPresent < 0 )
    %%%%%: 4184-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4185:    {
    #####: 4186:        lDesktop = getenv("XDG_SESSION_DESKTOP");
    %%%%%: 4186-block 3
call    0 never executed
    #####: 4187:        if ( !lDesktop  || ( strcmp(lDesktop, "KDE") && strcmp(lDesktop, "lxqt") ) )
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4187-block 5
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 4187-block 6
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 4188:        {
    #####: 4189:            if ( tfd_zenityPresent() )
    %%%%%: 4189-block 7
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4190:            {
    #####: 4191:                lKdialogPresent = 0 ;
    #####: 4192:                return lKdialogPresent ;
    %%%%%: 4192-block 9
        -: 4193:            }
        -: 4194:        }
        -: 4195:
    #####: 4196:        lKdialogPresent = detectPresence("kdialog") ;
    %%%%%: 4196-block 10
call    0 never executed
    #####: 4197:        if ( lKdialogPresent && !getenv("SSH_TTY") )
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4197-block 12
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
        -: 4198:        {
    #####: 4199:            lIn = popen( "kdialog --attach 2>&1" , "r" ) ;
    %%%%%: 4199-block 14
call    0 never executed
    #####: 4200:            if ( fgets( lBuff , sizeof( lBuff ) , lIn ) != NULL )
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4201:            {
    #####: 4202:                if ( ! strstr( "Unknown" , lBuff ) )
    %%%%%: 4202-block 17
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4203:                {
    #####: 4204:                    lKdialogPresent = 2 ;
    #####: 4205:                    if (tinyfd_verbose) printf("kdialog-attach %d\n", lKdialogPresent);
    %%%%%: 4205-block 18
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4205-block 19
call    2 never executed
        -: 4206:                }
        -: 4207:            }
    #####: 4208:            pclose( lIn ) ;
    %%%%%: 4208-block 20
call    0 never executed
        -: 4209:
    #####: 4210:            if (lKdialogPresent == 2)
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4211:            {
    #####: 4212:                lKdialogPresent = 1 ;
    #####: 4213:                lIn = popen( "kdialog --passivepopup 2>&1" , "r" ) ;
    %%%%%: 4213-block 22
call    0 never executed
    #####: 4214:                if ( fgets( lBuff , sizeof( lBuff ) , lIn ) != NULL )
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4215:                {
    #####: 4216:                    if ( ! strstr( "Unknown" , lBuff ) )
    %%%%%: 4216-block 25
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4217:                    {
    #####: 4218:                        lKdialogPresent = 2 ;
    #####: 4219:                        if (tinyfd_verbose) printf("kdialog-popup %d\n", lKdialogPresent);
    %%%%%: 4219-block 26
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4219-block 27
call    2 never executed
        -: 4220:                    }
        -: 4221:                }
    #####: 4222:                pclose( lIn ) ;
    %%%%%: 4222-block 28
call    0 never executed
        -: 4223:            }
        -: 4224:        }
        -: 4225:    }
    #####: 4226:    return graphicMode() ? lKdialogPresent : 0 ;
    %%%%%: 4226-block 29
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 4226-block 31
    %%%%%: 4226-block 32
    %%%%%: 4226-block 33
        -: 4227:}
        -: 4228:
        -: 4229:
function osx9orBetter called 0 returned 0% blocks executed 0%
    #####: 4230:static int osx9orBetter(void)
        -: 4231:{
        -: 4232:		static int lOsx9orBetter = -1 ;
        -: 4233:		char lBuff[MAX_PATH_OR_CMD] ;
        -: 4234:		FILE * lIn ;
        -: 4235:		int V,v;
        -: 4236:
    #####: 4237:		if ( lOsx9orBetter < 0 )
    %%%%%: 4237-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4238:		{
    #####: 4239:				lOsx9orBetter = 0 ;
    #####: 4240:				lIn = popen( "osascript -e 'set osver to system version of (system info)'" , "r" ) ;
    %%%%%: 4240-block 3
call    0 never executed
    #####: 4241:				V = 0 ;
    #####: 4242:				if ( ( fgets( lBuff , sizeof( lBuff ) , lIn ) != NULL )
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    #####: 4243:						&& ( 2 == sscanf(lBuff, "%d.%d", &V, &v) ) )
    %%%%%: 4243-block 6
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4244:				{
    #####: 4245:						V = V * 100 + v;
    #####: 4246:						if ( V >= 1009 )
    %%%%%: 4246-block 7
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4247:						{
    #####: 4248:								lOsx9orBetter = 1 ;
    %%%%%: 4248-block 8
        -: 4249:						}
        -: 4250:				}
    #####: 4251:				pclose( lIn ) ;
    %%%%%: 4251-block 9
call    0 never executed
    #####: 4252:				if (tinyfd_verbose) printf("Osx10 = %d, %d = %s\n", lOsx9orBetter, V, lBuff) ;
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4252-block 11
call    2 never executed
        -: 4253:		}
    #####: 4254:		return lOsx9orBetter ;
    %%%%%: 4254-block 12
        -: 4255:}
        -: 4256:
        -: 4257:
function python3Present called 0 returned 0% blocks executed 0%
    #####: 4258:static int python3Present(void)
        -: 4259:{
        -: 4260:		static int lPython3Present = -1 ;
        -: 4261:
    #####: 4262:		if ( lPython3Present < 0 )
    %%%%%: 4262-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4263:		{
    #####: 4264:				lPython3Present = 0 ;
    #####: 4265:				strcpy(gPython3Name , "python3" ) ;
    #####: 4266:				if ( detectPresence(gPython3Name) ) lPython3Present = 1;
    %%%%%: 4266-block 3
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 4266-block 5
    #####: 4267:				if (tinyfd_verbose) printf("lPython3Present %d\n", lPython3Present) ;
    %%%%%: 4267-block 6
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4267-block 7
call    2 never executed
    #####: 4268:				if (tinyfd_verbose) printf("gPython3Name %s\n", gPython3Name) ;
    %%%%%: 4268-block 8
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4268-block 9
call    2 never executed
        -: 4269:		}
    #####: 4270:				return lPython3Present ;
    %%%%%: 4270-block 10
        -: 4271:}
        -: 4272:
        -: 4273:
function python2Present called 0 returned 0% blocks executed 0%
    #####: 4274:static int python2Present(void)
        -: 4275:{
        -: 4276:		static int lPython2Present = -1 ;
        -: 4277:
    #####: 4278:		if ( lPython2Present < 0 )
    %%%%%: 4278-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4279:		{
    #####: 4280:				lPython2Present = 0 ;
    #####: 4281:				strcpy(gPython2Name , "python2" ) ;
    #####: 4282:				if ( detectPresence(gPython2Name) ) lPython2Present = 1;
    %%%%%: 4282-block 3
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 4282-block 5
    #####: 4283:				if (tinyfd_verbose) printf("lPython2Present %d\n", lPython2Present) ;
    %%%%%: 4283-block 6
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4283-block 7
call    2 never executed
    #####: 4284:				if (tinyfd_verbose) printf("gPython2Name %s\n", gPython2Name) ;
    %%%%%: 4284-block 8
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4284-block 9
call    2 never executed
        -: 4285:		}
    #####: 4286:		return lPython2Present ;
    %%%%%: 4286-block 10
        -: 4287:}
        -: 4288:
        -: 4289:
function tkinter3Present called 0 returned 0% blocks executed 0%
    #####: 4290:static int tkinter3Present(void)
        -: 4291:{
        -: 4292:		static int lTkinter3Present = -1 ;
        -: 4293:		char lPythonCommand[256];
    #####: 4294:		char lPythonParams[128] =
        -: 4295:				"-S -c \"try:\n\timport tkinter;\nexcept:\n\tprint(0);\"";
        -: 4296:
    #####: 4297:		if ( lTkinter3Present < 0 )
    %%%%%: 4297-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4298:		{
    #####: 4299:				lTkinter3Present = 0 ;
    #####: 4300:				if ( python3Present() )
    %%%%%: 4300-block 3
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4301:				{
    #####: 4302:						sprintf( lPythonCommand , "%s %s" , gPython3Name , lPythonParams ) ;
    #####: 4303:						lTkinter3Present = tryCommand(lPythonCommand) ;
    %%%%%: 4303-block 5
call    0 never executed
        -: 4304:				}
    #####: 4305:				if (tinyfd_verbose) printf("lTkinter3Present %d\n", lTkinter3Present) ;
    %%%%%: 4305-block 7
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4305-block 8
call    2 never executed
        -: 4306:		}
    #####: 4307:				return lTkinter3Present && graphicMode() && !(tfd_isDarwin() && getenv("SSH_TTY") );
    %%%%%: 4307-block 9
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4307-block 10
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 4307-block 12
call    5 never executed
branch  6 never executed (fallthrough)
branch  7 never executed
    %%%%%: 4307-block 14
call    8 never executed
branch  9 never executed (fallthrough)
branch 10 never executed
    %%%%%: 4307-block 16
    %%%%%: 4307-block 17
    %%%%%: 4307-block 18
        -: 4308:}
        -: 4309:
        -: 4310:
function tkinter2Present called 0 returned 0% blocks executed 0%
    #####: 4311:static int tkinter2Present(void)
        -: 4312:{
        -: 4313:		static int lTkinter2Present = -1 ;
        -: 4314:		char lPythonCommand[256];
    #####: 4315:		char lPythonParams[128] =
        -: 4316:				"-S -c \"try:\n\timport Tkinter;\nexcept:\n\tprint 0;\"";
        -: 4317:
    #####: 4318:		if ( lTkinter2Present < 0 )
    %%%%%: 4318-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4319:		{
    #####: 4320:				lTkinter2Present = 0 ;
    #####: 4321:				if ( python2Present() )
    %%%%%: 4321-block 3
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4322:				{
    #####: 4323:						sprintf( lPythonCommand , "%s %s" , gPython2Name , lPythonParams ) ;
    #####: 4324:						lTkinter2Present = tryCommand(lPythonCommand) ;
    %%%%%: 4324-block 5
call    0 never executed
        -: 4325:				}
    #####: 4326:				if (tinyfd_verbose) printf("lTkinter2Present %d graphicMode %d \n", lTkinter2Present, graphicMode() ) ;
    %%%%%: 4326-block 7
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4326-block 8
call    2 never executed
call    3 never executed
        -: 4327:		}
    #####: 4328:		return lTkinter2Present && graphicMode() && !(tfd_isDarwin() && getenv("SSH_TTY") );
    %%%%%: 4328-block 10
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4328-block 11
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 4328-block 13
call    5 never executed
branch  6 never executed (fallthrough)
branch  7 never executed
    %%%%%: 4328-block 15
call    8 never executed
branch  9 never executed (fallthrough)
branch 10 never executed
    %%%%%: 4328-block 17
    %%%%%: 4328-block 18
    %%%%%: 4328-block 19
        -: 4329:}
        -: 4330:
        -: 4331:
function pythonDbusPresent called 0 returned 0% blocks executed 0%
    #####: 4332:static int pythonDbusPresent(void)
        -: 4333:{
        -: 4334:	static int lPythonDbusPresent = -1 ;
        -: 4335:		char lPythonCommand[384];
    #####: 4336:		char lPythonParams[256] =
        -: 4337:"-c \"try:\n\timport dbus;bus=dbus.SessionBus();\
        -: 4338:notif=bus.get_object('org.freedesktop.Notifications','/org/freedesktop/Notifications');\
        -: 4339:notify=dbus.Interface(notif,'org.freedesktop.Notifications');\nexcept:\n\tprint(0);\"";
        -: 4340:
    #####: 4341:		if (lPythonDbusPresent < 0 )
    %%%%%: 4341-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4342:		{
    #####: 4343:		   lPythonDbusPresent = 0 ;
    #####: 4344:				if ( python2Present() )
    %%%%%: 4344-block 3
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4345:				{
    #####: 4346:						strcpy(gPythonName , gPython2Name ) ;
    #####: 4347:						sprintf( lPythonCommand , "%s %s" , gPythonName , lPythonParams ) ;
    #####: 4348:						lPythonDbusPresent = tryCommand(lPythonCommand) ;
    %%%%%: 4348-block 5
call    0 never executed
        -: 4349:				}
        -: 4350:
    #####: 4351:				if ( !lPythonDbusPresent && python3Present() )
    %%%%%: 4351-block 7
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4351-block 8
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
        -: 4352:				{
    #####: 4353:						strcpy(gPythonName , gPython3Name ) ;
    #####: 4354:						sprintf( lPythonCommand , "%s %s" , gPythonName , lPythonParams ) ;
    #####: 4355:						lPythonDbusPresent = tryCommand(lPythonCommand) ;
    %%%%%: 4355-block 10
call    0 never executed
        -: 4356:				}
        -: 4357:
    #####: 4358:				if (tinyfd_verbose) printf("lPythonDbusPresent %d\n", lPythonDbusPresent) ;
    %%%%%: 4358-block 12
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4358-block 13
call    2 never executed
    #####: 4359:				if (tinyfd_verbose) printf("gPythonName %s\n", gPythonName) ;
    %%%%%: 4359-block 14
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4359-block 15
call    2 never executed
        -: 4360:		}
    #####: 4361:		return lPythonDbusPresent && graphicMode() && !(tfd_isDarwin() && getenv("SSH_TTY") );
    %%%%%: 4361-block 16
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4361-block 17
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 4361-block 19
call    5 never executed
branch  6 never executed (fallthrough)
branch  7 never executed
    %%%%%: 4361-block 21
call    8 never executed
branch  9 never executed (fallthrough)
branch 10 never executed
    %%%%%: 4361-block 23
    %%%%%: 4361-block 24
    %%%%%: 4361-block 25
        -: 4362:}
        -: 4363:
        -: 4364:
function sigHandler called 0 returned 0% blocks executed 0%
    #####: 4365:static void sigHandler(int signum)
        -: 4366:{
        -: 4367:    FILE * lIn ;
    #####: 4368:    if ( ( lIn = popen( "pactl unload-module module-sine" , "r" ) ) )
    %%%%%: 4368-block 2
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4369:    {
    #####: 4370:        pclose( lIn ) ;
    %%%%%: 4370-block 4
call    0 never executed
        -: 4371:    }
    #####: 4372:    if (tinyfd_verbose) printf("tinyfiledialogs caught signal %d\n", signum);
    %%%%%: 4372-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4372-block 6
call    2 never executed
    #####: 4373:}
        -: 4374:
        -: 4375:
function tinyfd_beep called 0 returned 0% blocks executed 0%
    #####: 4376:void tinyfd_beep(void)
        -: 4377:{
        -: 4378:    char lDialogString[256] ;
        -: 4379:    FILE * lIn ;
        -: 4380:
    #####: 4381:    if ( pactlPresent() )
    %%%%%: 4381-block 2
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4382:    {
    #####: 4383:        signal(SIGINT, sigHandler);
    %%%%%: 4383-block 4
call    0 never executed
    #####: 4384:        strcpy( lDialogString ,
        -: 4385:            "thnum=$(pactl load-module module-sine frequency=440);sleep .3;pactl unload-module $thnum" ) ;
        -: 4386:    }
    #####: 4387:    else if ( osascriptPresent() )
    %%%%%: 4387-block 6
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4388:    {
    #####: 4389:        if ( afplayPresent() >= 2 )
    %%%%%: 4389-block 8
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4390:        {
    #####: 4391:            strcpy( lDialogString , "afplay /System/Library/Sounds/Ping.aiff") ;
    %%%%%: 4391-block 10
        -: 4392:        }
        -: 4393:        else
        -: 4394:        {
    #####: 4395:            strcpy( lDialogString , "osascript -e 'tell application \"System Events\" to beep'") ;
    %%%%%: 4395-block 11
        -: 4396:        }
        -: 4397:    }
    #####: 4398:    else if ( speakertestPresent() )
    %%%%%: 4398-block 12
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4399:    {
        -: 4400:        /*strcpy( lDialogString , "timeout -k .3 .3 speaker-test --frequency 440 --test sine > /dev/tty" ) ;*/
    #####: 4401:        strcpy( lDialogString , "( speaker-test -t sine -f 440 > /dev/tty )& pid=$!;sleep .5; kill -9 $pid" ) ; /*.3 was too short for mac g3*/
    %%%%%: 4401-block 14
        -: 4402:    }
    #####: 4403:    else if ( ffplayPresent() )
    %%%%%: 4403-block 15
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4404:    {
    #####: 4405:        strcpy(lDialogString, "ffplay -f lavfi -i sine=f=440:d=0.15 -autoexit -nodisp" );
    %%%%%: 4405-block 17
        -: 4406:    }
    #####: 4407:    else if (playPresent()) /* play is part of sox */
    %%%%%: 4407-block 18
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4408:    {
    #####: 4409:        strcpy(lDialogString, "play -q -n synth .3 sine 440");
    %%%%%: 4409-block 20
        -: 4410:    }
    #####: 4411:    else if ( playsoundPresent() )
    %%%%%: 4411-block 21
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4412:    {
    #####: 4413:        strcpy( lDialogString , "playsound_simple /usr/share/sounds/freedesktop/stereo/bell.oga") ;
    %%%%%: 4413-block 23
        -: 4414:    }
    #####: 4415:    else if ( paplayPresent() )
    %%%%%: 4415-block 24
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4416:    {
    #####: 4417:        strcpy( lDialogString , "paplay /usr/share/sounds/freedesktop/stereo/bell.oga") ;
    %%%%%: 4417-block 26
        -: 4418:    }
    #####: 4419:    else if (beepexePresent())
    %%%%%: 4419-block 27
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4420:    {
    #####: 4421:        strcpy(lDialogString, "beep.exe 440 300");
    %%%%%: 4421-block 29
        -: 4422:    }
        -: 4423:    /*else if ( beepPresent() )
        -: 4424:    {
        -: 4425:        strcpy( lDialogString , "beep -f 440 -l 300" ) ;
        -: 4426:    }*/
        -: 4427:    else
        -: 4428:    {
    #####: 4429:        strcpy( lDialogString , "printf '\\a' > /dev/tty" ) ;
    %%%%%: 4429-block 30
        -: 4430:    }
        -: 4431:
    #####: 4432:    if (tinyfd_verbose) printf( "lDialogString: %s\n" , lDialogString ) ;
    %%%%%: 4432-block 31
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4432-block 32
call    2 never executed
        -: 4433:
    #####: 4434:    if ( ( lIn = popen( lDialogString , "r" ) ) )
    %%%%%: 4434-block 33
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4435:    {
    #####: 4436:            pclose( lIn ) ;
    %%%%%: 4436-block 35
call    0 never executed
        -: 4437:    }
        -: 4438:
    #####: 4439:    if ( pactlPresent() )
    %%%%%: 4439-block 36
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4440:    {
    #####: 4441:            signal(SIGINT, SIG_DFL);
    %%%%%: 4441-block 38
call    0 never executed
        -: 4442:    }
    #####: 4443:}
        -: 4444:
        -: 4445:
function tinyfd_messageBox called 0 returned 0% blocks executed 0%
    #####: 4446:int tinyfd_messageBox(
        -: 4447:		char const * aTitle , /* NULL or "" */
        -: 4448:		char const * aMessage , /* NULL or ""  may contain \n and \t */
        -: 4449:		char const * aDialogType , /* "ok" "okcancel" "yesno" "yesnocancel" */
        -: 4450:		char const * aIconType , /* "info" "warning" "error" "question" */
        -: 4451:		int aDefaultButton ) /* 0 for cancel/no , 1 for ok/yes , 2 for no in yesnocancel */
        -: 4452:{
        -: 4453:		char lBuff[MAX_PATH_OR_CMD] ;
    #####: 4454:		char * lDialogString = NULL ;
        -: 4455:		char * lpDialogString;
        -: 4456:		FILE * lIn ;
    #####: 4457:		int lWasGraphicDialog = 0 ;
    #####: 4458:		int lWasXterm = 0 ;
        -: 4459:		int lResult ;
        -: 4460:		char lChar ;
        -: 4461:		struct termios infoOri;
        -: 4462:		struct termios info;
        -: 4463:		size_t lTitleLen ;
        -: 4464:		size_t lMessageLen ;
        -: 4465:
    #####: 4466:		lBuff[0]='\0';
        -: 4467:
    #####: 4468:				if (tfd_quoteDetected(aTitle)) return tinyfd_messageBox("INVALID TITLE WITH QUOTES", aMessage, aDialogType, aIconType, aDefaultButton);
    %%%%%: 4468-block 2
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 4468-block 4
call    3 never executed
    #####: 4469:				if (tfd_quoteDetected(aMessage)) return tinyfd_messageBox(aTitle, "INVALID MESSAGE WITH QUOTES", aDialogType, aIconType, aDefaultButton);
    %%%%%: 4469-block 6
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 4469-block 8
call    3 never executed
        -: 4470:
    #####: 4471:		lTitleLen =  aTitle ? strlen(aTitle) : 0 ;
    %%%%%: 4471-block 10
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4471-block 11
    %%%%%: 4471-block 12
    #####: 4472:		lMessageLen =  aMessage ? strlen(aMessage) : 0 ;
    %%%%%: 4472-block 13
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4472-block 14
    %%%%%: 4472-block 15
    #####: 4473:		if ( !aTitle || strcmp(aTitle,"tinyfd_query") )
    %%%%%: 4473-block 16
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4473-block 17
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4474:		{
    #####: 4475:				lDialogString = (char *) malloc( MAX_PATH_OR_CMD + lTitleLen + lMessageLen );
    %%%%%: 4475-block 18
        -: 4476:		}
        -: 4477:
    #####: 4478:		if ( osascriptPresent( ) )
    %%%%%: 4478-block 19
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4479:		{
    #####: 4480:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"applescript");return 1;}
    %%%%%: 4480-block 21
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4480-block 22
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 4480-block 23
        -: 4481:
    #####: 4482:				strcpy( lDialogString , "osascript ");
    #####: 4483:				if ( ! osx9orBetter() ) strcat( lDialogString , " -e 'tell application \"System Events\"' -e 'Activate'");
    %%%%%: 4483-block 24
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 4483-block 26
    #####: 4484:				strcat( lDialogString , " -e 'try' -e 'set {vButton} to {button returned} of ( display dialog \"") ;
    #####: 4485:				if ( aMessage && strlen(aMessage) )
    %%%%%: 4485-block 27
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4485-block 28
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4486:				{
    #####: 4487:						strcat(lDialogString, aMessage) ;
    %%%%%: 4487-block 29
        -: 4488:				}
    #####: 4489:				strcat(lDialogString, "\" ") ;
    #####: 4490:				if ( aTitle && strlen(aTitle) )
    %%%%%: 4490-block 30
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4490-block 31
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4491:				{
    #####: 4492:						strcat(lDialogString, "with title \"") ;
    #####: 4493:						strcat(lDialogString, aTitle) ;
    #####: 4494:						strcat(lDialogString, "\" ") ;
    %%%%%: 4494-block 32
        -: 4495:				}
    #####: 4496:				strcat(lDialogString, "with icon ") ;
    #####: 4497:				if ( aIconType && ! strcmp( "error" , aIconType ) )
    %%%%%: 4497-block 33
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4497-block 34
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4498:				{
    #####: 4499:						strcat(lDialogString, "stop " ) ;
    %%%%%: 4499-block 35
        -: 4500:				}
    #####: 4501:				else if ( aIconType && ! strcmp( "warning" , aIconType ) )
    %%%%%: 4501-block 36
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4501-block 37
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4502:				{
    #####: 4503:						strcat(lDialogString, "caution " ) ;
    %%%%%: 4503-block 38
        -: 4504:				}
        -: 4505:				else /* question or info */
        -: 4506:				{
    #####: 4507:						strcat(lDialogString, "note " ) ;
    %%%%%: 4507-block 39
        -: 4508:				}
    #####: 4509:				if ( aDialogType && ! strcmp( "okcancel" , aDialogType ) )
    %%%%%: 4509-block 40
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4509-block 41
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4510:				{
    #####: 4511:						if ( ! aDefaultButton )
    %%%%%: 4511-block 42
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4512:						{
    #####: 4513:								strcat( lDialogString ,"default button \"Cancel\" " ) ;
    %%%%%: 4513-block 43
        -: 4514:						}
        -: 4515:				}
    #####: 4516:				else if ( aDialogType && ! strcmp( "yesno" , aDialogType ) )
    %%%%%: 4516-block 45
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4516-block 46
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4517:				{
    #####: 4518:						strcat( lDialogString ,"buttons {\"No\", \"Yes\"} " ) ;
    #####: 4519:						if (aDefaultButton)
    %%%%%: 4519-block 47
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4520:						{
    #####: 4521:								strcat( lDialogString ,"default button \"Yes\" " ) ;
    %%%%%: 4521-block 48
        -: 4522:						}
        -: 4523:						else
        -: 4524:						{
    #####: 4525:								strcat( lDialogString ,"default button \"No\" " ) ;
    %%%%%: 4525-block 49
        -: 4526:						}
    #####: 4527:						strcat( lDialogString ,"cancel button \"No\"" ) ;
    %%%%%: 4527-block 50
        -: 4528:				}
    #####: 4529:				else if ( aDialogType && ! strcmp( "yesnocancel" , aDialogType ) )
    %%%%%: 4529-block 51
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4529-block 52
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4530:				{
    #####: 4531:						strcat( lDialogString ,"buttons {\"No\", \"Yes\", \"Cancel\"} " ) ;
    #####: 4532:						switch (aDefaultButton)
    %%%%%: 4532-block 53
branch  0 never executed
branch  1 never executed
branch  2 never executed
branch  3 never executed
        -: 4533:						{
    #####: 4534:								case 1: strcat( lDialogString ,"default button \"Yes\" " ) ; break;
    %%%%%: 4534-block 54
    #####: 4535:								case 2: strcat( lDialogString ,"default button \"No\" " ) ; break;
    %%%%%: 4535-block 55
    #####: 4536:								case 0: strcat( lDialogString ,"default button \"Cancel\" " ) ; break;
    %%%%%: 4536-block 56
        -: 4537:						}
    #####: 4538:						strcat( lDialogString ,"cancel button \"Cancel\"" ) ;
    %%%%%: 4538-block 57
        -: 4539:				}
        -: 4540:				else
        -: 4541:				{
    #####: 4542:						strcat( lDialogString ,"buttons {\"OK\"} " ) ;
    #####: 4543:						strcat( lDialogString ,"default button \"OK\" " ) ;
    %%%%%: 4543-block 58
        -: 4544:				}
    #####: 4545:				strcat( lDialogString, ")' ") ;
        -: 4546:
    #####: 4547:				strcat( lDialogString,
        -: 4548:"-e 'if vButton is \"Yes\" then' -e 'return 1'\
        -: 4549: -e 'else if vButton is \"OK\" then' -e 'return 1'\
        -: 4550: -e 'else if vButton is \"No\" then' -e 'return 2'\
        -: 4551: -e 'else' -e 'return 0' -e 'end if' " );
        -: 4552:
    #####: 4553:				strcat( lDialogString, "-e 'on error number -128' " ) ;
    #####: 4554:				strcat( lDialogString, "-e '0' " );
        -: 4555:
    #####: 4556:				strcat( lDialogString, "-e 'end try'") ;
    #####: 4557:				if ( ! osx9orBetter() ) strcat( lDialogString, " -e 'end tell'") ;
    %%%%%: 4557-block 59
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 4557-block 61
        -: 4558:		}
    #####: 4559:		else if ( tfd_kdialogPresent() )
    %%%%%: 4559-block 62
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4560:		{
    #####: 4561:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"kdialog");return 1;}
    %%%%%: 4561-block 64
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4561-block 65
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 4561-block 66
        -: 4562:
    #####: 4563:				strcpy( lDialogString , "kdialog" ) ;
    #####: 4564:								if ( (tfd_kdialogPresent() == 2) && tfd_xpropPresent() )
    %%%%%: 4564-block 67
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 4564-block 69
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 4565:				{
    #####: 4566:						strcat(lDialogString, " --attach=$(xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)"); /* contribution: Paul Rouget */
    %%%%%: 4566-block 71
        -: 4567:				}
        -: 4568:
    #####: 4569:				strcat( lDialogString , " --" ) ;
    #####: 4570:				if ( aDialogType && ( ! strcmp( "okcancel" , aDialogType )
    %%%%%: 4570-block 72
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4570-block 73
branch  2 never executed (fallthrough)
branch  3 never executed
    #####: 4571:						|| ! strcmp( "yesno" , aDialogType ) || ! strcmp( "yesnocancel" , aDialogType ) ) )
    %%%%%: 4571-block 74
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4571-block 75
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4572:				{
    #####: 4573:						if ( aIconType && ( ! strcmp( "warning" , aIconType )
    %%%%%: 4573-block 76
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4573-block 77
branch  2 never executed (fallthrough)
branch  3 never executed
    #####: 4574:								|| ! strcmp( "error" , aIconType ) ) )
    %%%%%: 4574-block 78
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4575:						{
    #####: 4576:								strcat( lDialogString , "warning" ) ;
    %%%%%: 4576-block 79
        -: 4577:						}
    #####: 4578:						if ( ! strcmp( "yesnocancel" , aDialogType ) )
    %%%%%: 4578-block 80
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4578-block 83
        -: 4579:						{
    #####: 4580:								strcat( lDialogString , "yesnocancel" ) ;
    %%%%%: 4580-block 81
        -: 4581:						}
        -: 4582:						else
        -: 4583:						{
    #####: 4584:								strcat( lDialogString , "yesno" ) ;
    %%%%%: 4584-block 82
        -: 4585:						}
        -: 4586:				}
    #####: 4587:				else if ( aIconType && ! strcmp( "error" , aIconType ) )
    %%%%%: 4587-block 84
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4587-block 85
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4588:				{
    #####: 4589:						strcat( lDialogString , "error" ) ;
    %%%%%: 4589-block 86
        -: 4590:				}
    #####: 4591:				else if ( aIconType && ! strcmp( "warning" , aIconType ) )
    %%%%%: 4591-block 87
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4591-block 88
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4592:				{
    #####: 4593:						strcat( lDialogString , "sorry" ) ;
    %%%%%: 4593-block 89
        -: 4594:				}
        -: 4595:				else
        -: 4596:				{
    #####: 4597:						strcat( lDialogString , "msgbox" ) ;
    %%%%%: 4597-block 90
        -: 4598:				}
    #####: 4599:				strcat( lDialogString , " \"" ) ;
    #####: 4600:				if ( aMessage )
    %%%%%: 4600-block 91
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4601:				{
    #####: 4602:						strcat( lDialogString , aMessage ) ;
    %%%%%: 4602-block 92
        -: 4603:				}
    #####: 4604:				strcat( lDialogString , "\"" ) ;
    #####: 4605:				if ( aDialogType && ! strcmp( "okcancel" , aDialogType ) )
    %%%%%: 4605-block 93
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4605-block 94
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4606:				{
    #####: 4607:						strcat( lDialogString ,
    %%%%%: 4607-block 95
        -: 4608:								" --yes-label Ok --no-label Cancel" ) ;
        -: 4609:				}
    #####: 4610:				if ( aTitle && strlen(aTitle) )
    %%%%%: 4610-block 96
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4610-block 97
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4611:				{
    #####: 4612:						strcat(lDialogString, " --title \"") ;
    #####: 4613:						strcat(lDialogString, aTitle) ;
    #####: 4614:						strcat(lDialogString, "\"") ;
    %%%%%: 4614-block 98
        -: 4615:				}
        -: 4616:
    #####: 4617:				if ( ! strcmp( "yesnocancel" , aDialogType ) )
    %%%%%: 4617-block 99
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4618:				{
    #####: 4619:						strcat( lDialogString , "; x=$? ;if [ $x = 0 ] ;then echo 1;elif [ $x = 1 ] ;then echo 2;else echo 0;fi");
    %%%%%: 4619-block 100
        -: 4620:				}
        -: 4621:				else
        -: 4622:				{
    #####: 4623:						strcat( lDialogString , ";if [ $? = 0 ];then echo 1;else echo 0;fi");
    %%%%%: 4623-block 101
        -: 4624:				}
        -: 4625:		}
    #####: 4626:		else if ( tfd_zenityPresent() || tfd_matedialogPresent() || tfd_shellementaryPresent() || tfd_qarmaPresent() )
    %%%%%: 4626-block 102
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 4626-block 104
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 4626-block 106
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
    %%%%%: 4626-block 108
call    9 never executed
branch 10 never executed (fallthrough)
branch 11 never executed
        -: 4627:		{
    #####: 4628:				if ( tfd_zenityPresent() )
    %%%%%: 4628-block 110
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4629:				{
    #####: 4630:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"zenity");return 1;}
    %%%%%: 4630-block 112
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4630-block 113
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 4630-block 114
    #####: 4631:						strcpy( lDialogString , "szAnswer=$(zenity" ) ;
    #####: 4632:												if ( (tfd_zenity3Present() >= 4) && !getenv("SSH_TTY") && tfd_xpropPresent() )
    %%%%%: 4632-block 115
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 4632-block 117
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 4632-block 119
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
        -: 4633:						{
    #####: 4634:								strcat(lDialogString, " --attach=$(sleep .01;xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)"); /* contribution: Paul Rouget */
    %%%%%: 4634-block 121
        -: 4635:						}
        -: 4636:				}
    #####: 4637:				else if ( tfd_matedialogPresent() )
    %%%%%: 4637-block 122
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4638:				{
    #####: 4639:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"matedialog");return 1;}
    %%%%%: 4639-block 124
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4639-block 125
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 4639-block 126
    #####: 4640:						strcpy( lDialogString , "szAnswer=$(matedialog" ) ;
    %%%%%: 4640-block 127
        -: 4641:				}
    #####: 4642:				else if ( tfd_shellementaryPresent() )
    %%%%%: 4642-block 128
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4643:				{
    #####: 4644:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"shellementary");return 1;}
    %%%%%: 4644-block 130
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4644-block 131
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 4644-block 132
    #####: 4645:						strcpy( lDialogString , "szAnswer=$(shellementary" ) ;
    %%%%%: 4645-block 133
        -: 4646:				}
        -: 4647:				else
        -: 4648:				{
    #####: 4649:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"qarma");return 1;}
    %%%%%: 4649-block 134
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4649-block 135
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 4649-block 136
    #####: 4650:						strcpy( lDialogString , "szAnswer=$(qarma" ) ;
    #####: 4651:												if ( !getenv("SSH_TTY") && tfd_xpropPresent() )
    %%%%%: 4651-block 137
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 4651-block 139
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 4652:						{
    #####: 4653:								strcat(lDialogString, " --attach=$(xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)"); /* contribution: Paul Rouget */
    %%%%%: 4653-block 141
        -: 4654:						}
        -: 4655:				}
    #####: 4656:				strcat(lDialogString, " --");
        -: 4657:
    #####: 4658:				if ( aDialogType && ! strcmp( "okcancel" , aDialogType ) )
    %%%%%: 4658-block 142
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4658-block 143
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4659:				{
    #####: 4660:								strcat( lDialogString ,
    %%%%%: 4660-block 144
        -: 4661:												"question --ok-label=Ok --cancel-label=Cancel" ) ;
        -: 4662:				}
    #####: 4663:				else if ( aDialogType && ! strcmp( "yesno" , aDialogType ) )
    %%%%%: 4663-block 145
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4663-block 146
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4664:				{
    #####: 4665:								strcat( lDialogString , "question" ) ;
    %%%%%: 4665-block 147
        -: 4666:				}
    #####: 4667:				else if ( aDialogType && ! strcmp( "yesnocancel" , aDialogType ) )
    %%%%%: 4667-block 148
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4667-block 149
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4668:				{
    #####: 4669:						strcat( lDialogString , "list --column \"\" --hide-header \"Yes\" \"No\"" ) ;
    %%%%%: 4669-block 150
        -: 4670:				}
    #####: 4671:				else if ( aIconType && ! strcmp( "error" , aIconType ) )
    %%%%%: 4671-block 151
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4671-block 152
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4672:				{
    #####: 4673:					strcat( lDialogString , "error" ) ;
    %%%%%: 4673-block 153
        -: 4674:				}
    #####: 4675:				else if ( aIconType && ! strcmp( "warning" , aIconType ) )
    %%%%%: 4675-block 154
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4675-block 155
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4676:				{
    #####: 4677:					strcat( lDialogString , "warning" ) ;
    %%%%%: 4677-block 156
        -: 4678:				}
        -: 4679:				else
        -: 4680:				{
    #####: 4681:					strcat( lDialogString , "info" ) ;
    %%%%%: 4681-block 157
        -: 4682:				}
        -: 4683:
    #####: 4684:				strcat(lDialogString, " --title=\"");
    #####: 4685:				if ( aTitle && strlen(aTitle) ) strcat(lDialogString, aTitle) ;
    %%%%%: 4685-block 158
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4685-block 159
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 4685-block 160
    #####: 4686:				strcat(lDialogString, "\"");
        -: 4687:
    #####: 4688:				if (strcmp("yesnocancel", aDialogType)) strcat(lDialogString, " --no-wrap");
    %%%%%: 4688-block 161
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4688-block 162
        -: 4689:
    #####: 4690:				strcat(lDialogString, " --text=\"") ;
    #####: 4691:				if (aMessage && strlen(aMessage)) strcat(lDialogString, aMessage) ;
    %%%%%: 4691-block 163
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4691-block 164
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 4691-block 165
    #####: 4692:				strcat(lDialogString, "\"") ;
        -: 4693:
    #####: 4694:				if ( (tfd_zenity3Present() >= 3) || (!tfd_zenityPresent() && (tfd_shellementaryPresent() || tfd_qarmaPresent()) ) )
    %%%%%: 4694-block 166
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 4694-block 168
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 4694-block 170
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
    %%%%%: 4694-block 172
call    9 never executed
branch 10 never executed (fallthrough)
branch 11 never executed
        -: 4695:				{
    #####: 4696:						strcat( lDialogString , " --icon-name=dialog-" ) ;
    #####: 4697:						if ( aIconType && (! strcmp( "question" , aIconType )
    %%%%%: 4697-block 174
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4697-block 175
branch  2 never executed (fallthrough)
branch  3 never executed
    #####: 4698:						  || ! strcmp( "error" , aIconType )
    %%%%%: 4698-block 176
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 4699:						  || ! strcmp( "warning" , aIconType ) ) )
    %%%%%: 4699-block 177
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4700:						{
    #####: 4701:								strcat( lDialogString , aIconType ) ;
    %%%%%: 4701-block 178
        -: 4702:						}
        -: 4703:						else
        -: 4704:						{
    #####: 4705:								strcat( lDialogString , "information" ) ;
    %%%%%: 4705-block 179
        -: 4706:						}
        -: 4707:				}
        -: 4708:
    #####: 4709:				if (tinyfd_silent) strcat( lDialogString , " 2>/dev/null ");
    %%%%%: 4709-block 180
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4709-block 181
        -: 4710:
    #####: 4711:				if ( ! strcmp( "yesnocancel" , aDialogType ) )
    %%%%%: 4711-block 182
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4711-block 185
        -: 4712:				{
    #####: 4713:						strcat( lDialogString ,
    %%%%%: 4713-block 183
        -: 4714:");if [ $? = 1 ];then echo 0;elif [ $szAnswer = \"No\" ];then echo 2;else echo 1;fi");
        -: 4715:				}
        -: 4716:				else
        -: 4717:				{
    #####: 4718:						strcat( lDialogString , ");if [ $? = 0 ];then echo 1;else echo 0;fi");
    %%%%%: 4718-block 184
        -: 4719:				}
        -: 4720:	  }
        -: 4721:
    #####: 4722:	  else if (tfd_yadPresent())
    %%%%%: 4722-block 186
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4723:	  {
    #####: 4724:		 if (aTitle && !strcmp(aTitle, "tinyfd_query")) { strcpy(tinyfd_response, "yad"); return 1; }
    %%%%%: 4724-block 188
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4724-block 189
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 4724-block 190
    #####: 4725:		 strcpy(lDialogString, "szAnswer=$(yad --");
    #####: 4726:		 if (aDialogType && !strcmp("ok", aDialogType))
    %%%%%: 4726-block 191
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4726-block 192
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4727:		 {
    #####: 4728:			strcat(lDialogString,"button=Ok:1");
    %%%%%: 4728-block 193
        -: 4729:		 }
    #####: 4730:		 else if (aDialogType && !strcmp("okcancel", aDialogType))
    %%%%%: 4730-block 194
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4730-block 195
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4731:		 {
    #####: 4732:			strcat(lDialogString,"button=Ok:1 --button=Cancel:0");
    %%%%%: 4732-block 196
        -: 4733:		 }
    #####: 4734:		 else if (aDialogType && !strcmp("yesno", aDialogType))
    %%%%%: 4734-block 197
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4734-block 198
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4735:		 {
    #####: 4736:			strcat(lDialogString, "button=Yes:1 --button=No:0");
    %%%%%: 4736-block 199
        -: 4737:		 }
    #####: 4738:		 else if (aDialogType && !strcmp("yesnocancel", aDialogType))
    %%%%%: 4738-block 200
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4738-block 201
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4739:		 {
    #####: 4740:			strcat(lDialogString, "button=Yes:1 --button=No:2 --button=Cancel:0");
    %%%%%: 4740-block 202
        -: 4741:		 }
    #####: 4742:		 else if (aIconType && !strcmp("error", aIconType))
    %%%%%: 4742-block 203
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4742-block 204
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4743:		 {
    #####: 4744:			strcat(lDialogString, "error");
    %%%%%: 4744-block 205
        -: 4745:		 }
    #####: 4746:		 else if (aIconType && !strcmp("warning", aIconType))
    %%%%%: 4746-block 206
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4746-block 207
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4747:		 {
    #####: 4748:			strcat(lDialogString, "warning");
    %%%%%: 4748-block 208
        -: 4749:		 }
        -: 4750:		 else
        -: 4751:		 {
    #####: 4752:			strcat(lDialogString, "info");
    %%%%%: 4752-block 209
        -: 4753:		 }
    #####: 4754:		 if (aTitle && strlen(aTitle))
    %%%%%: 4754-block 210
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4754-block 211
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4755:		 {
    #####: 4756:			strcat(lDialogString, " --title=\"");
    #####: 4757:			strcat(lDialogString, aTitle);
    #####: 4758:			strcat(lDialogString, "\"");
    %%%%%: 4758-block 212
        -: 4759:		 }
    #####: 4760:		 if (aMessage && strlen(aMessage))
    %%%%%: 4760-block 213
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4760-block 214
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4761:		 {
    #####: 4762:			strcat(lDialogString, " --text=\"");
    #####: 4763:			strcat(lDialogString, aMessage);
    #####: 4764:			strcat(lDialogString, "\"");
    %%%%%: 4764-block 215
        -: 4765:		 }
        -: 4766:
    #####: 4767:		 strcat(lDialogString, " --image=dialog-");
    #####: 4768:		 if (aIconType && (!strcmp("question", aIconType)
    %%%%%: 4768-block 216
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4768-block 217
branch  2 never executed (fallthrough)
branch  3 never executed
    #####: 4769:			|| !strcmp("error", aIconType)
    %%%%%: 4769-block 218
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 4770:			|| !strcmp("warning", aIconType)))
    %%%%%: 4770-block 219
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4771:		 {
    #####: 4772:			strcat(lDialogString, aIconType);
    %%%%%: 4772-block 220
        -: 4773:		 }
        -: 4774:		 else
        -: 4775:		 {
    #####: 4776:			strcat(lDialogString, "information");
    %%%%%: 4776-block 221
        -: 4777:		 }
        -: 4778:
    #####: 4779:		 if (tinyfd_silent) strcat(lDialogString, " 2>/dev/null ");
    %%%%%: 4779-block 222
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4779-block 223
    #####: 4780:		 strcat(lDialogString,");echo $?");
    %%%%%: 4780-block 224
        -: 4781:	  }
        -: 4782:
    #####: 4783:	  else if ( !gxmessagePresent() && !gmessagePresent() && !gdialogPresent() && !xdialogPresent() && tkinter3Present() )
    %%%%%: 4783-block 225
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 4783-block 227
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 4783-block 229
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
    %%%%%: 4783-block 231
call    9 never executed
branch 10 never executed (fallthrough)
branch 11 never executed
    %%%%%: 4783-block 233
call   12 never executed
branch 13 never executed (fallthrough)
branch 14 never executed
        -: 4784:				{
    #####: 4785:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"python3-tkinter");return 1;}
    %%%%%: 4785-block 235
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4785-block 236
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 4785-block 237
        -: 4786:
    #####: 4787:						strcpy( lDialogString , gPython3Name ) ;
    #####: 4788:						strcat( lDialogString ,
        -: 4789:								" -S -c \"import tkinter;from tkinter import messagebox;root=tkinter.Tk();root.withdraw();");
        -: 4790:
    #####: 4791:						strcat( lDialogString ,"res=messagebox." ) ;
    #####: 4792:						if ( aDialogType && ! strcmp( "okcancel" , aDialogType ) )
    %%%%%: 4792-block 238
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4792-block 239
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4793:						{
    #####: 4794:								strcat( lDialogString , "askokcancel(" ) ;
    #####: 4795:								if ( aDefaultButton )
    %%%%%: 4795-block 240
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4796:								{
    #####: 4797:										strcat( lDialogString , "default=messagebox.OK," ) ;
    %%%%%: 4797-block 241
        -: 4798:								}
        -: 4799:								else
        -: 4800:								{
    #####: 4801:										strcat( lDialogString , "default=messagebox.CANCEL," ) ;
    %%%%%: 4801-block 242
        -: 4802:								}
        -: 4803:						}
    #####: 4804:						else if ( aDialogType && ! strcmp( "yesno" , aDialogType ) )
    %%%%%: 4804-block 244
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4804-block 245
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4805:						{
    #####: 4806:								strcat( lDialogString , "askyesno(" ) ;
    #####: 4807:								if ( aDefaultButton )
    %%%%%: 4807-block 246
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4808:								{
    #####: 4809:										strcat( lDialogString , "default=messagebox.YES," ) ;
    %%%%%: 4809-block 247
        -: 4810:								}
        -: 4811:								else
        -: 4812:								{
    #####: 4813:										strcat( lDialogString , "default=messagebox.NO," ) ;
    %%%%%: 4813-block 248
        -: 4814:								}
        -: 4815:						}
    #####: 4816:						else if ( aDialogType && ! strcmp( "yesnocancel" , aDialogType ) )
    %%%%%: 4816-block 250
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4816-block 251
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4817:						{
    #####: 4818:								strcat( lDialogString , "askyesnocancel(" ) ;
    #####: 4819:								switch ( aDefaultButton )
    %%%%%: 4819-block 252
branch  0 never executed
branch  1 never executed
branch  2 never executed
branch  3 never executed
        -: 4820:								{
    #####: 4821:								case 1: strcat( lDialogString , "default=messagebox.YES," ); break;
    %%%%%: 4821-block 253
    #####: 4822:								case 2: strcat( lDialogString , "default=messagebox.NO," ); break;
    %%%%%: 4822-block 254
    #####: 4823:								case 0: strcat( lDialogString , "default=messagebox.CANCEL," ); break;
    %%%%%: 4823-block 255
        -: 4824:								}
        -: 4825:						}
        -: 4826:						else
        -: 4827:						{
    #####: 4828:								strcat( lDialogString , "showinfo(" ) ;
    %%%%%: 4828-block 257
        -: 4829:						}
        -: 4830:
    #####: 4831:						strcat( lDialogString , "icon='" ) ;
    #####: 4832:						if ( aIconType && (! strcmp( "question" , aIconType )
    %%%%%: 4832-block 258
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4832-block 259
branch  2 never executed (fallthrough)
branch  3 never executed
    #####: 4833:								|| ! strcmp( "error" , aIconType )
    %%%%%: 4833-block 260
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 4834:								|| ! strcmp( "warning" , aIconType ) ) )
    %%%%%: 4834-block 261
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4835:						{
    #####: 4836:								strcat( lDialogString , aIconType ) ;
    %%%%%: 4836-block 262
        -: 4837:						}
        -: 4838:						else
        -: 4839:						{
    #####: 4840:								strcat( lDialogString , "info" ) ;
    %%%%%: 4840-block 263
        -: 4841:						}
        -: 4842:
    #####: 4843:						strcat(lDialogString, "',") ;
    #####: 4844:						if ( aTitle && strlen(aTitle) )
    %%%%%: 4844-block 264
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4844-block 265
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4845:						{
    #####: 4846:								strcat(lDialogString, "title='") ;
    #####: 4847:								strcat(lDialogString, aTitle) ;
    #####: 4848:								strcat(lDialogString, "',") ;
    %%%%%: 4848-block 266
        -: 4849:						}
    #####: 4850:						if ( aMessage && strlen(aMessage) )
    %%%%%: 4850-block 267
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4850-block 268
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4851:						{
    #####: 4852:								strcat(lDialogString, "message='") ;
    #####: 4853:								lpDialogString = lDialogString + strlen(lDialogString);
    #####: 4854:								tfd_replaceSubStr( aMessage , "\n" , "\\n" , lpDialogString ) ;
    %%%%%: 4854-block 269
call    0 never executed
    #####: 4855:								strcat(lDialogString, "'") ;
        -: 4856:						}
        -: 4857:
    #####: 4858:						if ( aDialogType && ! strcmp( "yesnocancel" , aDialogType ) )
    %%%%%: 4858-block 271
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4858-block 272
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4859:						{
    #####: 4860:								strcat(lDialogString, ");\n\
    %%%%%: 4860-block 273
        -: 4861:if res is None :\n\tprint(0)\n\
        -: 4862:elif res is False :\n\tprint(2)\n\
        -: 4863:else :\n\tprint (1)\n\"" ) ;
        -: 4864:						}
        -: 4865:						else
        -: 4866:						{
    #####: 4867:								strcat(lDialogString, ");\n\
    %%%%%: 4867-block 274
        -: 4868:if res is False :\n\tprint(0)\n\
        -: 4869:else :\n\tprint(1)\n\"" ) ;
        -: 4870:						}
        -: 4871:				}
    #####: 4872:				else if ( !gxmessagePresent() && !gmessagePresent() && !gdialogPresent() && !xdialogPresent() && tkinter2Present() )
    %%%%%: 4872-block 276
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 4872-block 278
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 4872-block 280
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
    %%%%%: 4872-block 282
call    9 never executed
branch 10 never executed (fallthrough)
branch 11 never executed
    %%%%%: 4872-block 284
call   12 never executed
branch 13 never executed (fallthrough)
branch 14 never executed
        -: 4873:		{
    #####: 4874:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"python2-tkinter");return 1;}
    %%%%%: 4874-block 286
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4874-block 287
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 4874-block 288
    #####: 4875:								strcpy( lDialogString , "export PYTHONIOENCODING=utf-8;" ) ;
    #####: 4876:								strcat( lDialogString , gPython2Name ) ;
    #####: 4877:								if ( ! isTerminalRunning( ) && tfd_isDarwin( ) )
    %%%%%: 4877-block 289
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 4877-block 291
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 4878:				{
    #####: 4879:						strcat( lDialogString , " -i" ) ;  /* for osx without console */
    %%%%%: 4879-block 293
        -: 4880:				}
        -: 4881:
    #####: 4882:				strcat( lDialogString ,
        -: 4883:" -S -c \"import Tkinter,tkMessageBox;root=Tkinter.Tk();root.withdraw();");
        -: 4884:
    #####: 4885:				if ( tfd_isDarwin( ) )
    %%%%%: 4885-block 294
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4886:				{
    #####: 4887:						strcat( lDialogString ,
    %%%%%: 4887-block 296
        -: 4888:"import os;os.system('''/usr/bin/osascript -e 'tell app \\\"Finder\\\" to set \
        -: 4889:frontmost of process \\\"Python\\\" to true' ''');");
        -: 4890:				}
        -: 4891:
    #####: 4892:				strcat( lDialogString ,"res=tkMessageBox." ) ;
    #####: 4893:				if ( aDialogType && ! strcmp( "okcancel" , aDialogType ) )
    %%%%%: 4893-block 297
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4893-block 298
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4894:				{
    #####: 4895:				  strcat( lDialogString , "askokcancel(" ) ;
    #####: 4896:				  if ( aDefaultButton )
    %%%%%: 4896-block 299
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4897:						{
    #####: 4898:								strcat( lDialogString , "default=tkMessageBox.OK," ) ;
    %%%%%: 4898-block 300
        -: 4899:						}
        -: 4900:						else
        -: 4901:						{
    #####: 4902:								strcat( lDialogString , "default=tkMessageBox.CANCEL," ) ;
    %%%%%: 4902-block 301
        -: 4903:						}
        -: 4904:				}
    #####: 4905:				else if ( aDialogType && ! strcmp( "yesno" , aDialogType ) )
    %%%%%: 4905-block 303
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4905-block 304
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4906:				{
    #####: 4907:						strcat( lDialogString , "askyesno(" ) ;
    #####: 4908:						if ( aDefaultButton )
    %%%%%: 4908-block 305
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4909:						{
    #####: 4910:								strcat( lDialogString , "default=tkMessageBox.YES," ) ;
    %%%%%: 4910-block 306
        -: 4911:						}
        -: 4912:						else
        -: 4913:						{
    #####: 4914:								strcat( lDialogString , "default=tkMessageBox.NO," ) ;
    %%%%%: 4914-block 307
        -: 4915:						}
        -: 4916:				}
    #####: 4917:				else if ( aDialogType && ! strcmp( "yesnocancel" , aDialogType ) )
    %%%%%: 4917-block 309
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4917-block 310
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4918:				{
    #####: 4919:						strcat( lDialogString , "askyesnocancel(" ) ;
    #####: 4920:						switch ( aDefaultButton )
    %%%%%: 4920-block 311
branch  0 never executed
branch  1 never executed
branch  2 never executed
branch  3 never executed
        -: 4921:						{
    #####: 4922:								case 1: strcat( lDialogString , "default=tkMessageBox.YES," ); break;
    %%%%%: 4922-block 312
    #####: 4923:								case 2: strcat( lDialogString , "default=tkMessageBox.NO," ); break;
    %%%%%: 4923-block 313
    #####: 4924:								case 0: strcat( lDialogString , "default=tkMessageBox.CANCEL," ); break;
    %%%%%: 4924-block 314
        -: 4925:						}
        -: 4926:				}
        -: 4927:				else
        -: 4928:				{
    #####: 4929:								strcat( lDialogString , "showinfo(" ) ;
    %%%%%: 4929-block 316
        -: 4930:				}
        -: 4931:
    #####: 4932:				strcat( lDialogString , "icon='" ) ;
    #####: 4933:				if ( aIconType && (! strcmp( "question" , aIconType )
    %%%%%: 4933-block 317
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4933-block 318
branch  2 never executed (fallthrough)
branch  3 never executed
    #####: 4934:				  || ! strcmp( "error" , aIconType )
    %%%%%: 4934-block 319
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 4935:				  || ! strcmp( "warning" , aIconType ) ) )
    %%%%%: 4935-block 320
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 4936:				{
    #####: 4937:								strcat( lDialogString , aIconType ) ;
    %%%%%: 4937-block 321
        -: 4938:				}
        -: 4939:				else
        -: 4940:				{
    #####: 4941:								strcat( lDialogString , "info" ) ;
    %%%%%: 4941-block 322
        -: 4942:				}
        -: 4943:
    #####: 4944:				strcat(lDialogString, "',") ;
    #####: 4945:				if ( aTitle && strlen(aTitle) )
    %%%%%: 4945-block 323
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4945-block 324
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4946:				{
    #####: 4947:								strcat(lDialogString, "title='") ;
    #####: 4948:								strcat(lDialogString, aTitle) ;
    #####: 4949:								strcat(lDialogString, "',") ;
    %%%%%: 4949-block 325
        -: 4950:				}
    #####: 4951:				if ( aMessage && strlen(aMessage) )
    %%%%%: 4951-block 326
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4951-block 327
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4952:				{
    #####: 4953:						strcat(lDialogString, "message='") ;
    #####: 4954:						lpDialogString = lDialogString + strlen(lDialogString);
    #####: 4955:						tfd_replaceSubStr( aMessage , "\n" , "\\n" , lpDialogString ) ;
    %%%%%: 4955-block 328
call    0 never executed
    #####: 4956:						strcat(lDialogString, "'") ;
        -: 4957:				}
        -: 4958:
    #####: 4959:				if ( aDialogType && ! strcmp( "yesnocancel" , aDialogType ) )
    %%%%%: 4959-block 330
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4959-block 331
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4960:				{
    #####: 4961:						strcat(lDialogString, ");\n\
    %%%%%: 4961-block 332
        -: 4962:if res is None :\n\tprint 0\n\
        -: 4963:elif res is False :\n\tprint 2\n\
        -: 4964:else :\n\tprint 1\n\"" ) ;
        -: 4965:				}
        -: 4966:				else
        -: 4967:				{
    #####: 4968:						strcat(lDialogString, ");\n\
    %%%%%: 4968-block 333
        -: 4969:if res is False :\n\tprint 0\n\
        -: 4970:else :\n\tprint 1\n\"" ) ;
        -: 4971:				}
        -: 4972:	}
    #####: 4973:		else if ( gxmessagePresent() || gmessagePresent() || (!gdialogPresent() && !xdialogPresent() && xmessagePresent()) )
    %%%%%: 4973-block 335
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 4973-block 337
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 4973-block 339
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
    %%%%%: 4973-block 341
call    9 never executed
branch 10 never executed (fallthrough)
branch 11 never executed
    %%%%%: 4973-block 343
call   12 never executed
branch 13 never executed (fallthrough)
branch 14 never executed
        -: 4974:		{
    #####: 4975:				if ( gxmessagePresent() )
    %%%%%: 4975-block 345
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4976:				{
    #####: 4977:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"gxmessage");return 1;}
    %%%%%: 4977-block 347
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4977-block 348
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 4977-block 349
    #####: 4978:						strcpy( lDialogString , "gxmessage");
    %%%%%: 4978-block 350
        -: 4979:				}
    #####: 4980:				else if ( gmessagePresent() )
    %%%%%: 4980-block 351
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 4981:				{
    #####: 4982:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"gmessage");return 1;}
    %%%%%: 4982-block 353
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4982-block 354
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 4982-block 355
    #####: 4983:						strcpy( lDialogString , "gmessage");
    %%%%%: 4983-block 356
        -: 4984:				}
        -: 4985:				else
        -: 4986:				{
    #####: 4987:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"xmessage");return 1;}
    %%%%%: 4987-block 357
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4987-block 358
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 4987-block 359
    #####: 4988:						strcpy( lDialogString , "xmessage");
    %%%%%: 4988-block 360
        -: 4989:				}
        -: 4990:
    #####: 4991:				if ( aDialogType && ! strcmp("okcancel" , aDialogType) )
    %%%%%: 4991-block 361
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 4991-block 362
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 4992:				{
    #####: 4993:						strcat( lDialogString , " -buttons Ok:1,Cancel:0");
    #####: 4994:						switch ( aDefaultButton )
    %%%%%: 4994-block 363
branch  0 never executed
branch  1 never executed
branch  2 never executed
        -: 4995:						{
    #####: 4996:								case 1: strcat( lDialogString , " -default Ok"); break;
    %%%%%: 4996-block 364
    #####: 4997:								case 0: strcat( lDialogString , " -default Cancel"); break;
    %%%%%: 4997-block 365
        -: 4998:						}
        -: 4999:				}
    #####: 5000:				else if ( aDialogType && ! strcmp("yesno" , aDialogType) )
    %%%%%: 5000-block 367
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5000-block 368
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5001:				{
    #####: 5002:						strcat( lDialogString , " -buttons Yes:1,No:0");
    #####: 5003:						switch ( aDefaultButton )
    %%%%%: 5003-block 369
branch  0 never executed
branch  1 never executed
branch  2 never executed
        -: 5004:						{
    #####: 5005:								case 1: strcat( lDialogString , " -default Yes"); break;
    %%%%%: 5005-block 370
    #####: 5006:								case 0: strcat( lDialogString , " -default No"); break;
    %%%%%: 5006-block 371
        -: 5007:						}
        -: 5008:				}
    #####: 5009:				else if ( aDialogType && ! strcmp("yesnocancel" , aDialogType) )
    %%%%%: 5009-block 373
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5009-block 374
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5010:				{
    #####: 5011:						strcat( lDialogString , " -buttons Yes:1,No:2,Cancel:0");
    #####: 5012:						switch ( aDefaultButton )
    %%%%%: 5012-block 375
branch  0 never executed
branch  1 never executed
branch  2 never executed
branch  3 never executed
        -: 5013:						{
    #####: 5014:								case 1: strcat( lDialogString , " -default Yes"); break;
    %%%%%: 5014-block 376
    #####: 5015:								case 2: strcat( lDialogString , " -default No"); break;
    %%%%%: 5015-block 377
    #####: 5016:								case 0: strcat( lDialogString , " -default Cancel"); break;
    %%%%%: 5016-block 378
        -: 5017:						}
        -: 5018:				}
        -: 5019:				else
        -: 5020:				{
    #####: 5021:						strcat( lDialogString , " -buttons Ok:1");
    #####: 5022:						strcat( lDialogString , " -default Ok");
    %%%%%: 5022-block 380
        -: 5023:				}
        -: 5024:
    #####: 5025:				strcat( lDialogString , " -center \"");
    #####: 5026:				if ( aMessage && strlen(aMessage) )
    %%%%%: 5026-block 381
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5026-block 382
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5027:				{
    #####: 5028:						strcat( lDialogString , aMessage ) ;
    %%%%%: 5028-block 383
        -: 5029:				}
    #####: 5030:				strcat(lDialogString, "\"" ) ;
    #####: 5031:				if ( aTitle && strlen(aTitle) )
    %%%%%: 5031-block 384
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5031-block 385
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5032:				{
    #####: 5033:						strcat( lDialogString , " -title  \"");
    #####: 5034:						strcat( lDialogString , aTitle ) ;
    #####: 5035:						strcat( lDialogString, "\"" ) ;
    %%%%%: 5035-block 386
        -: 5036:				}
    #####: 5037:				strcat( lDialogString , " ; echo $? ");
    %%%%%: 5037-block 387
        -: 5038:		}
    #####: 5039:		else if ( xdialogPresent() || gdialogPresent() || dialogName() || whiptailPresent() )
    %%%%%: 5039-block 388
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5039-block 390
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 5039-block 392
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
    %%%%%: 5039-block 394
call    9 never executed
branch 10 never executed (fallthrough)
branch 11 never executed
        -: 5040:		{
    #####: 5041:				if ( gdialogPresent( ) )
    %%%%%: 5041-block 396
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5042:				{
    #####: 5043:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"gdialog");return 1;}
    %%%%%: 5043-block 398
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5043-block 399
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5043-block 400
    #####: 5044:						lWasGraphicDialog = 1 ;
    #####: 5045:						strcpy( lDialogString , "(gdialog " ) ;
    %%%%%: 5045-block 401
        -: 5046:				}
    #####: 5047:				else if ( xdialogPresent( ) )
    %%%%%: 5047-block 402
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5048:				{
    #####: 5049:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"xdialog");return 1;}
    %%%%%: 5049-block 404
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5049-block 405
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5049-block 406
    #####: 5050:						lWasGraphicDialog = 1 ;
    #####: 5051:						strcpy( lDialogString , "(Xdialog " ) ;
    %%%%%: 5051-block 407
        -: 5052:				}
    #####: 5053:				else if ( dialogName( ) )
    %%%%%: 5053-block 408
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5054:				{
    #####: 5055:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"dialog");return 0;}
    %%%%%: 5055-block 410
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5055-block 411
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5055-block 412
    #####: 5056:						if ( isTerminalRunning( ) )
    %%%%%: 5056-block 413
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5057:						{
    #####: 5058:								strcpy( lDialogString , "(dialog " ) ;
    %%%%%: 5058-block 415
        -: 5059:						}
        -: 5060:						else
        -: 5061:						{
    #####: 5062:								lWasXterm = 1 ;
    #####: 5063:								strcpy( lDialogString , terminalName() ) ;
    %%%%%: 5063-block 416
call    0 never executed
    #####: 5064:								strcat( lDialogString , "'(" ) ;
    #####: 5065:								strcat( lDialogString , dialogName() ) ;
call    0 never executed
    #####: 5066:								strcat( lDialogString , " " ) ;
        -: 5067:						}
        -: 5068:				}
    #####: 5069:				else if ( isTerminalRunning( ) )
    %%%%%: 5069-block 419
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5070:				{
    #####: 5071:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"whiptail");return 0;}
    %%%%%: 5071-block 421
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5071-block 422
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5071-block 423
    #####: 5072:						strcpy( lDialogString , "(whiptail " ) ;
    %%%%%: 5072-block 424
        -: 5073:				}
        -: 5074:				else
        -: 5075:				{
    #####: 5076:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"whiptail");return 0;}
    %%%%%: 5076-block 425
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5076-block 426
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5076-block 427
    #####: 5077:						lWasXterm = 1 ;
    #####: 5078:						strcpy( lDialogString , terminalName() ) ;
    %%%%%: 5078-block 428
call    0 never executed
    #####: 5079:						strcat( lDialogString , "'(whiptail " ) ;
        -: 5080:				}
        -: 5081:
    #####: 5082:				if ( aTitle && strlen(aTitle) )
    %%%%%: 5082-block 430
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5082-block 431
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5083:				{
    #####: 5084:						strcat(lDialogString, "--title \"") ;
    #####: 5085:						strcat(lDialogString, aTitle) ;
    #####: 5086:						strcat(lDialogString, "\" ") ;
    %%%%%: 5086-block 432
        -: 5087:				}
        -: 5088:
    #####: 5089:				if ( !xdialogPresent() && !gdialogPresent() )
    %%%%%: 5089-block 433
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5089-block 435
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 5090:				{
    #####: 5091:						if ( aDialogType && ( !strcmp( "okcancel" , aDialogType ) || !strcmp( "yesno" , aDialogType )
    %%%%%: 5091-block 437
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5091-block 438
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5091-block 439
branch  4 never executed (fallthrough)
branch  5 never executed
    #####: 5092:								|| !strcmp( "yesnocancel" , aDialogType ) ) )
    %%%%%: 5092-block 440
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 5093:						{
    #####: 5094:								strcat(lDialogString, "--backtitle \"") ;
    #####: 5095:								strcat(lDialogString, "tab: move focus") ;
    #####: 5096:								strcat(lDialogString, "\" ") ;
    %%%%%: 5096-block 441
        -: 5097:						}
        -: 5098:				}
        -: 5099:
    #####: 5100:				if ( aDialogType && ! strcmp( "okcancel" , aDialogType ) )
    %%%%%: 5100-block 442
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5100-block 443
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5101:				{
    #####: 5102:						if ( ! aDefaultButton )
    %%%%%: 5102-block 444
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 5103:						{
    #####: 5104:								strcat( lDialogString , "--defaultno " ) ;
    %%%%%: 5104-block 445
        -: 5105:						}
    #####: 5106:						strcat( lDialogString ,
    %%%%%: 5106-block 446
        -: 5107:										"--yes-label \"Ok\" --no-label \"Cancel\" --yesno " ) ;
        -: 5108:				}
    #####: 5109:				else if ( aDialogType && ! strcmp( "yesno" , aDialogType ) )
    %%%%%: 5109-block 447
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5109-block 448
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5110:				{
    #####: 5111:						if ( ! aDefaultButton )
    %%%%%: 5111-block 449
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 5112:						{
    #####: 5113:								strcat( lDialogString , "--defaultno " ) ;
    %%%%%: 5113-block 450
        -: 5114:						}
    #####: 5115:						strcat( lDialogString , "--yesno " ) ;
    %%%%%: 5115-block 451
        -: 5116:				}
    #####: 5117:				else if (aDialogType && !strcmp("yesnocancel", aDialogType))
    %%%%%: 5117-block 452
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5117-block 453
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5118:				{
    #####: 5119:						if (!aDefaultButton)
    %%%%%: 5119-block 454
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 5120:						{
    #####: 5121:								strcat(lDialogString, "--defaultno ");
    %%%%%: 5121-block 455
        -: 5122:						}
    #####: 5123:						strcat(lDialogString, "--menu ");
    %%%%%: 5123-block 456
        -: 5124:				}
        -: 5125:				else
        -: 5126:				{
    #####: 5127:						strcat( lDialogString , "--msgbox " ) ;
    %%%%%: 5127-block 457
        -: 5128:
        -: 5129:				}
    #####: 5130:				strcat( lDialogString , "\"" ) ;
    #####: 5131:				if ( aMessage && strlen(aMessage) )
    %%%%%: 5131-block 458
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5131-block 459
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5132:				{
    #####: 5133:						strcat(lDialogString, aMessage) ;
    %%%%%: 5133-block 460
        -: 5134:				}
    #####: 5135:				strcat(lDialogString, "\" ");
        -: 5136:
    #####: 5137:				if ( lWasGraphicDialog )
    %%%%%: 5137-block 461
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 5138:				{
    #####: 5139:						if (aDialogType && !strcmp("yesnocancel", aDialogType))
    %%%%%: 5139-block 462
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5139-block 463
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5140:						{
    #####: 5141:								strcat(lDialogString,"0 60 0 Yes \"\" No \"\") 2>/tmp/tinyfd.txt;\
    %%%%%: 5141-block 464
        -: 5142:if [ $? = 0 ];then tinyfdBool=1;else tinyfdBool=0;fi;\
        -: 5143:tinyfdRes=$(cat /tmp/tinyfd.txt);echo $tinyfdBool$tinyfdRes") ;
        -: 5144:						}
        -: 5145:						else
        -: 5146:						{
    #####: 5147:								strcat(lDialogString,
    %%%%%: 5147-block 465
        -: 5148:								   "10 60 ) 2>&1;if [ $? = 0 ];then echo 1;else echo 0;fi");
        -: 5149:						}
        -: 5150:				}
        -: 5151:				else
        -: 5152:				{
    #####: 5153:						if (aDialogType && !strcmp("yesnocancel", aDialogType))
    %%%%%: 5153-block 467
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5153-block 468
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5154:						{
    #####: 5155:								strcat(lDialogString,"0 60 0 Yes \"\" No \"\" >/dev/tty ) 2>/tmp/tinyfd.txt;\
        -: 5156:				if [ $? = 0 ];then tinyfdBool=1;else tinyfdBool=0;fi;\
        -: 5157:				tinyfdRes=$(cat /tmp/tinyfd.txt);echo $tinyfdBool$tinyfdRes") ;
        -: 5158:
    #####: 5159:								if ( lWasXterm )
    %%%%%: 5159-block 469
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 5160:								{
    #####: 5161:										strcat(lDialogString," >/tmp/tinyfd0.txt';cat /tmp/tinyfd0.txt");
    %%%%%: 5161-block 470
        -: 5162:								}
        -: 5163:								else
        -: 5164:								{
    #####: 5165:										strcat(lDialogString, "; clear >/dev/tty") ;
    %%%%%: 5165-block 471
        -: 5166:								}
        -: 5167:						}
        -: 5168:						else
        -: 5169:						{
    #####: 5170:								strcat(lDialogString, "10 60 >/dev/tty) 2>&1;if [ $? = 0 ];");
    #####: 5171:								if ( lWasXterm )
    %%%%%: 5171-block 473
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 5172:								{
    #####: 5173:										strcat( lDialogString ,
    %%%%%: 5173-block 474
        -: 5174:"then\n\techo 1\nelse\n\techo 0\nfi >/tmp/tinyfd.txt';cat /tmp/tinyfd.txt;rm /tmp/tinyfd.txt");
        -: 5175:								}
        -: 5176:								else
        -: 5177:								{
    #####: 5178:								   strcat(lDialogString,
    %%%%%: 5178-block 475
        -: 5179:												  "then echo 1;else echo 0;fi;clear >/dev/tty");
        -: 5180:								}
        -: 5181:						}
        -: 5182:				}
        -: 5183:		}
    #####: 5184:		else if (  !isTerminalRunning() && terminalName() )
    %%%%%: 5184-block 477
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5184-block 479
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 5185:		{
    #####: 5186:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"basicinput");return 0;}
    %%%%%: 5186-block 481
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5186-block 482
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5186-block 483
    #####: 5187:				strcpy( lDialogString , terminalName() ) ;
    %%%%%: 5187-block 484
call    0 never executed
    #####: 5188:				strcat( lDialogString , "'" ) ;
    #####: 5189:				if ( !gWarningDisplayed && !tinyfd_forceConsole)
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5189-block 486
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5190:				{
    #####: 5191:						gWarningDisplayed = 1 ;
    #####: 5192:						strcat( lDialogString , "echo \"" ) ;
    #####: 5193:						strcat( lDialogString, gTitle) ;
    #####: 5194:						strcat( lDialogString , "\";" ) ;
    #####: 5195:						strcat( lDialogString , "echo \"" ) ;
    #####: 5196:						strcat( lDialogString, tinyfd_needs) ;
    #####: 5197:						strcat( lDialogString , "\";echo;echo;" ) ;
    %%%%%: 5197-block 487
        -: 5198:				}
    #####: 5199:				if ( aTitle && strlen(aTitle) )
    %%%%%: 5199-block 488
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5199-block 489
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5200:				{
    #####: 5201:						strcat( lDialogString , "echo \"" ) ;
    #####: 5202:						strcat( lDialogString, aTitle) ;
    #####: 5203:						strcat( lDialogString , "\";echo;" ) ;
    %%%%%: 5203-block 490
        -: 5204:				}
    #####: 5205:				if ( aMessage && strlen(aMessage) )
    %%%%%: 5205-block 491
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5205-block 492
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5206:				{
    #####: 5207:						strcat( lDialogString , "echo \"" ) ;
    #####: 5208:						strcat( lDialogString, aMessage) ;
    #####: 5209:						strcat( lDialogString , "\"; " ) ;
    %%%%%: 5209-block 493
        -: 5210:				}
    #####: 5211:				if ( aDialogType && !strcmp("yesno",aDialogType) )
    %%%%%: 5211-block 494
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5211-block 495
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5212:				{
    #####: 5213:						strcat( lDialogString , "echo -n \"y/n: \"; " ) ;
    #####: 5214:						strcat( lDialogString , "stty sane -echo;" ) ;
    #####: 5215:						strcat( lDialogString ,
        -: 5216:								"answer=$( while ! head -c 1 | grep -i [ny];do true ;done);");
    #####: 5217:						strcat( lDialogString ,
        -: 5218:								"if echo \"$answer\" | grep -iq \"^y\";then\n");
    #####: 5219:						strcat( lDialogString , "\techo 1\nelse\n\techo 0\nfi" ) ;
    %%%%%: 5219-block 496
        -: 5220:				}
    #####: 5221:				else if ( aDialogType && !strcmp("okcancel",aDialogType) )
    %%%%%: 5221-block 497
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5221-block 498
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5222:				{
    #####: 5223:						strcat( lDialogString , "echo -n \"[O]kay/[C]ancel: \"; " ) ;
    #####: 5224:						strcat( lDialogString , "stty sane -echo;" ) ;
    #####: 5225:						strcat( lDialogString ,
        -: 5226:								"answer=$( while ! head -c 1 | grep -i [oc];do true ;done);");
    #####: 5227:						strcat( lDialogString ,
        -: 5228:								"if echo \"$answer\" | grep -iq \"^o\";then\n");
    #####: 5229:						strcat( lDialogString , "\techo 1\nelse\n\techo 0\nfi" ) ;
    %%%%%: 5229-block 499
        -: 5230:				}
    #####: 5231:				else if ( aDialogType && !strcmp("yesnocancel",aDialogType) )
    %%%%%: 5231-block 500
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5231-block 501
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5232:				{
    #####: 5233:						strcat( lDialogString , "echo -n \"[Y]es/[N]o/[C]ancel: \"; " ) ;
    #####: 5234:						strcat( lDialogString , "stty sane -echo;" ) ;
    #####: 5235:						strcat( lDialogString ,
        -: 5236:								"answer=$( while ! head -c 1 | grep -i [nyc];do true ;done);");
    #####: 5237:						strcat( lDialogString ,
        -: 5238:								"if echo \"$answer\" | grep -iq \"^y\";then\n\techo 1\n");
    #####: 5239:						strcat( lDialogString , "elif echo \"$answer\" | grep -iq \"^n\";then\n\techo 2\n" ) ;
    #####: 5240:						strcat( lDialogString , "else\n\techo 0\nfi" ) ;
    %%%%%: 5240-block 502
        -: 5241:				}
        -: 5242:				else
        -: 5243:				{
    #####: 5244:						strcat(lDialogString , "echo -n \"press enter to continue \"; ");
    #####: 5245:						strcat( lDialogString , "stty sane -echo;" ) ;
    #####: 5246:						strcat( lDialogString ,
    %%%%%: 5246-block 503
        -: 5247:								"answer=$( while ! head -c 1;do true ;done);echo 1");
        -: 5248:				}
    #####: 5249:				strcat( lDialogString ,
    %%%%%: 5249-block 504
        -: 5250:						" >/tmp/tinyfd.txt';cat /tmp/tinyfd.txt;rm /tmp/tinyfd.txt");
        -: 5251:		}
    #####: 5252:		else if ( !isTerminalRunning() && pythonDbusPresent() && !strcmp("ok" , aDialogType) )
    %%%%%: 5252-block 505
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5252-block 507
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 5252-block 509
branch  6 never executed (fallthrough)
branch  7 never executed
        -: 5253:		{
    #####: 5254:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"python-dbus");return 1;}
    %%%%%: 5254-block 510
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5254-block 511
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5254-block 512
    #####: 5255:				strcpy( lDialogString , gPythonName ) ;
    #####: 5256:				strcat( lDialogString ," -c \"import dbus;bus=dbus.SessionBus();");
    #####: 5257:				strcat( lDialogString ,"notif=bus.get_object('org.freedesktop.Notifications','/org/freedesktop/Notifications');" ) ;
    #####: 5258:				strcat( lDialogString ,"notify=dbus.Interface(notif,'org.freedesktop.Notifications');" ) ;
    #####: 5259:				strcat( lDialogString ,"notify.Notify('',0,'" ) ;
    #####: 5260:				if ( aIconType && strlen(aIconType) )
    %%%%%: 5260-block 513
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5260-block 514
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5261:				{
    #####: 5262:						strcat( lDialogString , aIconType ) ;
    %%%%%: 5262-block 515
        -: 5263:				}
    #####: 5264:				strcat(lDialogString, "','") ;
    #####: 5265:				if ( aTitle && strlen(aTitle) )
    %%%%%: 5265-block 516
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5265-block 517
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5266:				{
    #####: 5267:						strcat(lDialogString, aTitle) ;
    %%%%%: 5267-block 518
        -: 5268:				}
    #####: 5269:				strcat(lDialogString, "','") ;
    #####: 5270:				if ( aMessage && strlen(aMessage) )
    %%%%%: 5270-block 519
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5270-block 520
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5271:				{
    #####: 5272:						lpDialogString = lDialogString + strlen(lDialogString);
    #####: 5273:						tfd_replaceSubStr( aMessage , "\n" , "\\n" , lpDialogString ) ;
    %%%%%: 5273-block 521
call    0 never executed
        -: 5274:				}
    #####: 5275:				strcat(lDialogString, "','','',5000)\"") ;
    %%%%%: 5275-block 522
        -: 5276:		}
    #####: 5277:		else if ( !isTerminalRunning() && (perlPresent() >= 2)  && !strcmp("ok" , aDialogType) )
    %%%%%: 5277-block 523
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5277-block 525
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 5277-block 527
branch  6 never executed (fallthrough)
branch  7 never executed
        -: 5278:		{
    #####: 5279:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"perl-dbus");return 1;}
    %%%%%: 5279-block 528
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5279-block 529
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5279-block 530
        -: 5280:
    #####: 5281:								strcpy( lDialogString ,  "perl -e \"use Net::DBus;\
        -: 5282:my \\$sessionBus = Net::DBus->session;\
        -: 5283:my \\$notificationsService = \\$sessionBus->get_service('org.freedesktop.Notifications');\
        -: 5284:my \\$notificationsObject = \\$notificationsService->get_object('/org/freedesktop/Notifications',\
        -: 5285:'org.freedesktop.Notifications');");
        -: 5286:
    #####: 5287:								sprintf( lDialogString + strlen(lDialogString),
    %%%%%: 5287-block 531
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5287-block 532
    %%%%%: 5287-block 533
    %%%%%: 5287-block 534
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5287-block 535
    %%%%%: 5287-block 536
    %%%%%: 5287-block 537
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 5287-block 538
    %%%%%: 5287-block 539
    %%%%%: 5287-block 540
        -: 5288:"my \\$notificationId;\\$notificationId = \\$notificationsObject->Notify(shift, 0, '%s', '%s', '%s', [], {}, -1);\" ",
        -: 5289:														aIconType?aIconType:"", aTitle?aTitle:"", aMessage?aMessage:"" ) ;
        -: 5290:		}
    #####: 5291:		else if ( !isTerminalRunning() && notifysendPresent() && !strcmp("ok" , aDialogType) )
    %%%%%: 5291-block 541
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5291-block 543
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 5291-block 545
branch  6 never executed (fallthrough)
branch  7 never executed
        -: 5292:		{
        -: 5293:
    #####: 5294:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"notifysend");return 1;}
    %%%%%: 5294-block 546
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5294-block 547
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5294-block 548
    #####: 5295:				strcpy( lDialogString , "notify-send" ) ;
    #####: 5296:				if ( aIconType && strlen(aIconType) )
    %%%%%: 5296-block 549
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5296-block 550
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5297:				{
    #####: 5298:						strcat( lDialogString , " -i '" ) ;
    #####: 5299:						strcat( lDialogString , aIconType ) ;
    #####: 5300:						strcat( lDialogString , "'" ) ;
    %%%%%: 5300-block 551
        -: 5301:				}
    #####: 5302:		strcat( lDialogString , " \"" ) ;
    #####: 5303:				if ( aTitle && strlen(aTitle) )
    %%%%%: 5303-block 552
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5303-block 553
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5304:				{
    #####: 5305:						strcat(lDialogString, aTitle) ;
    #####: 5306:						strcat( lDialogString , " | " ) ;
    %%%%%: 5306-block 554
        -: 5307:				}
    #####: 5308:				if ( aMessage && strlen(aMessage) )
    %%%%%: 5308-block 555
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5308-block 556
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5309:				{
    #####: 5310:			tfd_replaceSubStr( aMessage , "\n\t" , " |  " , lBuff ) ;
    %%%%%: 5310-block 557
call    0 never executed
    #####: 5311:			tfd_replaceSubStr( aMessage , "\n" , " | " , lBuff ) ;
call    0 never executed
    #####: 5312:			tfd_replaceSubStr( aMessage , "\t" , "  " , lBuff ) ;
call    0 never executed
    #####: 5313:						strcat(lDialogString, lBuff) ;
        -: 5314:				}
    #####: 5315:				strcat( lDialogString , "\"" ) ;
    %%%%%: 5315-block 561
        -: 5316:		}
        -: 5317:		else
        -: 5318:		{
    #####: 5319:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"basicinput");return 0;}
    %%%%%: 5319-block 562
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5319-block 563
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5319-block 564
    #####: 5320:				if ( !gWarningDisplayed && !tinyfd_forceConsole)
    %%%%%: 5320-block 565
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5320-block 566
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5321:				{
    #####: 5322:						gWarningDisplayed = 1 ;
    #####: 5323:						printf("\n\n%s\n", gTitle);
    %%%%%: 5323-block 567
call    0 never executed
    #####: 5324:						printf("%s\n\n", tinyfd_needs);
call    0 never executed
        -: 5325:				}
    #####: 5326:				if ( aTitle && strlen(aTitle) )
    %%%%%: 5326-block 569
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5326-block 570
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5327:				{
    #####: 5328:						printf("\n%s\n", aTitle);
    %%%%%: 5328-block 571
call    0 never executed
        -: 5329:				}
        -: 5330:
    #####: 5331:				tcgetattr(0, &infoOri);
    %%%%%: 5331-block 572
call    0 never executed
    #####: 5332:				tcgetattr(0, &info);
call    0 never executed
    #####: 5333:				info.c_lflag &= ~ICANON;
    #####: 5334:				info.c_cc[VMIN] = 1;
    #####: 5335:				info.c_cc[VTIME] = 0;
    #####: 5336:				tcsetattr(0, TCSANOW, &info);
call    0 never executed
    #####: 5337:				if ( aDialogType && !strcmp("yesno",aDialogType) )
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5337-block 576
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5338:				{
        -: 5339:						do
        -: 5340:						{
    #####: 5341:								if ( aMessage && strlen(aMessage) )
    %%%%%: 5341-block 577
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5341-block 578
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5342:								{
    #####: 5343:										printf("\n%s\n",aMessage);
    %%%%%: 5343-block 579
call    0 never executed
        -: 5344:								}
    #####: 5345:								printf("y/n: "); fflush(stdout);
    %%%%%: 5345-block 580
call    0 never executed
call    1 never executed
    #####: 5346:								lChar = (char) tolower( getchar() ) ;
call    0 never executed
    #####: 5347:								printf("\n\n");
call    0 never executed
        -: 5348:						}
    #####: 5349:						while ( lChar != 'y' && lChar != 'n' );
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5349-block 585
branch  2 never executed
branch  3 never executed (fallthrough)
    #####: 5350:						lResult = lChar == 'y' ? 1 : 0 ;
    %%%%%: 5350-block 586
        -: 5351:				}
    #####: 5352:				else if ( aDialogType && !strcmp("okcancel",aDialogType) )
    %%%%%: 5352-block 587
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5352-block 588
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5353:				{
        -: 5354:						do
        -: 5355:						{
    #####: 5356:								if ( aMessage && strlen(aMessage) )
    %%%%%: 5356-block 589
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5356-block 590
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5357:								{
    #####: 5358:										printf("\n%s\n",aMessage);
    %%%%%: 5358-block 591
call    0 never executed
        -: 5359:								}
    #####: 5360:								printf("[O]kay/[C]ancel: "); fflush(stdout);
    %%%%%: 5360-block 592
call    0 never executed
call    1 never executed
    #####: 5361:								lChar = (char) tolower( getchar() ) ;
call    0 never executed
    #####: 5362:								printf("\n\n");
call    0 never executed
        -: 5363:						}
    #####: 5364:						while ( lChar != 'o' && lChar != 'c' );
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5364-block 597
branch  2 never executed
branch  3 never executed (fallthrough)
    #####: 5365:						lResult = lChar == 'o' ? 1 : 0 ;
    %%%%%: 5365-block 598
        -: 5366:				}
    #####: 5367:				else if ( aDialogType && !strcmp("yesnocancel",aDialogType) )
    %%%%%: 5367-block 599
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5367-block 600
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5368:				{
        -: 5369:						do
        -: 5370:						{
    #####: 5371:								if ( aMessage && strlen(aMessage) )
    %%%%%: 5371-block 601
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5371-block 602
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5372:								{
    #####: 5373:										printf("\n%s\n",aMessage);
    %%%%%: 5373-block 603
call    0 never executed
        -: 5374:								}
    #####: 5375:								printf("[Y]es/[N]o/[C]ancel: "); fflush(stdout);
    %%%%%: 5375-block 604
call    0 never executed
call    1 never executed
    #####: 5376:								lChar = (char) tolower( getchar() ) ;
call    0 never executed
    #####: 5377:								printf("\n\n");
call    0 never executed
        -: 5378:						}
    #####: 5379:						while ( lChar != 'y' && lChar != 'n' && lChar != 'c' );
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5379-block 609
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5379-block 610
branch  4 never executed
branch  5 never executed (fallthrough)
    #####: 5380:						lResult = (lChar == 'y') ? 1 : (lChar == 'n') ? 2 : 0 ;
    %%%%%: 5380-block 611
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5380-block 612
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5380-block 613
    %%%%%: 5380-block 614
    %%%%%: 5380-block 615
    %%%%%: 5380-block 616
    %%%%%: 5380-block 617
        -: 5381:				}
        -: 5382:				else
        -: 5383:				{
    #####: 5384:						if ( aMessage && strlen(aMessage) )
    %%%%%: 5384-block 618
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5384-block 619
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5385:						{
    #####: 5386:								printf("\n%s\n\n",aMessage);
    %%%%%: 5386-block 620
call    0 never executed
        -: 5387:						}
    #####: 5388:						printf("press enter to continue "); fflush(stdout);
    %%%%%: 5388-block 621
call    0 never executed
call    1 never executed
    #####: 5389:						getchar() ;
call    0 never executed
    #####: 5390:						printf("\n\n");
call    0 never executed
    #####: 5391:						lResult = 1 ;
        -: 5392:				}
    #####: 5393:				tcsetattr(0, TCSANOW, &infoOri);
    %%%%%: 5393-block 626
call    0 never executed
    #####: 5394:				free(lDialogString);
    #####: 5395:				return lResult ;
        -: 5396:		}
        -: 5397:
    #####: 5398:		if (tinyfd_verbose) printf( "lDialogString: %s\n" , lDialogString ) ;
    %%%%%: 5398-block 628
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5398-block 629
call    2 never executed
        -: 5399:
    #####: 5400:		if ( ! ( lIn = popen( lDialogString , "r" ) ) )
    %%%%%: 5400-block 630
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5401:		{
    #####: 5402:				free(lDialogString);
    #####: 5403:				return 0 ;
    %%%%%: 5403-block 632
        -: 5404:		}
    #####: 5405:		while ( fgets( lBuff , sizeof( lBuff ) , lIn ) != NULL )
    %%%%%: 5405-block 633
    %%%%%: 5405-block 634
call    0 never executed
branch  1 never executed
branch  2 never executed (fallthrough)
        -: 5406:		{}
        -: 5407:
    #####: 5408:		pclose( lIn ) ;
    %%%%%: 5408-block 636
call    0 never executed
        -: 5409:
        -: 5410:		/* printf( "lBuff: %s len: %lu \n" , lBuff , strlen(lBuff) ) ; */
    #####: 5411:		if ( strlen( lBuff ) && lBuff[strlen( lBuff ) -1] == '\n' )
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5411-block 638
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5412:		{
    #####: 5413:				lBuff[strlen( lBuff ) -1] = '\0' ;
    %%%%%: 5413-block 639
        -: 5414:		}
        -: 5415:		/* printf( "lBuff1: %s len: %lu \n" , lBuff , strlen(lBuff) ) ; */
        -: 5416:
    #####: 5417:		if (aDialogType && !strcmp("yesnocancel", aDialogType))
    %%%%%: 5417-block 640
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5417-block 641
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5418:		{
    #####: 5419:				if ( lBuff[0]=='1' )
    %%%%%: 5419-block 642
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 5420:				{
    #####: 5421:						if ( !strcmp( lBuff+1 , "Yes" )) strcpy(lBuff,"1");
    %%%%%: 5421-block 643
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5421-block 644
    #####: 5422:						else if ( !strcmp( lBuff+1 , "No" )) strcpy(lBuff,"2");
    %%%%%: 5422-block 645
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5422-block 646
        -: 5423:				}
        -: 5424:		}
        -: 5425:		/* printf( "lBuff2: %s len: %lu \n" , lBuff , strlen(lBuff) ) ; */
        -: 5426:
    #####: 5427:		lResult =  !strcmp( lBuff , "2" ) ? 2 : !strcmp( lBuff , "1" ) ? 1 : 0;
    %%%%%: 5427-block 647
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5427-block 648
    %%%%%: 5427-block 649
        -: 5428:
        -: 5429:		/* printf( "lResult: %d\n" , lResult ) ; */
    #####: 5430:		free(lDialogString);
    #####: 5431:		return lResult ;
    %%%%%: 5431-block 650
        -: 5432:}
        -: 5433:
        -: 5434:
        -: 5435:/* return has only meaning for tinyfd_query */
function tinyfd_notifyPopup called 0 returned 0% blocks executed 0%
    #####: 5436:int tinyfd_notifyPopup(
        -: 5437:		char const * aTitle , /* NULL or "" */
        -: 5438:		char const * aMessage , /* NULL or ""  may contain \n and \t */
        -: 5439:		char const * aIconType ) /* "info" "warning" "error" */
        -: 5440:{
        -: 5441:		char lBuff[MAX_PATH_OR_CMD];
    #####: 5442:		char * lDialogString = NULL ;
        -: 5443:		char * lpDialogString ;
        -: 5444:		FILE * lIn ;
        -: 5445:		size_t lTitleLen ;
        -: 5446:		size_t lMessageLen ;
        -: 5447:
    #####: 5448:				if (tfd_quoteDetected(aTitle)) return tinyfd_notifyPopup("INVALID TITLE WITH QUOTES", aMessage, aIconType);
    %%%%%: 5448-block 2
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5448-block 4
call    3 never executed
    #####: 5449:				if (tfd_quoteDetected(aMessage)) return tinyfd_notifyPopup(aTitle, "INVALID MESSAGE WITH QUOTES", aIconType);
    %%%%%: 5449-block 6
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5449-block 8
call    3 never executed
        -: 5450:
    #####: 5451:		if ( getenv("SSH_TTY") && !dunstifyPresent() && !dunstPresent() )
    %%%%%: 5451-block 10
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5451-block 12
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 5451-block 14
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
        -: 5452:		{
    #####: 5453:			return tinyfd_messageBox(aTitle, aMessage, "ok", aIconType, 0);
    %%%%%: 5453-block 16
call    0 never executed
        -: 5454:		}
        -: 5455:
    #####: 5456:		lTitleLen =  aTitle ? strlen(aTitle) : 0 ;
    %%%%%: 5456-block 18
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5456-block 19
    %%%%%: 5456-block 20
    #####: 5457:		lMessageLen =  aMessage ? strlen(aMessage) : 0 ;
    %%%%%: 5457-block 21
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5457-block 22
    %%%%%: 5457-block 23
    #####: 5458:		if ( !aTitle || strcmp(aTitle,"tinyfd_query") )
    %%%%%: 5458-block 24
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5458-block 25
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5459:		{
    #####: 5460:			lDialogString = (char *) malloc( MAX_PATH_OR_CMD + lTitleLen + lMessageLen );
    %%%%%: 5460-block 26
        -: 5461:		}
        -: 5462:
    #####: 5463:		if ( getenv("SSH_TTY") )
    %%%%%: 5463-block 27
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5464:		{
    #####: 5465:			if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"dunst");return 1;}
    %%%%%: 5465-block 29
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5465-block 30
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5465-block 31
    #####: 5466:			strcpy( lDialogString , "notify-send \"" ) ;
    #####: 5467:			if ( aTitle && strlen(aTitle) )
    %%%%%: 5467-block 32
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5467-block 33
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5468:			{
    #####: 5469:				strcat( lDialogString , aTitle ) ;
    #####: 5470:				strcat( lDialogString , "\" \"" ) ;
    %%%%%: 5470-block 34
        -: 5471:			}
    #####: 5472:			if ( aMessage && strlen(aMessage) )
    %%%%%: 5472-block 35
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5472-block 36
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5473:			{
    #####: 5474:				strcat(lDialogString, aMessage) ;
    %%%%%: 5474-block 37
        -: 5475:			}
    #####: 5476:			strcat( lDialogString , "\"" ) ;
    %%%%%: 5476-block 38
        -: 5477:		}
    #####: 5478:		else if ( osascriptPresent( ) )
    %%%%%: 5478-block 39
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5479:		{
    #####: 5480:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"applescript");return 1;}
    %%%%%: 5480-block 41
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5480-block 42
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5480-block 43
        -: 5481:
    #####: 5482:				strcpy( lDialogString , "osascript ");
    #####: 5483:				if ( ! osx9orBetter() ) strcat( lDialogString , " -e 'tell application \"System Events\"' -e 'Activate'");
    %%%%%: 5483-block 44
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5483-block 46
    #####: 5484:				strcat( lDialogString , " -e 'try' -e 'display notification \"") ;
    #####: 5485:				if ( aMessage && strlen(aMessage) )
    %%%%%: 5485-block 47
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5485-block 48
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5486:				{
    #####: 5487:						strcat(lDialogString, aMessage) ;
    %%%%%: 5487-block 49
        -: 5488:				}
    #####: 5489:				strcat(lDialogString, " \" ") ;
    #####: 5490:				if ( aTitle && strlen(aTitle) )
    %%%%%: 5490-block 50
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5490-block 51
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5491:				{
    #####: 5492:						strcat(lDialogString, "with title \"") ;
    #####: 5493:						strcat(lDialogString, aTitle) ;
    #####: 5494:						strcat(lDialogString, "\" ") ;
    %%%%%: 5494-block 52
        -: 5495:				}
        -: 5496:
    #####: 5497:				strcat( lDialogString, "' -e 'end try'") ;
    #####: 5498:				if ( ! osx9orBetter() ) strcat( lDialogString, " -e 'end tell'") ;
    %%%%%: 5498-block 53
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5498-block 55
        -: 5499:		}
    #####: 5500:		else if ( tfd_kdialogPresent() )
    %%%%%: 5500-block 56
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5501:		{
    #####: 5502:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"kdialog");return 1;}
    %%%%%: 5502-block 58
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5502-block 59
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5502-block 60
    #####: 5503:				strcpy( lDialogString , "kdialog" ) ;
        -: 5504:
    #####: 5505:				if ( aIconType && strlen(aIconType) )
    %%%%%: 5505-block 61
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5505-block 62
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5506:				{
    #####: 5507:						strcat( lDialogString , " --icon '" ) ;
    #####: 5508:						strcat( lDialogString , aIconType ) ;
    #####: 5509:						strcat( lDialogString , "'" ) ;
    %%%%%: 5509-block 63
        -: 5510:				}
    #####: 5511:				if ( aTitle && strlen(aTitle) )
    %%%%%: 5511-block 64
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5511-block 65
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5512:				{
    #####: 5513:						strcat( lDialogString , " --title \"" ) ;
    #####: 5514:						strcat( lDialogString , aTitle ) ;
    #####: 5515:						strcat( lDialogString , "\"" ) ;
    %%%%%: 5515-block 66
        -: 5516:				}
        -: 5517:
    #####: 5518:				strcat( lDialogString , " --passivepopup" ) ;
    #####: 5519:				strcat( lDialogString , " \"" ) ;
    #####: 5520:				if ( aMessage )
    %%%%%: 5520-block 67
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 5521:				{
    #####: 5522:						strcat( lDialogString , aMessage ) ;
    %%%%%: 5522-block 68
        -: 5523:				}
    #####: 5524:				strcat( lDialogString , " \" 5" ) ;
    %%%%%: 5524-block 69
        -: 5525:		}
    #####: 5526:		else if ( tfd_yadPresent() )
    %%%%%: 5526-block 70
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5527:		{
    #####: 5528:			if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"yad");return 1;}
    %%%%%: 5528-block 72
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5528-block 73
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5528-block 74
    #####: 5529:			strcpy( lDialogString , "yad --notification");
        -: 5530:
    #####: 5531:			if ( aIconType && strlen( aIconType ) )
    %%%%%: 5531-block 75
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5531-block 76
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5532:			{
    #####: 5533:					strcat( lDialogString , " --image=\"");
    #####: 5534:					strcat( lDialogString , aIconType ) ;
    #####: 5535:					strcat( lDialogString , "\"" ) ;
    %%%%%: 5535-block 77
        -: 5536:			}
        -: 5537:
    #####: 5538:			strcat( lDialogString , " --text=\"" ) ;
    #####: 5539:			if ( aTitle && strlen(aTitle) )
    %%%%%: 5539-block 78
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5539-block 79
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5540:			{
    #####: 5541:					strcat(lDialogString, aTitle) ;
    #####: 5542:					strcat(lDialogString, "\n") ;
    %%%%%: 5542-block 80
        -: 5543:			}
    #####: 5544:			if ( aMessage && strlen( aMessage ) )
    %%%%%: 5544-block 81
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5544-block 82
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5545:			{
    #####: 5546:					strcat( lDialogString , aMessage ) ;
    %%%%%: 5546-block 83
        -: 5547:			}
    #####: 5548:			strcat( lDialogString , " \"" ) ;
    %%%%%: 5548-block 84
        -: 5549:		}
    #####: 5550:		else if ( perlPresent() >= 2 )
    %%%%%: 5550-block 85
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5551:		{
    #####: 5552:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"perl-dbus");return 1;}
    %%%%%: 5552-block 87
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5552-block 88
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5552-block 89
        -: 5553:
    #####: 5554:				strcpy( lDialogString , "perl -e \"use Net::DBus;\
        -: 5555:my \\$sessionBus = Net::DBus->session;\
        -: 5556:my \\$notificationsService = \\$sessionBus->get_service('org.freedesktop.Notifications');\
        -: 5557:my \\$notificationsObject = \\$notificationsService->get_object('/org/freedesktop/Notifications',\
        -: 5558:'org.freedesktop.Notifications');");
        -: 5559:
    #####: 5560:				sprintf( lDialogString + strlen(lDialogString) ,
    %%%%%: 5560-block 90
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5560-block 91
    %%%%%: 5560-block 92
    %%%%%: 5560-block 93
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5560-block 94
    %%%%%: 5560-block 95
    %%%%%: 5560-block 96
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 5560-block 97
    %%%%%: 5560-block 98
    %%%%%: 5560-block 99
        -: 5561:"my \\$notificationId;\\$notificationId = \\$notificationsObject->Notify(shift, 0, '%s', '%s', '%s', [], {}, -1);\" ",
        -: 5562:aIconType?aIconType:"", aTitle?aTitle:"", aMessage?aMessage:"" ) ;
        -: 5563:		}
    #####: 5564:		else if ( pythonDbusPresent( ) )
    %%%%%: 5564-block 100
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5565:		{
    #####: 5566:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"python-dbus");return 1;}
    %%%%%: 5566-block 102
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5566-block 103
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5566-block 104
    #####: 5567:				strcpy( lDialogString , gPythonName ) ;
    #####: 5568:				strcat( lDialogString ," -c \"import dbus;bus=dbus.SessionBus();");
    #####: 5569:				strcat( lDialogString ,"notif=bus.get_object('org.freedesktop.Notifications','/org/freedesktop/Notifications');" ) ;
    #####: 5570:				strcat( lDialogString ,"notify=dbus.Interface(notif,'org.freedesktop.Notifications');" ) ;
    #####: 5571:				strcat( lDialogString ,"notify.Notify('',0,'" ) ;
    #####: 5572:				if ( aIconType && strlen(aIconType) )
    %%%%%: 5572-block 105
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5572-block 106
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5573:				{
    #####: 5574:						strcat( lDialogString , aIconType ) ;
    %%%%%: 5574-block 107
        -: 5575:				}
    #####: 5576:				strcat(lDialogString, "','") ;
    #####: 5577:				if ( aTitle && strlen(aTitle) )
    %%%%%: 5577-block 108
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5577-block 109
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5578:				{
    #####: 5579:						strcat(lDialogString, aTitle) ;
    %%%%%: 5579-block 110
        -: 5580:				}
    #####: 5581:				strcat(lDialogString, "','") ;
    #####: 5582:				if ( aMessage && strlen(aMessage) )
    %%%%%: 5582-block 111
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5582-block 112
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5583:				{
    #####: 5584:						lpDialogString = lDialogString + strlen(lDialogString);
    #####: 5585:						tfd_replaceSubStr( aMessage , "\n" , "\\n" , lpDialogString ) ;
    %%%%%: 5585-block 113
call    0 never executed
        -: 5586:				}
    #####: 5587:				strcat(lDialogString, "','','',5000)\"") ;
    %%%%%: 5587-block 114
        -: 5588:		}
    #####: 5589:		else if ( notifysendPresent() )
    %%%%%: 5589-block 115
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5590:		{
    #####: 5591:			if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"notifysend");return 1;}
    %%%%%: 5591-block 117
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5591-block 118
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5591-block 119
    #####: 5592:			strcpy( lDialogString , "notify-send" ) ;
    #####: 5593:			if ( aIconType && strlen(aIconType) )
    %%%%%: 5593-block 120
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5593-block 121
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5594:			{
    #####: 5595:					strcat( lDialogString , " -i '" ) ;
    #####: 5596:					strcat( lDialogString , aIconType ) ;
    #####: 5597:					strcat( lDialogString , "'" ) ;
    %%%%%: 5597-block 122
        -: 5598:			}
    #####: 5599:			strcat( lDialogString , " \"" ) ;
    #####: 5600:			if ( aTitle && strlen(aTitle) )
    %%%%%: 5600-block 123
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5600-block 124
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5601:			{
    #####: 5602:					strcat(lDialogString, aTitle) ;
    #####: 5603:					strcat( lDialogString , " | " ) ;
    %%%%%: 5603-block 125
        -: 5604:			}
    #####: 5605:			if ( aMessage && strlen(aMessage) )
    %%%%%: 5605-block 126
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5605-block 127
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5606:			{
    #####: 5607:				tfd_replaceSubStr( aMessage , "\n\t" , " |  " , lBuff ) ;
    %%%%%: 5607-block 128
call    0 never executed
    #####: 5608:				tfd_replaceSubStr( aMessage , "\n" , " | " , lBuff ) ;
call    0 never executed
    #####: 5609:				tfd_replaceSubStr( aMessage , "\t" , "  " , lBuff ) ;
call    0 never executed
    #####: 5610:				strcat(lDialogString, lBuff) ;
        -: 5611:			}
    #####: 5612:			strcat( lDialogString , "\"" ) ;
    %%%%%: 5612-block 132
        -: 5613:		}
    #####: 5614:		else if ( (tfd_zenity3Present()>=5) )
    %%%%%: 5614-block 133
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5615:		{
        -: 5616:				/* zenity 2.32 & 3.14 has the notification but with a bug: it doesnt return from it */
        -: 5617:				/* zenity 3.8 show the notification as an alert ok cancel box */
        -: 5618:				/* zenity 3.44 doesn't have the notification (3.42 has it) */
    #####: 5619:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"zenity");return 1;}
    %%%%%: 5619-block 135
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5619-block 136
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5619-block 137
    #####: 5620:				strcpy( lDialogString , "zenity --notification");
        -: 5621:
    #####: 5622:				if ( aIconType && strlen( aIconType ) )
    %%%%%: 5622-block 138
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5622-block 139
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5623:				{
    #####: 5624:						strcat( lDialogString , " --window-icon '");
    #####: 5625:						strcat( lDialogString , aIconType ) ;
    #####: 5626:						strcat( lDialogString , "'" ) ;
    %%%%%: 5626-block 140
        -: 5627:				}
        -: 5628:
    #####: 5629:				strcat( lDialogString , " --text \"" ) ;
    #####: 5630:				if ( aTitle && strlen(aTitle) )
    %%%%%: 5630-block 141
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5630-block 142
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5631:				{
    #####: 5632:						strcat(lDialogString, aTitle) ;
    #####: 5633:						strcat(lDialogString, "\n") ;
    %%%%%: 5633-block 143
        -: 5634:				}
    #####: 5635:				if ( aMessage && strlen( aMessage ) )
    %%%%%: 5635-block 144
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5635-block 145
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5636:				{
    #####: 5637:						strcat( lDialogString , aMessage ) ;
    %%%%%: 5637-block 146
        -: 5638:				}
    #####: 5639:				strcat( lDialogString , " \"" ) ;
    %%%%%: 5639-block 147
        -: 5640:		}
        -: 5641:		else
        -: 5642:		{
    #####: 5643:			if (lDialogString) free(lDialogString);
    %%%%%: 5643-block 148
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5643-block 149
    #####: 5644:			return tinyfd_messageBox(aTitle, aMessage, "ok", aIconType, 0);
    %%%%%: 5644-block 150
call    0 never executed
        -: 5645:		}
        -: 5646:
    #####: 5647:		if (tinyfd_verbose) printf( "lDialogString: %s\n" , lDialogString ) ;
    %%%%%: 5647-block 152
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5647-block 153
call    2 never executed
        -: 5648:
    #####: 5649:		if ( ! ( lIn = popen( lDialogString , "r" ) ) )
    %%%%%: 5649-block 154
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5650:		{
    #####: 5651:				free(lDialogString);
    #####: 5652:				return 0 ;
    %%%%%: 5652-block 156
        -: 5653:		}
        -: 5654:
    #####: 5655:		pclose( lIn ) ;
    %%%%%: 5655-block 157
call    0 never executed
    #####: 5656:		free(lDialogString);
    #####: 5657:		return 1;
        -: 5658:}
        -: 5659:
        -: 5660:
        -: 5661:/* returns NULL on cancel */
function tinyfd_inputBox called 0 returned 0% blocks executed 0%
    #####: 5662:char * tinyfd_inputBox(
        -: 5663:		char const * aTitle , /* NULL or "" */
        -: 5664:		char const * aMessage , /* NULL or "" (\n and \t have no effect) */
        -: 5665:		char const * aDefaultInput ) /* "" , if NULL it's a passwordBox */
        -: 5666:{
        -: 5667:		static char lBuff[MAX_PATH_OR_CMD];
    #####: 5668:		char * lDialogString = NULL;
        -: 5669:		char * lpDialogString;
        -: 5670:		FILE * lIn ;
        -: 5671:		int lResult ;
    #####: 5672:		int lWasGdialog = 0 ;
    #####: 5673:		int lWasGraphicDialog = 0 ;
    #####: 5674:		int lWasXterm = 0 ;
    #####: 5675:		int lWasBasicXterm = 0 ;
        -: 5676:		struct termios oldt ;
        -: 5677:		struct termios newt ;
        -: 5678:		char * lEOF;
        -: 5679:		size_t lTitleLen ;
        -: 5680:		size_t lMessageLen ;
        -: 5681:
    #####: 5682:				if (!aTitle && !aMessage && !aDefaultInput) return lBuff; /* now I can fill lBuff from outside */
    %%%%%: 5682-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5682-block 3
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5682-block 4
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 5682-block 5
        -: 5683:
    #####: 5684:		lBuff[0]='\0';
        -: 5685:
    #####: 5686:				if (tfd_quoteDetected(aTitle)) return tinyfd_inputBox("INVALID TITLE WITH QUOTES", aMessage, aDefaultInput);
    %%%%%: 5686-block 6
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5686-block 8
call    3 never executed
    #####: 5687:				if (tfd_quoteDetected(aMessage)) return tinyfd_inputBox(aTitle, "INVALID MESSAGE WITH QUOTES", aDefaultInput);
    %%%%%: 5687-block 10
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5687-block 12
call    3 never executed
    #####: 5688:				if (tfd_quoteDetected(aDefaultInput)) return tinyfd_inputBox(aTitle, aMessage, "INVALID DEFAULT_INPUT WITH QUOTES: use the GRAVE ACCENT \\x60 instead.");
    %%%%%: 5688-block 14
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5688-block 16
call    3 never executed
        -: 5689:
    #####: 5690:		lTitleLen =  aTitle ? strlen(aTitle) : 0 ;
    %%%%%: 5690-block 18
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5690-block 19
    %%%%%: 5690-block 20
    #####: 5691:		lMessageLen =  aMessage ? strlen(aMessage) : 0 ;
    %%%%%: 5691-block 21
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5691-block 22
    %%%%%: 5691-block 23
    #####: 5692:		if ( !aTitle || strcmp(aTitle,"tinyfd_query") )
    %%%%%: 5692-block 24
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5692-block 25
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5693:		{
    #####: 5694:				lDialogString = (char *) malloc( MAX_PATH_OR_CMD + lTitleLen + lMessageLen );
    %%%%%: 5694-block 26
        -: 5695:		}
        -: 5696:
    #####: 5697:		if ( osascriptPresent( ) )
    %%%%%: 5697-block 27
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5698:		{
    #####: 5699:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"applescript");return (char *)1;}
    %%%%%: 5699-block 29
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5699-block 30
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5699-block 31
    #####: 5700:				strcpy( lDialogString , "osascript ");
    #####: 5701:				if ( ! osx9orBetter() ) strcat( lDialogString , " -e 'tell application \"System Events\"' -e 'Activate'");
    %%%%%: 5701-block 32
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5701-block 34
    #####: 5702:				strcat( lDialogString , " -e 'try' -e 'display dialog \"") ;
    #####: 5703:				if ( aMessage && strlen(aMessage) )
    %%%%%: 5703-block 35
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5703-block 36
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5704:				{
    #####: 5705:						strcat(lDialogString, aMessage) ;
    %%%%%: 5705-block 37
        -: 5706:				}
    #####: 5707:				strcat(lDialogString, "\" ") ;
    #####: 5708:				strcat(lDialogString, "default answer \"") ;
    #####: 5709:				if ( aDefaultInput && strlen(aDefaultInput) )
    %%%%%: 5709-block 38
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5709-block 39
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5710:				{
    #####: 5711:						strcat(lDialogString, aDefaultInput) ;
    %%%%%: 5711-block 40
        -: 5712:				}
    #####: 5713:				strcat(lDialogString, "\" ") ;
    #####: 5714:				if ( ! aDefaultInput )
    %%%%%: 5714-block 41
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 5715:				{
    #####: 5716:						strcat(lDialogString, "hidden answer true ") ;
    %%%%%: 5716-block 42
        -: 5717:				}
    #####: 5718:				if ( aTitle && strlen(aTitle) )
    %%%%%: 5718-block 43
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5718-block 44
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5719:				{
    #####: 5720:						strcat(lDialogString, "with title \"") ;
    #####: 5721:						strcat(lDialogString, aTitle) ;
    #####: 5722:						strcat(lDialogString, "\" ") ;
    %%%%%: 5722-block 45
        -: 5723:				}
    #####: 5724:				strcat(lDialogString, "with icon note' ") ;
    #####: 5725:				strcat(lDialogString, "-e '\"1\" & text returned of result' " );
    #####: 5726:				strcat(lDialogString, "-e 'on error number -128' " ) ;
    #####: 5727:				strcat(lDialogString, "-e '0' " );
    #####: 5728:				strcat(lDialogString, "-e 'end try'") ;
    #####: 5729:				if ( ! osx9orBetter() ) strcat(lDialogString, " -e 'end tell'") ;
    %%%%%: 5729-block 46
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5729-block 48
        -: 5730:		}
    #####: 5731:		else if ( tfd_kdialogPresent() )
    %%%%%: 5731-block 49
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5732:		{
    #####: 5733:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"kdialog");return (char *)1;}
    %%%%%: 5733-block 51
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5733-block 52
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5733-block 53
    #####: 5734:				strcpy( lDialogString , "szAnswer=$(kdialog" ) ;
        -: 5735:
    #####: 5736:								if ( (tfd_kdialogPresent() == 2) && tfd_xpropPresent() )
    %%%%%: 5736-block 54
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5736-block 56
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 5737:				{
    #####: 5738:						strcat(lDialogString, " --attach=$(xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)"); /* contribution: Paul Rouget */
    %%%%%: 5738-block 58
        -: 5739:				}
        -: 5740:
    #####: 5741:				if ( ! aDefaultInput )
    %%%%%: 5741-block 59
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 5742:				{
    #####: 5743:						strcat(lDialogString, " --password ") ;
    %%%%%: 5743-block 60
        -: 5744:				}
        -: 5745:				else
        -: 5746:				{
    #####: 5747:						strcat(lDialogString, " --inputbox ") ;
    %%%%%: 5747-block 61
        -: 5748:
        -: 5749:				}
    #####: 5750:				strcat(lDialogString, "\"") ;
    #####: 5751:				if ( aMessage && strlen(aMessage) )
    %%%%%: 5751-block 62
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5751-block 63
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5752:				{
    #####: 5753:						strcat(lDialogString, aMessage ) ;
    %%%%%: 5753-block 64
        -: 5754:				}
    #####: 5755:				strcat(lDialogString , "\" \"" ) ;
    #####: 5756:				if ( aDefaultInput && strlen(aDefaultInput) )
    %%%%%: 5756-block 65
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5756-block 66
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5757:				{
    #####: 5758:						strcat(lDialogString, aDefaultInput ) ;
    %%%%%: 5758-block 67
        -: 5759:				}
    #####: 5760:				strcat(lDialogString , "\"" ) ;
    #####: 5761:				if ( aTitle && strlen(aTitle) )
    %%%%%: 5761-block 68
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5761-block 69
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5762:				{
    #####: 5763:						strcat(lDialogString, " --title \"") ;
    #####: 5764:						strcat(lDialogString, aTitle) ;
    #####: 5765:						strcat(lDialogString, "\"") ;
    %%%%%: 5765-block 70
        -: 5766:				}
    #####: 5767:				strcat( lDialogString ,
    %%%%%: 5767-block 71
        -: 5768:						");if [ $? = 0 ];then echo 1$szAnswer;else echo 0$szAnswer;fi");
        -: 5769:		}
    #####: 5770:		else if ( tfd_zenityPresent() || tfd_matedialogPresent() || tfd_shellementaryPresent() || tfd_qarmaPresent() )
    %%%%%: 5770-block 72
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5770-block 74
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 5770-block 76
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
    %%%%%: 5770-block 78
call    9 never executed
branch 10 never executed (fallthrough)
branch 11 never executed
        -: 5771:		{
    #####: 5772:				if ( tfd_zenityPresent() )
    %%%%%: 5772-block 80
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5773:				{
    #####: 5774:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"zenity");return (char *)1;}
    %%%%%: 5774-block 82
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5774-block 83
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5774-block 84
    #####: 5775:						strcpy( lDialogString , "szAnswer=$(zenity" ) ;
    #####: 5776:												if ( (tfd_zenity3Present() >= 4) && !getenv("SSH_TTY") && tfd_xpropPresent() )
    %%%%%: 5776-block 85
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5776-block 87
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 5776-block 89
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
        -: 5777:						{
    #####: 5778:								strcat( lDialogString, " --attach=$(sleep .01;xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)"); /* contribution: Paul Rouget */
    %%%%%: 5778-block 91
        -: 5779:						}
        -: 5780:				}
    #####: 5781:				else if ( tfd_matedialogPresent() )
    %%%%%: 5781-block 92
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5782:				{
    #####: 5783:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"matedialog");return (char *)1;}
    %%%%%: 5783-block 94
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5783-block 95
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5783-block 96
    #####: 5784:						strcpy( lDialogString ,  "szAnswer=$(matedialog" ) ;
    %%%%%: 5784-block 97
        -: 5785:				}
    #####: 5786:				else if ( tfd_shellementaryPresent() )
    %%%%%: 5786-block 98
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5787:				{
    #####: 5788:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"shellementary");return (char *)1;}
    %%%%%: 5788-block 100
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5788-block 101
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5788-block 102
    #####: 5789:						strcpy( lDialogString , "szAnswer=$(shellementary" ) ;
    %%%%%: 5789-block 103
        -: 5790:				}
        -: 5791:				else
        -: 5792:				{
    #####: 5793:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"qarma");return (char *)1;}
    %%%%%: 5793-block 104
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5793-block 105
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5793-block 106
    #####: 5794:						strcpy( lDialogString ,  "szAnswer=$(qarma" ) ;
    #####: 5795:												if ( !getenv("SSH_TTY") && tfd_xpropPresent() )
    %%%%%: 5795-block 107
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5795-block 109
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 5796:						{
    #####: 5797:								strcat(lDialogString, " --attach=$(xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)"); /* contribution: Paul Rouget */
    %%%%%: 5797-block 111
        -: 5798:						}
        -: 5799:				}
    #####: 5800:				strcat( lDialogString ," --entry" ) ;
        -: 5801:
    #####: 5802:				strcat(lDialogString, " --title=\"") ;
    #####: 5803:				if (aTitle && strlen(aTitle)) strcat(lDialogString, aTitle) ;
    %%%%%: 5803-block 112
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5803-block 113
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5803-block 114
    #####: 5804:				strcat(lDialogString, "\"") ;
        -: 5805:
    #####: 5806:				strcat(lDialogString, " --text=\"") ;
    #####: 5807:				if (aMessage && strlen(aMessage)) strcat(lDialogString, aMessage) ;
    %%%%%: 5807-block 115
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5807-block 116
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5807-block 117
    #####: 5808:				strcat(lDialogString, "\"") ;
        -: 5809:
    #####: 5810:				if ( aDefaultInput )
    %%%%%: 5810-block 118
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 5811:				{
    #####: 5812:						strcat(lDialogString, " --entry-text=\"") ;
    #####: 5813:						strcat(lDialogString, aDefaultInput) ;
    #####: 5814:						strcat(lDialogString, "\"") ;
    %%%%%: 5814-block 119
        -: 5815:				}
        -: 5816:				else
        -: 5817:				{
    #####: 5818:						strcat(lDialogString, " --hide-text") ;
    %%%%%: 5818-block 120
        -: 5819:				}
    #####: 5820:				if (tinyfd_silent) strcat( lDialogString , " 2>/dev/null ");
    %%%%%: 5820-block 121
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5820-block 122
    #####: 5821:				strcat( lDialogString ,
    %%%%%: 5821-block 123
        -: 5822:								");if [ $? = 0 ];then echo 1$szAnswer;else echo 0$szAnswer;fi");
        -: 5823:		}
    #####: 5824:		else if (tfd_yadPresent())
    %%%%%: 5824-block 124
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5825:		{
    #####: 5826:		   if (aTitle && !strcmp(aTitle, "tinyfd_query")) { strcpy(tinyfd_response, "yad"); return (char*)1; }
    %%%%%: 5826-block 126
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5826-block 127
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5826-block 128
    #####: 5827:		   strcpy(lDialogString, "szAnswer=$(yad --entry");
    #####: 5828:		   if (aTitle && strlen(aTitle))
    %%%%%: 5828-block 129
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5828-block 130
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5829:		   {
    #####: 5830:			  strcat(lDialogString, " --title=\"");
    #####: 5831:			  strcat(lDialogString, aTitle);
    #####: 5832:			  strcat(lDialogString, "\"");
    %%%%%: 5832-block 131
        -: 5833:		   }
    #####: 5834:		   if (aMessage && strlen(aMessage))
    %%%%%: 5834-block 132
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5834-block 133
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5835:		   {
    #####: 5836:			  strcat(lDialogString, " --text=\"");
    #####: 5837:			  strcat(lDialogString, aMessage);
    #####: 5838:			  strcat(lDialogString, "\"");
    %%%%%: 5838-block 134
        -: 5839:		   }
    #####: 5840:		   if (aDefaultInput && strlen(aDefaultInput))
    %%%%%: 5840-block 135
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5840-block 136
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5841:		   {
    #####: 5842:			  strcat(lDialogString, " --entry-text=\"");
    #####: 5843:			  strcat(lDialogString, aDefaultInput);
    #####: 5844:			  strcat(lDialogString, "\"");
    %%%%%: 5844-block 137
        -: 5845:		   }
        -: 5846:		   else
        -: 5847:		   {
    #####: 5848:			  strcat(lDialogString, " --hide-text");
    %%%%%: 5848-block 138
        -: 5849:		   }
    #####: 5850:		   if (tinyfd_silent) strcat(lDialogString, " 2>/dev/null ");
    %%%%%: 5850-block 139
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5850-block 140
    #####: 5851:		   strcat(lDialogString,
    %%%%%: 5851-block 141
        -: 5852:			  ");if [ $? = 0 ];then echo 1$szAnswer;else echo 0$szAnswer;fi");
        -: 5853:		}
    #####: 5854:		else if ( gxmessagePresent() || gmessagePresent() )
    %%%%%: 5854-block 142
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5854-block 144
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 5855:		{
    #####: 5856:				if ( gxmessagePresent() ) {
    %%%%%: 5856-block 146
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    #####: 5857:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"gxmessage");return (char *)1;}
    %%%%%: 5857-block 148
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5857-block 149
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5857-block 150
    #####: 5858:						strcpy( lDialogString , "szAnswer=$(gxmessage -buttons Ok:1,Cancel:0 -center \"");
    %%%%%: 5858-block 151
        -: 5859:				}
        -: 5860:				else
        -: 5861:				{
    #####: 5862:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"gmessage");return (char *)1;}
    %%%%%: 5862-block 152
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5862-block 153
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5862-block 154
    #####: 5863:						strcpy( lDialogString , "szAnswer=$(gmessage -buttons Ok:1,Cancel:0 -center \"");
    %%%%%: 5863-block 155
        -: 5864:				}
        -: 5865:
    #####: 5866:				if ( aMessage && strlen(aMessage) )
    %%%%%: 5866-block 156
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5866-block 157
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5867:				{
    #####: 5868:						strcat( lDialogString , aMessage ) ;
    %%%%%: 5868-block 158
        -: 5869:				}
    #####: 5870:				strcat(lDialogString, "\"" ) ;
    #####: 5871:				if ( aTitle && strlen(aTitle) )
    %%%%%: 5871-block 159
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5871-block 160
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5872:				{
    #####: 5873:						strcat( lDialogString , " -title  \"");
    #####: 5874:						strcat( lDialogString , aTitle ) ;
    #####: 5875:						strcat(lDialogString, "\" " ) ;
    %%%%%: 5875-block 161
        -: 5876:				}
    #####: 5877:				strcat(lDialogString, " -entrytext \"" ) ;
    #####: 5878:				if ( aDefaultInput && strlen(aDefaultInput) )
    %%%%%: 5878-block 162
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5878-block 163
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5879:				{
    #####: 5880:						strcat( lDialogString , aDefaultInput ) ;
    %%%%%: 5880-block 164
        -: 5881:				}
    #####: 5882:				strcat(lDialogString, "\"" ) ;
    #####: 5883:				strcat( lDialogString , ");echo $?$szAnswer");
    %%%%%: 5883-block 165
        -: 5884:		}
    #####: 5885:				else if ( !gdialogPresent() && !xdialogPresent() && tkinter3Present( ) )
    %%%%%: 5885-block 166
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5885-block 168
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 5885-block 170
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
        -: 5886:				{
    #####: 5887:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"python3-tkinter");return (char *)1;}
    %%%%%: 5887-block 172
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5887-block 173
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5887-block 174
    #####: 5888:						strcpy( lDialogString , gPython3Name ) ;
    #####: 5889:						strcat( lDialogString ,
        -: 5890:								" -S -c \"import tkinter; from tkinter import simpledialog;root=tkinter.Tk();root.withdraw();");
    #####: 5891:						strcat( lDialogString ,"res=simpledialog.askstring(" ) ;
    #####: 5892:						if ( aTitle && strlen(aTitle) )
    %%%%%: 5892-block 175
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5892-block 176
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5893:						{
    #####: 5894:								strcat(lDialogString, "title='") ;
    #####: 5895:								strcat(lDialogString, aTitle) ;
    #####: 5896:								strcat(lDialogString, "',") ;
    %%%%%: 5896-block 177
        -: 5897:						}
    #####: 5898:						if ( aMessage && strlen(aMessage) )
    %%%%%: 5898-block 178
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5898-block 179
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5899:						{
        -: 5900:
    #####: 5901:								strcat(lDialogString, "prompt='") ;
    #####: 5902:								lpDialogString = lDialogString + strlen(lDialogString);
    #####: 5903:								tfd_replaceSubStr( aMessage , "\n" , "\\n" , lpDialogString ) ;
    %%%%%: 5903-block 180
call    0 never executed
    #####: 5904:								strcat(lDialogString, "',") ;
        -: 5905:						}
    #####: 5906:						if ( aDefaultInput )
    %%%%%: 5906-block 182
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 5907:						{
    #####: 5908:								if ( strlen(aDefaultInput) )
    %%%%%: 5908-block 183
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 5909:								{
    #####: 5910:										strcat(lDialogString, "initialvalue='") ;
    #####: 5911:										strcat(lDialogString, aDefaultInput) ;
    #####: 5912:										strcat(lDialogString, "',") ;
    %%%%%: 5912-block 184
        -: 5913:								}
        -: 5914:						}
        -: 5915:						else
        -: 5916:						{
    #####: 5917:								strcat(lDialogString, "show='*'") ;
    %%%%%: 5917-block 185
        -: 5918:						}
    #####: 5919:						strcat(lDialogString, ");\nif res is None :\n\tprint(0)");
    #####: 5920:						strcat(lDialogString, "\nelse :\n\tprint('1'+res)\n\"" ) ;
    %%%%%: 5920-block 186
        -: 5921:				}
    #####: 5922:				else if ( !gdialogPresent() && !xdialogPresent() && tkinter2Present( ) )
    %%%%%: 5922-block 187
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5922-block 189
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 5922-block 191
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
        -: 5923:		{
    #####: 5924:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"python2-tkinter");return (char *)1;}
    %%%%%: 5924-block 193
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5924-block 194
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5924-block 195
    #####: 5925:								strcpy( lDialogString , "export PYTHONIOENCODING=utf-8;" ) ;
    #####: 5926:								strcat( lDialogString , gPython2Name ) ;
    #####: 5927:								if ( ! isTerminalRunning( ) && tfd_isDarwin( ) )
    %%%%%: 5927-block 196
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5927-block 198
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 5928:				{
    #####: 5929:				strcat( lDialogString , " -i" ) ;  /* for osx without console */
    %%%%%: 5929-block 200
        -: 5930:				}
        -: 5931:
    #####: 5932:								strcat( lDialogString ,
        -: 5933:										" -S -c \"import Tkinter,tkSimpleDialog;root=Tkinter.Tk();root.withdraw();");
        -: 5934:
    #####: 5935:				if ( tfd_isDarwin( ) )
    %%%%%: 5935-block 201
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5936:				{
    #####: 5937:						strcat( lDialogString ,
    %%%%%: 5937-block 203
        -: 5938:"import os;os.system('''/usr/bin/osascript -e 'tell app \\\"Finder\\\" to set \
        -: 5939:frontmost of process \\\"Python\\\" to true' ''');");
        -: 5940:				}
        -: 5941:
    #####: 5942:				strcat( lDialogString ,"res=tkSimpleDialog.askstring(" ) ;
    #####: 5943:				if ( aTitle && strlen(aTitle) )
    %%%%%: 5943-block 204
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5943-block 205
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5944:				{
    #####: 5945:						strcat(lDialogString, "title='") ;
    #####: 5946:						strcat(lDialogString, aTitle) ;
    #####: 5947:						strcat(lDialogString, "',") ;
    %%%%%: 5947-block 206
        -: 5948:				}
    #####: 5949:				if ( aMessage && strlen(aMessage) )
    %%%%%: 5949-block 207
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5949-block 208
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 5950:				{
        -: 5951:
    #####: 5952:						strcat(lDialogString, "prompt='") ;
    #####: 5953:						lpDialogString = lDialogString + strlen(lDialogString);
    #####: 5954:						tfd_replaceSubStr( aMessage , "\n" , "\\n" , lpDialogString ) ;
    %%%%%: 5954-block 209
call    0 never executed
    #####: 5955:						strcat(lDialogString, "',") ;
        -: 5956:				}
    #####: 5957:				if ( aDefaultInput )
    %%%%%: 5957-block 211
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 5958:				{
    #####: 5959:						if ( strlen(aDefaultInput) )
    %%%%%: 5959-block 212
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 5960:						{
    #####: 5961:								strcat(lDialogString, "initialvalue='") ;
    #####: 5962:								strcat(lDialogString, aDefaultInput) ;
    #####: 5963:								strcat(lDialogString, "',") ;
    %%%%%: 5963-block 213
        -: 5964:						}
        -: 5965:				}
        -: 5966:				else
        -: 5967:				{
    #####: 5968:						strcat(lDialogString, "show='*'") ;
    %%%%%: 5968-block 214
        -: 5969:				}
    #####: 5970:				strcat(lDialogString, ");\nif res is None :\n\tprint 0");
    #####: 5971:				strcat(lDialogString, "\nelse :\n\tprint '1'+res\n\"" ) ;
    %%%%%: 5971-block 215
        -: 5972:		}
    #####: 5973:		else if ( gdialogPresent() || xdialogPresent() || dialogName() || whiptailPresent() )
    %%%%%: 5973-block 216
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 5973-block 218
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 5973-block 220
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
    %%%%%: 5973-block 222
call    9 never executed
branch 10 never executed (fallthrough)
branch 11 never executed
        -: 5974:		{
    #####: 5975:				if ( gdialogPresent( ) )
    %%%%%: 5975-block 224
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5976:				{
    #####: 5977:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"gdialog");return (char *)1;}
    %%%%%: 5977-block 226
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5977-block 227
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5977-block 228
    #####: 5978:						lWasGraphicDialog = 1 ;
    #####: 5979:						lWasGdialog = 1 ;
    #####: 5980:						strcpy( lDialogString , "(gdialog " ) ;
    %%%%%: 5980-block 229
        -: 5981:				}
    #####: 5982:				else if ( xdialogPresent( ) )
    %%%%%: 5982-block 230
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5983:				{
    #####: 5984:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"xdialog");return (char *)1;}
    %%%%%: 5984-block 232
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5984-block 233
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5984-block 234
    #####: 5985:						lWasGraphicDialog = 1 ;
    #####: 5986:						strcpy( lDialogString , "(Xdialog " ) ;
    %%%%%: 5986-block 235
        -: 5987:				}
    #####: 5988:				else if ( dialogName( ) )
    %%%%%: 5988-block 236
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5989:				{
    #####: 5990:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"dialog");return (char *)0;}
    %%%%%: 5990-block 238
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 5990-block 239
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 5990-block 240
    #####: 5991:						if ( isTerminalRunning( ) )
    %%%%%: 5991-block 241
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 5992:						{
    #####: 5993:								strcpy( lDialogString , "(dialog " ) ;
    %%%%%: 5993-block 243
        -: 5994:						}
        -: 5995:						else
        -: 5996:						{
    #####: 5997:								lWasXterm = 1 ;
    #####: 5998:								strcpy( lDialogString , terminalName() ) ;
    %%%%%: 5998-block 244
call    0 never executed
    #####: 5999:								strcat( lDialogString , "'(" ) ;
    #####: 6000:								strcat( lDialogString , dialogName() ) ;
call    0 never executed
    #####: 6001:								strcat( lDialogString , " " ) ;
        -: 6002:						}
        -: 6003:				}
    #####: 6004:				else if ( isTerminalRunning( ) )
    %%%%%: 6004-block 247
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6005:				{
    #####: 6006:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"whiptail");return (char *)0;}
    %%%%%: 6006-block 249
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6006-block 250
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6006-block 251
    #####: 6007:						strcpy( lDialogString , "(whiptail " ) ;
    %%%%%: 6007-block 252
        -: 6008:				}
        -: 6009:				else
        -: 6010:				{
    #####: 6011:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"whiptail");return (char *)0;}
    %%%%%: 6011-block 253
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6011-block 254
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6011-block 255
    #####: 6012:						lWasXterm = 1 ;
    #####: 6013:						strcpy( lDialogString , terminalName() ) ;
    %%%%%: 6013-block 256
call    0 never executed
    #####: 6014:						strcat( lDialogString , "'(whiptail " ) ;
        -: 6015:				}
        -: 6016:
    #####: 6017:				if ( aTitle && strlen(aTitle) )
    %%%%%: 6017-block 258
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6017-block 259
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6018:				{
    #####: 6019:						strcat(lDialogString, "--title \"") ;
    #####: 6020:						strcat(lDialogString, aTitle) ;
    #####: 6021:						strcat(lDialogString, "\" ") ;
    %%%%%: 6021-block 260
        -: 6022:				}
        -: 6023:
    #####: 6024:				if ( !xdialogPresent() && !gdialogPresent() )
    %%%%%: 6024-block 261
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6024-block 263
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 6025:				{
    #####: 6026:						strcat(lDialogString, "--backtitle \"") ;
    #####: 6027:						strcat(lDialogString, "tab: move focus") ;
    #####: 6028:						if ( ! aDefaultInput && !lWasGdialog )
    %%%%%: 6028-block 265
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6028-block 266
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6029:						{
    #####: 6030:								strcat(lDialogString, " (sometimes nothing, no blink nor star, is shown in text field)") ;
    %%%%%: 6030-block 267
        -: 6031:						}
    #####: 6032:						strcat(lDialogString, "\" ") ;
    %%%%%: 6032-block 268
        -: 6033:				}
        -: 6034:
    #####: 6035:				if ( aDefaultInput || lWasGdialog )
    %%%%%: 6035-block 269
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6035-block 270
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6036:				{
    #####: 6037:						strcat( lDialogString , "--inputbox" ) ;
    %%%%%: 6037-block 271
        -: 6038:				}
        -: 6039:				else
        -: 6040:				{
    #####: 6041:						if ( !lWasGraphicDialog && dialogName() && isDialogVersionBetter09b() )
    %%%%%: 6041-block 272
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6041-block 273
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 6041-block 275
call    5 never executed
branch  6 never executed (fallthrough)
branch  7 never executed
        -: 6042:						{
    #####: 6043:								strcat( lDialogString , "--insecure " ) ;
    %%%%%: 6043-block 277
        -: 6044:						}
    #####: 6045:						strcat( lDialogString , "--passwordbox" ) ;
    %%%%%: 6045-block 278
        -: 6046:				}
    #####: 6047:				strcat( lDialogString , " \"" ) ;
    #####: 6048:				if ( aMessage && strlen(aMessage) )
    %%%%%: 6048-block 279
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6048-block 280
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6049:				{
    #####: 6050:						strcat(lDialogString, aMessage) ;
    %%%%%: 6050-block 281
        -: 6051:				}
    #####: 6052:				strcat(lDialogString,"\" 10 60 ") ;
    #####: 6053:				if ( aDefaultInput && strlen(aDefaultInput) )
    %%%%%: 6053-block 282
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6053-block 283
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6054:				{
    #####: 6055:						strcat(lDialogString, "\"") ;
    #####: 6056:						strcat(lDialogString, aDefaultInput) ;
    #####: 6057:						strcat(lDialogString, "\" ") ;
    %%%%%: 6057-block 284
        -: 6058:				}
    #####: 6059:				if ( lWasGraphicDialog )
    %%%%%: 6059-block 285
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6060:				{
    #####: 6061:						strcat(lDialogString,") 2>/tmp/tinyfd.txt;\
    %%%%%: 6061-block 286
        -: 6062:		if [ $? = 0 ];then tinyfdBool=1;else tinyfdBool=0;fi;\
        -: 6063:		tinyfdRes=$(cat /tmp/tinyfd.txt);echo $tinyfdBool$tinyfdRes") ;
        -: 6064:				}
        -: 6065:				else
        -: 6066:				{
    #####: 6067:						strcat(lDialogString,">/dev/tty ) 2>/tmp/tinyfd.txt;\
        -: 6068:		if [ $? = 0 ];then tinyfdBool=1;else tinyfdBool=0;fi;\
        -: 6069:		tinyfdRes=$(cat /tmp/tinyfd.txt);echo $tinyfdBool$tinyfdRes") ;
        -: 6070:
    #####: 6071:						if ( lWasXterm )
    %%%%%: 6071-block 287
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6072:						{
    #####: 6073:				strcat(lDialogString," >/tmp/tinyfd0.txt';cat /tmp/tinyfd0.txt");
    %%%%%: 6073-block 288
        -: 6074:						}
        -: 6075:						else
        -: 6076:						{
    #####: 6077:								strcat(lDialogString, "; clear >/dev/tty") ;
    %%%%%: 6077-block 289
        -: 6078:						}
        -: 6079:				}
        -: 6080:		}
    #####: 6081:		else if ( ! isTerminalRunning( ) && terminalName() )
    %%%%%: 6081-block 291
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6081-block 293
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 6082:		{
    #####: 6083:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"basicinput");return (char *)0;}
    %%%%%: 6083-block 295
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6083-block 296
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6083-block 297
    #####: 6084:				lWasBasicXterm = 1 ;
    #####: 6085:				strcpy( lDialogString , terminalName() ) ;
    %%%%%: 6085-block 298
call    0 never executed
    #####: 6086:				strcat( lDialogString , "'" ) ;
    #####: 6087:				if ( !gWarningDisplayed && !tinyfd_forceConsole)
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6087-block 300
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6088:				{
    #####: 6089:										gWarningDisplayed = 1 ;
    #####: 6090:										tinyfd_messageBox(gTitle,tinyfd_needs,"ok","warning",0);
    %%%%%: 6090-block 301
call    0 never executed
        -: 6091:				}
    #####: 6092:				if ( aTitle && strlen(aTitle) && !tinyfd_forceConsole)
    %%%%%: 6092-block 302
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6092-block 303
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6092-block 304
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 6093:				{
    #####: 6094:						strcat( lDialogString , "echo \"" ) ;
    #####: 6095:						strcat( lDialogString, aTitle) ;
    #####: 6096:						strcat( lDialogString , "\";echo;" ) ;
    %%%%%: 6096-block 305
        -: 6097:				}
        -: 6098:
    #####: 6099:				strcat( lDialogString , "echo \"" ) ;
    #####: 6100:				if ( aMessage && strlen(aMessage) )
    %%%%%: 6100-block 306
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6100-block 307
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6101:				{
    #####: 6102:						strcat( lDialogString, aMessage) ;
    %%%%%: 6102-block 308
        -: 6103:				}
    #####: 6104:				strcat( lDialogString , "\";read " ) ;
    #####: 6105:				if ( ! aDefaultInput )
    %%%%%: 6105-block 309
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6106:				{
    #####: 6107:						strcat( lDialogString , "-s " ) ;
    %%%%%: 6107-block 310
        -: 6108:				}
    #####: 6109:				strcat( lDialogString , "-p \"" ) ;
    #####: 6110:				strcat( lDialogString , "(esc+enter to cancel): \" ANSWER " ) ;
    #####: 6111:				strcat( lDialogString , ";echo 1$ANSWER >/tmp/tinyfd.txt';" ) ;
    #####: 6112:				strcat( lDialogString , "cat -v /tmp/tinyfd.txt");
    %%%%%: 6112-block 311
        -: 6113:		}
    #####: 6114:		else if ( !gWarningDisplayed && ! isTerminalRunning( ) && ! terminalName() ) {
    %%%%%: 6114-block 312
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6114-block 313
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
    %%%%%: 6114-block 315
call    5 never executed
branch  6 never executed (fallthrough)
branch  7 never executed
    #####: 6115:						gWarningDisplayed = 1 ;
    #####: 6116:						tinyfd_messageBox(gTitle,tinyfd_needs,"ok","warning",0);
    %%%%%: 6116-block 317
call    0 never executed
    #####: 6117:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"no_solution");return (char *)0;}
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6117-block 319
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6117-block 320
    #####: 6118:						free(lDialogString);
    #####: 6119:						return NULL;
    %%%%%: 6119-block 321
        -: 6120:		}
        -: 6121:		else
        -: 6122:		{
    #####: 6123:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"basicinput");return (char *)0;}
    %%%%%: 6123-block 322
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6123-block 323
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6123-block 324
    #####: 6124:				if ( !gWarningDisplayed && !tinyfd_forceConsole)
    %%%%%: 6124-block 325
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6124-block 326
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6125:				{
    #####: 6126:						gWarningDisplayed = 1 ;
    #####: 6127:						tinyfd_messageBox(gTitle,tinyfd_needs,"ok","warning",0);
    %%%%%: 6127-block 327
call    0 never executed
        -: 6128:				}
    #####: 6129:				if ( aTitle && strlen(aTitle) )
    %%%%%: 6129-block 328
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6129-block 329
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6130:				{
    #####: 6131:						printf("\n%s\n", aTitle);
    %%%%%: 6131-block 330
call    0 never executed
        -: 6132:				}
    #####: 6133:				if ( aMessage && strlen(aMessage) )
    %%%%%: 6133-block 331
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6133-block 332
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6134:				{
    #####: 6135:						printf("\n%s\n",aMessage);
    %%%%%: 6135-block 333
call    0 never executed
        -: 6136:				}
    #####: 6137:				printf("(esc+enter to cancel): "); fflush(stdout);
    %%%%%: 6137-block 334
call    0 never executed
call    1 never executed
    #####: 6138:				if ( ! aDefaultInput )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6139:				{
    #####: 6140:						tcgetattr(STDIN_FILENO, & oldt) ;
    %%%%%: 6140-block 337
call    0 never executed
    #####: 6141:						newt = oldt ;
    #####: 6142:						newt.c_lflag &= ~ECHO ;
    #####: 6143:						tcsetattr(STDIN_FILENO, TCSANOW, & newt);
call    0 never executed
        -: 6144:				}
        -: 6145:
    #####: 6146:				lEOF = fgets(lBuff, MAX_PATH_OR_CMD, stdin);
    %%%%%: 6146-block 339
call    0 never executed
        -: 6147:				/* printf("lbuff<%c><%d>\n",lBuff[0],lBuff[0]); */
    #####: 6148:				if ( ! lEOF  || (lBuff[0] == '\0') )
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6148-block 341
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6149:				{
    #####: 6150:						free(lDialogString);
    #####: 6151:						return NULL;
    %%%%%: 6151-block 342
        -: 6152:				}
        -: 6153:
    #####: 6154:				if ( lBuff[0] == '\n' )
    %%%%%: 6154-block 343
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6155:				{
    #####: 6156:						lEOF = fgets(lBuff, MAX_PATH_OR_CMD, stdin);
    %%%%%: 6156-block 344
call    0 never executed
        -: 6157:						/* printf("lbuff<%c><%d>\n",lBuff[0],lBuff[0]); */
    #####: 6158:						if ( ! lEOF  || (lBuff[0] == '\0') )
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6158-block 346
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6159:						{
    #####: 6160:								free(lDialogString);
    #####: 6161:								return NULL;
    %%%%%: 6161-block 347
        -: 6162:						}
        -: 6163:				}
        -: 6164:
    #####: 6165:				if ( ! aDefaultInput )
    %%%%%: 6165-block 348
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6166:				{
    #####: 6167:						tcsetattr(STDIN_FILENO, TCSANOW, & oldt);
    %%%%%: 6167-block 349
call    0 never executed
    #####: 6168:						printf("\n");
call    0 never executed
        -: 6169:				}
    #####: 6170:				printf("\n");
    %%%%%: 6170-block 351
call    0 never executed
    #####: 6171:				if ( strchr(lBuff,27) )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6172:				{
    #####: 6173:						free(lDialogString);
    #####: 6174:						return NULL ;
    %%%%%: 6174-block 353
        -: 6175:				}
    #####: 6176:				if ( lBuff[strlen( lBuff ) -1] == '\n' )
    %%%%%: 6176-block 354
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6177:				{
    #####: 6178:						lBuff[strlen( lBuff ) -1] = '\0' ;
    %%%%%: 6178-block 355
        -: 6179:				}
    #####: 6180:				free(lDialogString);
    #####: 6181:				return lBuff ;
    %%%%%: 6181-block 356
        -: 6182:		}
        -: 6183:
    #####: 6184:		if (tinyfd_verbose) printf( "lDialogString: %s\n" , lDialogString ) ;
    %%%%%: 6184-block 357
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6184-block 358
call    2 never executed
    #####: 6185:		lIn = popen( lDialogString , "r" );
    %%%%%: 6185-block 359
call    0 never executed
    #####: 6186:		if ( ! lIn  )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6187:		{
    #####: 6188:				if ( fileExists("/tmp/tinyfd.txt") )
    %%%%%: 6188-block 361
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6189:				{
    #####: 6190:						wipefile("/tmp/tinyfd.txt");
    %%%%%: 6190-block 363
call    0 never executed
    #####: 6191:						remove("/tmp/tinyfd.txt");
call    0 never executed
        -: 6192:				}
    #####: 6193:				if ( fileExists("/tmp/tinyfd0.txt") )
    %%%%%: 6193-block 365
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6194:				{
    #####: 6195:						wipefile("/tmp/tinyfd0.txt");
    %%%%%: 6195-block 367
call    0 never executed
    #####: 6196:						remove("/tmp/tinyfd0.txt");
call    0 never executed
        -: 6197:				}
    #####: 6198:				free(lDialogString);
    #####: 6199:				return NULL ;
    %%%%%: 6199-block 369
        -: 6200:		}
    #####: 6201:		while ( fgets( lBuff , sizeof( lBuff ) , lIn ) != NULL )
    %%%%%: 6201-block 370
    %%%%%: 6201-block 371
call    0 never executed
branch  1 never executed
branch  2 never executed (fallthrough)
        -: 6202:		{}
        -: 6203:
    #####: 6204:		pclose( lIn ) ;
    %%%%%: 6204-block 373
call    0 never executed
        -: 6205:
    #####: 6206:		if ( fileExists("/tmp/tinyfd.txt") )
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6207:		{
    #####: 6208:				wipefile("/tmp/tinyfd.txt");
    %%%%%: 6208-block 376
call    0 never executed
    #####: 6209:				remove("/tmp/tinyfd.txt");
call    0 never executed
        -: 6210:		}
    #####: 6211:		if ( fileExists("/tmp/tinyfd0.txt") )
    %%%%%: 6211-block 378
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6212:		{
    #####: 6213:				wipefile("/tmp/tinyfd0.txt");
    %%%%%: 6213-block 380
call    0 never executed
    #####: 6214:				remove("/tmp/tinyfd0.txt");
call    0 never executed
        -: 6215:		}
        -: 6216:
        -: 6217:		/* printf( "len Buff: %lu\n" , strlen(lBuff) ) ; */
        -: 6218:		/* printf( "lBuff0: %s\n" , lBuff ) ; */
    #####: 6219:		if ( strlen( lBuff ) && lBuff[strlen( lBuff ) -1] == '\n' )
    %%%%%: 6219-block 382
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6219-block 383
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6220:		{
    #####: 6221:				lBuff[strlen( lBuff ) -1] = '\0' ;
    %%%%%: 6221-block 384
        -: 6222:		}
        -: 6223:		/* printf( "lBuff1: %s len: %lu \n" , lBuff , strlen(lBuff) ) ; */
    #####: 6224:		if ( lWasBasicXterm )
    %%%%%: 6224-block 385
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6225:		{
    #####: 6226:				if ( strstr(lBuff,"^[") ) /* esc was pressed */
    %%%%%: 6226-block 386
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6227:				{
    #####: 6228:						free(lDialogString);
    #####: 6229:						return NULL ;
    %%%%%: 6229-block 387
        -: 6230:				}
        -: 6231:		}
        -: 6232:
    #####: 6233:		lResult =  strncmp( lBuff , "1" , 1) ? 0 : 1 ;
        -: 6234:		/* printf( "lResult: %d \n" , lResult ) ; */
    #####: 6235:		if ( ! lResult )
    %%%%%: 6235-block 388
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6236:		{
    #####: 6237:				free(lDialogString);
    #####: 6238:				return NULL ;
    %%%%%: 6238-block 389
        -: 6239:		}
        -: 6240:
        -: 6241:		/* printf( "lBuff+1: %s\n" , lBuff+1 ) ; */
    #####: 6242:		free(lDialogString);
    #####: 6243:		return lBuff+1 ;
    %%%%%: 6243-block 390
        -: 6244:}
        -: 6245:
        -: 6246:
function tinyfd_saveFileDialog called 0 returned 0% blocks executed 0%
    #####: 6247:char * tinyfd_saveFileDialog(
        -: 6248:        char const * aTitle , /* NULL or "" */
        -: 6249:        char const * aDefaultPathAndOrFile , /* NULL or "" , ends with / to set only a directory */
        -: 6250:        int aNumOfFilterPatterns , /* 0 */
        -: 6251:        char const * const * aFilterPatterns , /* NULL or {"*.txt","*.doc"} */
        -: 6252:        char const * aSingleFilterDescription ) /* NULL or "text files" */
        -: 6253:{
        -: 6254:		static char lBuff[MAX_PATH_OR_CMD] ;
        -: 6255:		static char lLastDirectory[MAX_PATH_OR_CMD] = "$PWD" ;
        -: 6256:
        -: 6257:		char lDialogString[MAX_PATH_OR_CMD] ;
        -: 6258:		char lString[MAX_PATH_OR_CMD] ;
        -: 6259:		int i ;
    #####: 6260:		int lWasGraphicDialog = 0 ;
    #####: 6261:		int lWasXterm = 0 ;
        -: 6262:		char * p ;
        -: 6263:        char * lPointerInputBox ;
        -: 6264:		FILE * lIn ;
    #####: 6265:		lBuff[0]='\0';
        -: 6266:
    #####: 6267:		if ( ! aFilterPatterns ) aNumOfFilterPatterns = 0 ;
    %%%%%: 6267-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6267-block 3
    #####: 6268:				if (tfd_quoteDetected(aTitle)) return tinyfd_saveFileDialog("INVALID TITLE WITH QUOTES", aDefaultPathAndOrFile, aNumOfFilterPatterns, aFilterPatterns, aSingleFilterDescription);
    %%%%%: 6268-block 4
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6268-block 6
call    3 never executed
    #####: 6269:				if (tfd_quoteDetected(aDefaultPathAndOrFile)) return tinyfd_saveFileDialog(aTitle, "INVALID DEFAULT_PATH WITH QUOTES", aNumOfFilterPatterns, aFilterPatterns, aSingleFilterDescription);
    %%%%%: 6269-block 8
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6269-block 10
call    3 never executed
    #####: 6270:				if (tfd_quoteDetected(aSingleFilterDescription)) return tinyfd_saveFileDialog(aTitle, aDefaultPathAndOrFile, aNumOfFilterPatterns, aFilterPatterns, "INVALID FILTER_DESCRIPTION WITH QUOTES");
    %%%%%: 6270-block 12
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6270-block 14
call    3 never executed
    #####: 6271:				for (i = 0; i < aNumOfFilterPatterns; i++)
    %%%%%: 6271-block 16
    %%%%%: 6271-block 21
    %%%%%: 6271-block 22
branch  0 never executed
branch  1 never executed (fallthrough)
        -: 6272:				{
    #####: 6273:						if (tfd_quoteDetected(aFilterPatterns[i])) return tinyfd_saveFileDialog("INVALID FILTER_PATTERN WITH QUOTES: use the GRAVE ACCENT \\x60 instead.", aDefaultPathAndOrFile, 0, NULL, NULL);
    %%%%%: 6273-block 17
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6273-block 19
call    3 never executed
        -: 6274:				}
        -: 6275:
    #####: 6276:		if ( osascriptPresent( ) )
    %%%%%: 6276-block 23
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6277:		{
    #####: 6278:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"applescript");return (char *)1;}
    %%%%%: 6278-block 25
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6278-block 26
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6278-block 27
    #####: 6279:				strcpy( lDialogString , "osascript ");
    #####: 6280:				if ( ! osx9orBetter() ) strcat( lDialogString , " -e 'tell application \"Finder\"' -e 'Activate'");
    %%%%%: 6280-block 28
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6280-block 30
    #####: 6281:				strcat( lDialogString , " -e 'try' -e 'POSIX path of ( choose file name " );
    #####: 6282:				if ( aTitle && strlen(aTitle) )
    %%%%%: 6282-block 31
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6282-block 32
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6283:				{
    #####: 6284:						strcat(lDialogString, "with prompt \"") ;
    #####: 6285:						strcat(lDialogString, aTitle) ;
    #####: 6286:						strcat(lDialogString, "\" ") ;
    %%%%%: 6286-block 33
        -: 6287:				}
    #####: 6288:				getPathWithoutFinalSlash( lString , aDefaultPathAndOrFile ) ;
    %%%%%: 6288-block 34
call    0 never executed
    #####: 6289:				if ( strlen(lString) )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6290:				{
    #####: 6291:						strcat(lDialogString, "default location \"") ;
    #####: 6292:						strcat(lDialogString, lString ) ;
    #####: 6293:						strcat(lDialogString , "\" " ) ;
    %%%%%: 6293-block 36
        -: 6294:				}
    #####: 6295:				getLastName( lString , aDefaultPathAndOrFile ) ;
    %%%%%: 6295-block 37
call    0 never executed
    #####: 6296:				if ( strlen(lString) )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6297:				{
    #####: 6298:						strcat(lDialogString, "default name \"") ;
    #####: 6299:						strcat(lDialogString, lString ) ;
    #####: 6300:						strcat(lDialogString , "\" " ) ;
    %%%%%: 6300-block 39
        -: 6301:				}
    #####: 6302:				strcat( lDialogString , ")' " ) ;
    #####: 6303:				strcat(lDialogString, "-e 'on error number -128' " ) ;
    #####: 6304:				strcat(lDialogString, "-e 'end try'") ;
    #####: 6305:				if ( ! osx9orBetter() ) strcat( lDialogString, " -e 'end tell'") ;
    %%%%%: 6305-block 40
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6305-block 42
        -: 6306:		}
    #####: 6307:		else if ( tfd_kdialogPresent() )
    %%%%%: 6307-block 43
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6308:		{
    #####: 6309:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"kdialog");return (char *)1;}
    %%%%%: 6309-block 45
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6309-block 46
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6309-block 47
        -: 6310:
    #####: 6311:				strcpy( lDialogString , "kdialog" ) ;
    #####: 6312:                if ( (tfd_kdialogPresent() == 2) && tfd_xpropPresent() )
    %%%%%: 6312-block 48
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6312-block 50
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 6313:				{
    #####: 6314:                    strcat(lDialogString, " --attach=$(xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)"); /* contribution: Paul Rouget */
    %%%%%: 6314-block 52
        -: 6315:				}
    #####: 6316:				strcat( lDialogString , " --getsavefilename " ) ;
        -: 6317:
    #####: 6318:				if ( aDefaultPathAndOrFile && strlen(aDefaultPathAndOrFile) )
    %%%%%: 6318-block 53
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6318-block 54
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6319:				{
    #####: 6320:                    if ( aDefaultPathAndOrFile[0] != '/' )
    %%%%%: 6320-block 55
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6321:                    {
    #####: 6322:                        strcat(lDialogString, lLastDirectory) ;
    #####: 6323:                        strcat(lDialogString , "/" ) ;
    %%%%%: 6323-block 56
        -: 6324:                    }
    #####: 6325:                    strcat(lDialogString, "\"") ;
    #####: 6326:                    strcat(lDialogString, aDefaultPathAndOrFile ) ;
    #####: 6327:                    strcat(lDialogString , "\"" ) ;
    %%%%%: 6327-block 57
        -: 6328:				}
        -: 6329:				else
        -: 6330:				{
    #####: 6331:                    strcat(lDialogString, lLastDirectory) ;
    #####: 6332:                    strcat(lDialogString , "/" ) ;
    %%%%%: 6332-block 58
        -: 6333:				}
        -: 6334:
    #####: 6335:				if ( aNumOfFilterPatterns > 0 )
    %%%%%: 6335-block 59
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6336:				{
    #####: 6337:						strcat(lDialogString , " \"" ) ;
    #####: 6338:                        strcat( lDialogString , aFilterPatterns[0] ) ;
    #####: 6339:						for ( i = 1 ; i < aNumOfFilterPatterns ; i ++ )
    %%%%%: 6339-block 60
    %%%%%: 6339-block 62
branch  0 never executed
branch  1 never executed (fallthrough)
        -: 6340:						{
    #####: 6341:														strcat( lDialogString , " " ) ;
    #####: 6342:														strcat( lDialogString , aFilterPatterns[i] ) ;
    %%%%%: 6342-block 61
        -: 6343:						}
    #####: 6344:						if ( aSingleFilterDescription && strlen(aSingleFilterDescription) )
    %%%%%: 6344-block 63
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6344-block 64
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6345:						{
    #####: 6346:								strcat( lDialogString , " | " ) ;
    #####: 6347:								strcat( lDialogString , aSingleFilterDescription ) ;
    %%%%%: 6347-block 65
        -: 6348:						}
    #####: 6349:						strcat( lDialogString , "\"" ) ;
    %%%%%: 6349-block 66
        -: 6350:				}
    #####: 6351:				if ( aTitle && strlen(aTitle) )
    %%%%%: 6351-block 67
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6351-block 68
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6352:				{
    #####: 6353:						strcat(lDialogString, " --title \"") ;
    #####: 6354:						strcat(lDialogString, aTitle) ;
    #####: 6355:						strcat(lDialogString, "\"") ;
    %%%%%: 6355-block 69
        -: 6356:				}
        -: 6357:		}
    #####: 6358:		else if ( tfd_zenityPresent() || tfd_matedialogPresent() || tfd_shellementaryPresent() || tfd_qarmaPresent() )
    %%%%%: 6358-block 70
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6358-block 72
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 6358-block 74
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
    %%%%%: 6358-block 76
call    9 never executed
branch 10 never executed (fallthrough)
branch 11 never executed
        -: 6359:		{
    #####: 6360:				if ( tfd_zenityPresent() )
    %%%%%: 6360-block 78
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6361:				{
    #####: 6362:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"zenity");return (char *)1;}
    %%%%%: 6362-block 80
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6362-block 81
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6362-block 82
    #####: 6363:						strcpy( lDialogString , "zenity" ) ;
    #####: 6364:												if ( (tfd_zenity3Present() >= 4) && !getenv("SSH_TTY") && tfd_xpropPresent() )
    %%%%%: 6364-block 83
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6364-block 85
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 6364-block 87
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
        -: 6365:						{
    #####: 6366:								strcat( lDialogString, " --attach=$(sleep .01;xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)"); /* contribution: Paul Rouget */
    %%%%%: 6366-block 89
        -: 6367:						}
        -: 6368:				}
    #####: 6369:				else if ( tfd_matedialogPresent() )
    %%%%%: 6369-block 90
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6370:				{
    #####: 6371:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"matedialog");return (char *)1;}
    %%%%%: 6371-block 92
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6371-block 93
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6371-block 94
    #####: 6372:						strcpy( lDialogString , "matedialog" ) ;
    %%%%%: 6372-block 95
        -: 6373:				}
    #####: 6374:				else if ( tfd_shellementaryPresent() )
    %%%%%: 6374-block 96
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6375:				{
    #####: 6376:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"shellementary");return (char *)1;}
    %%%%%: 6376-block 98
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6376-block 99
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6376-block 100
    #####: 6377:						strcpy( lDialogString , "shellementary" ) ;
    %%%%%: 6377-block 101
        -: 6378:				}
        -: 6379:				else
        -: 6380:				{
    #####: 6381:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"qarma");return (char *)1;}
    %%%%%: 6381-block 102
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6381-block 103
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6381-block 104
    #####: 6382:						strcpy( lDialogString , "qarma" ) ;
    #####: 6383:												if ( !getenv("SSH_TTY") && tfd_xpropPresent() )
    %%%%%: 6383-block 105
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6383-block 107
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 6384:						{
    #####: 6385:								strcat(lDialogString, " --attach=$(xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)"); /* contribution: Paul Rouget */
    %%%%%: 6385-block 109
        -: 6386:						}
        -: 6387:				}
    #####: 6388:				strcat(lDialogString, " --file-selection --save --confirm-overwrite" ) ;
        -: 6389:
    #####: 6390:				strcat(lDialogString, " --title=\"") ;
    #####: 6391:				if (aTitle && strlen(aTitle)) strcat(lDialogString, aTitle) ;
    %%%%%: 6391-block 110
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6391-block 111
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6391-block 112
    #####: 6392:				strcat(lDialogString, "\"") ;
        -: 6393:
    #####: 6394:				if ( aDefaultPathAndOrFile && strlen(aDefaultPathAndOrFile) )
    %%%%%: 6394-block 113
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6394-block 114
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6395:				{
    #####: 6396:						strcat(lDialogString, " --filename=\"") ;
    #####: 6397:						strcat(lDialogString, aDefaultPathAndOrFile) ;
    #####: 6398:						strcat(lDialogString, "\"") ;
    %%%%%: 6398-block 115
        -: 6399:				}
    #####: 6400:				if ( aNumOfFilterPatterns > 0 )
    %%%%%: 6400-block 116
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6401:				{
    #####: 6402:						strcat( lDialogString , " --file-filter='" ) ;
    #####: 6403:						if ( aSingleFilterDescription && strlen(aSingleFilterDescription) )
    %%%%%: 6403-block 117
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6403-block 118
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6404:						{
    #####: 6405:								strcat( lDialogString , aSingleFilterDescription ) ;
    #####: 6406:								strcat( lDialogString , " |" ) ;
    %%%%%: 6406-block 119
        -: 6407:						}
    #####: 6408:						for ( i = 0 ; i < aNumOfFilterPatterns ; i ++ )
    %%%%%: 6408-block 120
    %%%%%: 6408-block 122
branch  0 never executed
branch  1 never executed (fallthrough)
        -: 6409:						{
    #####: 6410:														strcat( lDialogString , " " ) ;
    #####: 6411:														strcat( lDialogString , aFilterPatterns[i] ) ;
    %%%%%: 6411-block 121
        -: 6412:						}
    #####: 6413:						strcat( lDialogString , "' --file-filter='All files | *'" ) ;
    %%%%%: 6413-block 123
        -: 6414:				}
    #####: 6415:				if (tinyfd_silent) strcat( lDialogString , " 2>/dev/null ");
    %%%%%: 6415-block 124
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6415-block 125
        -: 6416:		}
    #####: 6417:		else if (tfd_yadPresent())
    %%%%%: 6417-block 127
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6418:		{
    #####: 6419:		   if (aTitle && !strcmp(aTitle, "tinyfd_query")) { strcpy(tinyfd_response, "yad"); return (char*)1; }
    %%%%%: 6419-block 129
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6419-block 130
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6419-block 131
    #####: 6420:		   strcpy(lDialogString, "yad --file --save --confirm-overwrite");
    #####: 6421:		   if (aTitle && strlen(aTitle))
    %%%%%: 6421-block 132
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6421-block 133
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6422:		   {
    #####: 6423:			  strcat(lDialogString, " --title=\"");
    #####: 6424:			  strcat(lDialogString, aTitle);
    #####: 6425:			  strcat(lDialogString, "\"");
    %%%%%: 6425-block 134
        -: 6426:		   }
    #####: 6427:		   if (aDefaultPathAndOrFile && strlen(aDefaultPathAndOrFile))
    %%%%%: 6427-block 135
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6427-block 136
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6428:		   {
    #####: 6429:			  strcat(lDialogString, " --filename=\"");
    #####: 6430:			  strcat(lDialogString, aDefaultPathAndOrFile);
    #####: 6431:			  strcat(lDialogString, "\"");
    %%%%%: 6431-block 137
        -: 6432:		   }
    #####: 6433:		   if (aNumOfFilterPatterns > 0)
    %%%%%: 6433-block 138
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6434:		   {
    #####: 6435:			  strcat(lDialogString, " --file-filter='");
    #####: 6436:			  if (aSingleFilterDescription && strlen(aSingleFilterDescription))
    %%%%%: 6436-block 139
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6436-block 140
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6437:			  {
    #####: 6438:				 strcat(lDialogString, aSingleFilterDescription);
    #####: 6439:				 strcat(lDialogString, " |");
    %%%%%: 6439-block 141
        -: 6440:			  }
    #####: 6441:			  for (i = 0; i < aNumOfFilterPatterns; i++)
    %%%%%: 6441-block 142
    %%%%%: 6441-block 144
branch  0 never executed
branch  1 never executed (fallthrough)
        -: 6442:			  {
    #####: 6443:				 strcat(lDialogString, " ");
    #####: 6444:				 strcat(lDialogString, aFilterPatterns[i]);
    %%%%%: 6444-block 143
        -: 6445:			  }
    #####: 6446:			  strcat(lDialogString, "' --file-filter='All files | *'");
    %%%%%: 6446-block 145
        -: 6447:		   }
    #####: 6448:		   if (tinyfd_silent) strcat(lDialogString, " 2>/dev/null ");
    %%%%%: 6448-block 146
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6448-block 147
        -: 6449:	  }
    #####: 6450:	  else if ( !xdialogPresent() && tkinter3Present( ) )
    %%%%%: 6450-block 148
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6450-block 150
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 6451:				{
    #####: 6452:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"python3-tkinter");return (char *)1;}
    %%%%%: 6452-block 152
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6452-block 153
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6452-block 154
    #####: 6453:						strcpy( lDialogString , gPython3Name ) ;
    #####: 6454:						strcat( lDialogString ,
        -: 6455:								" -S -c \"import tkinter;from tkinter import filedialog;root=tkinter.Tk();root.withdraw();");
    #####: 6456:						strcat( lDialogString , "res=filedialog.asksaveasfilename(");
    #####: 6457:						if ( aTitle && strlen(aTitle) )
    %%%%%: 6457-block 155
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6457-block 156
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6458:						{
    #####: 6459:								strcat(lDialogString, "title='") ;
    #####: 6460:								strcat(lDialogString, aTitle) ;
    #####: 6461:								strcat(lDialogString, "',") ;
    %%%%%: 6461-block 157
        -: 6462:						}
    #####: 6463:						if ( aDefaultPathAndOrFile && strlen(aDefaultPathAndOrFile) )
    %%%%%: 6463-block 158
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6463-block 159
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6464:						{
    #####: 6465:								getPathWithoutFinalSlash( lString , aDefaultPathAndOrFile ) ;
    %%%%%: 6465-block 160
call    0 never executed
    #####: 6466:								if ( strlen(lString) )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6467:								{
    #####: 6468:										strcat(lDialogString, "initialdir='") ;
    #####: 6469:										strcat(lDialogString, lString ) ;
    #####: 6470:										strcat(lDialogString , "'," ) ;
    %%%%%: 6470-block 162
        -: 6471:								}
    #####: 6472:								getLastName( lString , aDefaultPathAndOrFile ) ;
    %%%%%: 6472-block 163
call    0 never executed
    #####: 6473:								if ( strlen(lString) )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6474:								{
    #####: 6475:										strcat(lDialogString, "initialfile='") ;
    #####: 6476:										strcat(lDialogString, lString ) ;
    #####: 6477:										strcat(lDialogString , "'," ) ;
    %%%%%: 6477-block 165
        -: 6478:								}
        -: 6479:						}
    #####: 6480:						if ( ( aNumOfFilterPatterns > 1 )
    %%%%%: 6480-block 166
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 6481:								|| ( (aNumOfFilterPatterns == 1) /* test because poor osx behaviour */
    %%%%%: 6481-block 167
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 6482:								&& ( aFilterPatterns[0][strlen(aFilterPatterns[0])-1] != '*' ) ) )
    %%%%%: 6482-block 168
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6483:						{
    #####: 6484:								strcat(lDialogString , "filetypes=(" ) ;
    #####: 6485:								strcat( lDialogString , "('" ) ;
    #####: 6486:								if ( aSingleFilterDescription && strlen(aSingleFilterDescription) )
    %%%%%: 6486-block 169
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6486-block 170
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6487:								{
    #####: 6488:										strcat( lDialogString , aSingleFilterDescription ) ;
    %%%%%: 6488-block 171
        -: 6489:								}
    #####: 6490:								strcat( lDialogString , "',(" ) ;
    #####: 6491:								for ( i = 0 ; i < aNumOfFilterPatterns ; i ++ )
    %%%%%: 6491-block 172
    %%%%%: 6491-block 174
branch  0 never executed
branch  1 never executed (fallthrough)
        -: 6492:								{
    #####: 6493:										strcat( lDialogString , "'" ) ;
    #####: 6494:										strcat( lDialogString , aFilterPatterns[i] ) ;
    #####: 6495:										strcat( lDialogString , "'," ) ;
    %%%%%: 6495-block 173
        -: 6496:								}
    #####: 6497:								strcat( lDialogString , "))," ) ;
    #####: 6498:								strcat( lDialogString , "('All files','*'))" ) ;
    %%%%%: 6498-block 175
        -: 6499:						}
    #####: 6500:						strcat( lDialogString, ");\nif not isinstance(res, tuple):\n\tprint(res)\n\"" ) ;
    %%%%%: 6500-block 176
        -: 6501:				}
    #####: 6502:				else if ( !xdialogPresent() && tkinter2Present( ) )
    %%%%%: 6502-block 177
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6502-block 179
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 6503:		{
    #####: 6504:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"python2-tkinter");return (char *)1;}
    %%%%%: 6504-block 181
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6504-block 182
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6504-block 183
    #####: 6505:								strcpy( lDialogString , "export PYTHONIOENCODING=utf-8;" ) ;
    #####: 6506:								strcat( lDialogString , gPython2Name ) ;
    #####: 6507:								if ( ! isTerminalRunning( ) && tfd_isDarwin( ))
    %%%%%: 6507-block 184
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6507-block 186
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 6508:				{
    #####: 6509:				strcat( lDialogString , " -i" ) ;  /* for osx without console */
    %%%%%: 6509-block 188
        -: 6510:				}
    #####: 6511:			strcat( lDialogString ,
        -: 6512:" -S -c \"import Tkinter,tkFileDialog;root=Tkinter.Tk();root.withdraw();");
        -: 6513:
    #####: 6514:		if ( tfd_isDarwin( ) )
    %%%%%: 6514-block 189
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6515:		{
    #####: 6516:                strcat( lDialogString ,
    %%%%%: 6516-block 191
        -: 6517:"import os;os.system('''/usr/bin/osascript -e 'tell app \\\"Finder\\\" to set\
        -: 6518: frontmost of process \\\"Python\\\" to true' ''');");
        -: 6519:				}
        -: 6520:
    #####: 6521:				strcat( lDialogString , "res=tkFileDialog.asksaveasfilename(");
    #####: 6522:				if ( aTitle && strlen(aTitle) )
    %%%%%: 6522-block 192
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6522-block 193
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6523:				{
    #####: 6524:						strcat(lDialogString, "title='") ;
    #####: 6525:						strcat(lDialogString, aTitle) ;
    #####: 6526:						strcat(lDialogString, "',") ;
    %%%%%: 6526-block 194
        -: 6527:				}
    #####: 6528:			if ( aDefaultPathAndOrFile && strlen(aDefaultPathAndOrFile) )
    %%%%%: 6528-block 195
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6528-block 196
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6529:			{
    #####: 6530:						getPathWithoutFinalSlash( lString , aDefaultPathAndOrFile ) ;
    %%%%%: 6530-block 197
call    0 never executed
    #####: 6531:						if ( strlen(lString) )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6532:						{
    #####: 6533:								strcat(lDialogString, "initialdir='") ;
    #####: 6534:								strcat(lDialogString, lString ) ;
    #####: 6535:								strcat(lDialogString , "'," ) ;
    %%%%%: 6535-block 199
        -: 6536:						}
    #####: 6537:						getLastName( lString , aDefaultPathAndOrFile ) ;
    %%%%%: 6537-block 200
call    0 never executed
    #####: 6538:						if ( strlen(lString) )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6539:						{
    #####: 6540:								strcat(lDialogString, "initialfile='") ;
    #####: 6541:								strcat(lDialogString, lString ) ;
    #####: 6542:								strcat(lDialogString , "'," ) ;
    %%%%%: 6542-block 202
        -: 6543:						}
        -: 6544:				}
    #####: 6545:			if ( ( aNumOfFilterPatterns > 1 )
    %%%%%: 6545-block 203
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 6546:				  || ( (aNumOfFilterPatterns == 1) /* test because poor osx behaviour */
    %%%%%: 6546-block 204
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 6547:						&& ( aFilterPatterns[0][strlen(aFilterPatterns[0])-1] != '*' ) ) )
    %%%%%: 6547-block 205
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6548:			{
    #####: 6549:						strcat(lDialogString , "filetypes=(" ) ;
    #####: 6550:						strcat( lDialogString , "('" ) ;
    #####: 6551:						if ( aSingleFilterDescription && strlen(aSingleFilterDescription) )
    %%%%%: 6551-block 206
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6551-block 207
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6552:						{
    #####: 6553:								strcat( lDialogString , aSingleFilterDescription ) ;
    %%%%%: 6553-block 208
        -: 6554:						}
    #####: 6555:						strcat( lDialogString , "',(" ) ;
    #####: 6556:						for ( i = 0 ; i < aNumOfFilterPatterns ; i ++ )
    %%%%%: 6556-block 209
    %%%%%: 6556-block 211
branch  0 never executed
branch  1 never executed (fallthrough)
        -: 6557:						{
    #####: 6558:								strcat( lDialogString , "'" ) ;
    #####: 6559:								strcat( lDialogString , aFilterPatterns[i] ) ;
    #####: 6560:								strcat( lDialogString , "'," ) ;
    %%%%%: 6560-block 210
        -: 6561:						}
    #####: 6562:						strcat( lDialogString , "))," ) ;
    #####: 6563:						strcat( lDialogString , "('All files','*'))" ) ;
    %%%%%: 6563-block 212
        -: 6564:			}
    #####: 6565:						strcat( lDialogString, ");\nif not isinstance(res, tuple):\n\tprint res \n\"" ) ;
    %%%%%: 6565-block 213
        -: 6566:				}
    #####: 6567:		else if ( xdialogPresent() || dialogName() )
    %%%%%: 6567-block 214
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6567-block 216
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 6568:		{
    #####: 6569:				if ( xdialogPresent( ) )
    %%%%%: 6569-block 218
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6570:				{
    #####: 6571:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"xdialog");return (char *)1;}
    %%%%%: 6571-block 220
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6571-block 221
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6571-block 222
    #####: 6572:						lWasGraphicDialog = 1 ;
    #####: 6573:						strcpy( lDialogString , "(Xdialog " ) ;
    %%%%%: 6573-block 223
        -: 6574:				}
    #####: 6575:				else if ( isTerminalRunning( ) )
    %%%%%: 6575-block 224
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6576:				{
    #####: 6577:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"dialog");return (char *)0;}
    %%%%%: 6577-block 226
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6577-block 227
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6577-block 228
    #####: 6578:						strcpy( lDialogString , "(dialog " ) ;
    %%%%%: 6578-block 229
        -: 6579:				}
        -: 6580:				else
        -: 6581:				{
    #####: 6582:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"dialog");return (char *)0;}
    %%%%%: 6582-block 230
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6582-block 231
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6582-block 232
    #####: 6583:						lWasXterm = 1 ;
    #####: 6584:						strcpy( lDialogString , terminalName() ) ;
    %%%%%: 6584-block 233
call    0 never executed
    #####: 6585:						strcat( lDialogString , "'(" ) ;
    #####: 6586:						strcat( lDialogString , dialogName() ) ;
call    0 never executed
    #####: 6587:						strcat( lDialogString , " " ) ;
        -: 6588:				}
        -: 6589:
    #####: 6590:				if ( aTitle && strlen(aTitle) )
    %%%%%: 6590-block 236
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6590-block 237
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6591:				{
    #####: 6592:						strcat(lDialogString, "--title \"") ;
    #####: 6593:						strcat(lDialogString, aTitle) ;
    #####: 6594:						strcat(lDialogString, "\" ") ;
    %%%%%: 6594-block 238
        -: 6595:				}
        -: 6596:
    #####: 6597:				if ( !xdialogPresent() && !gdialogPresent() )
    %%%%%: 6597-block 239
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6597-block 241
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 6598:				{
    #####: 6599:						strcat(lDialogString, "--backtitle \"") ;
    #####: 6600:						strcat(lDialogString,
        -: 6601:								"tab: focus | /: populate | spacebar: fill text field | ok: TEXT FIELD ONLY") ;
    #####: 6602:						strcat(lDialogString, "\" ") ;
    %%%%%: 6602-block 243
        -: 6603:				}
        -: 6604:
    #####: 6605:				strcat( lDialogString , "--fselect \"" ) ;
    #####: 6606:				if ( aDefaultPathAndOrFile && strlen(aDefaultPathAndOrFile) )
    %%%%%: 6606-block 244
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6606-block 245
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6607:				{
    #####: 6608:						if ( ! strchr(aDefaultPathAndOrFile, '/') )
    %%%%%: 6608-block 246
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6609:						{
    #####: 6610:								strcat(lDialogString, "./") ;
    %%%%%: 6610-block 247
        -: 6611:						}
    #####: 6612:						strcat(lDialogString, aDefaultPathAndOrFile) ;
    %%%%%: 6612-block 248
        -: 6613:				}
    #####: 6614:				else if ( ! isTerminalRunning( ) && !lWasGraphicDialog )
    %%%%%: 6614-block 249
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6614-block 251
branch  3 never executed (fallthrough)
branch  4 never executed
        -: 6615:				{
    #####: 6616:						strcat(lDialogString, getenv("HOME")) ;
    %%%%%: 6616-block 252
call    0 never executed
    #####: 6617:						strcat(lDialogString, "/") ;
        -: 6618:				}
        -: 6619:				else
        -: 6620:				{
    #####: 6621:						strcat(lDialogString, "./") ;
    %%%%%: 6621-block 254
        -: 6622:				}
        -: 6623:
    #####: 6624:				if ( lWasGraphicDialog )
    %%%%%: 6624-block 255
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6625:				{
    #####: 6626:						strcat(lDialogString, "\" 0 60 ) 2>&1 ") ;
    %%%%%: 6626-block 256
        -: 6627:				}
        -: 6628:				else
        -: 6629:				{
    #####: 6630:						strcat(lDialogString, "\" 0 60  >/dev/tty) ") ;
    #####: 6631:						if ( lWasXterm )
    %%%%%: 6631-block 257
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6632:						{
    #####: 6633:						  strcat( lDialogString ,
    %%%%%: 6633-block 258
        -: 6634:								"2>/tmp/tinyfd.txt';cat /tmp/tinyfd.txt;rm /tmp/tinyfd.txt");
        -: 6635:						}
        -: 6636:						else
        -: 6637:						{
    #####: 6638:								strcat(lDialogString, "2>&1 ; clear >/dev/tty") ;
    %%%%%: 6638-block 259
        -: 6639:						}
        -: 6640:				}
        -: 6641:		}
        -: 6642:		else
        -: 6643:		{
    #####: 6644:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){return tinyfd_inputBox(aTitle,NULL,NULL);}
    %%%%%: 6644-block 261
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6644-block 262
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6644-block 263
call    4 never executed
    #####: 6645:								strcpy(lBuff, "Save file in ");
    #####: 6646:								strcat(lBuff, getCurDir());
    %%%%%: 6646-block 265
call    0 never executed
    #####: 6647:								lPointerInputBox = tinyfd_inputBox(NULL, NULL, NULL); /* obtain a pointer on the current content of tinyfd_inputBox */
call    0 never executed
    #####: 6648:								if (lPointerInputBox) strcpy(lString, lPointerInputBox); /* preserve the current content of tinyfd_inputBox */
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6648-block 268
    #####: 6649:								p = tinyfd_inputBox(aTitle, lBuff, "");
    %%%%%: 6649-block 269
call    0 never executed
    #####: 6650:								if (p) strcpy(lBuff, p); else lBuff[0] = '\0';
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6650-block 271
    %%%%%: 6650-block 272
    #####: 6651:								if (lPointerInputBox) strcpy(lPointerInputBox, lString); /* restore its previous content to tinyfd_inputBox */
    %%%%%: 6651-block 273
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6651-block 274
    #####: 6652:								p = lBuff;
        -: 6653:
    #####: 6654:								getPathWithoutFinalSlash( lString , p ) ;
    %%%%%: 6654-block 275
call    0 never executed
    #####: 6655:				if ( strlen( lString ) && ! dirExists( lString ) )
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6655-block 277
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
        -: 6656:				{
    #####: 6657:						return NULL ;
    %%%%%: 6657-block 279
        -: 6658:				}
    #####: 6659:				getLastName(lString,p);
    %%%%%: 6659-block 280
call    0 never executed
    #####: 6660:				if ( ! strlen(lString) )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6661:				{
    #####: 6662:						return NULL;
    %%%%%: 6662-block 282
        -: 6663:				}
    #####: 6664:				return p ;
    %%%%%: 6664-block 283
        -: 6665:		}
        -: 6666:
    #####: 6667:		if (tinyfd_verbose) printf( "lDialogString: %s\n" , lDialogString ) ;
    %%%%%: 6667-block 284
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6667-block 285
call    2 never executed
    #####: 6668:	if ( ! ( lIn = popen( lDialogString , "r" ) ) )
    %%%%%: 6668-block 286
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6669:	{
    #####: 6670:		return NULL ;
    %%%%%: 6670-block 288
        -: 6671:	}
    #####: 6672:	while ( fgets( lBuff , sizeof( lBuff ) , lIn ) != NULL )
    %%%%%: 6672-block 289
    %%%%%: 6672-block 290
call    0 never executed
branch  1 never executed
branch  2 never executed (fallthrough)
        -: 6673:	{}
    #####: 6674:	pclose( lIn ) ;
    %%%%%: 6674-block 292
call    0 never executed
    #####: 6675:	if ( strlen(lBuff) && lBuff[strlen( lBuff ) -1] == '\n' )
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6675-block 294
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6676:	{
    #####: 6677:		lBuff[strlen( lBuff ) -1] = '\0' ;
    %%%%%: 6677-block 295
        -: 6678:	}
        -: 6679:    /* printf( "lBuff: %s\n" , lBuff ) ; */
    #####: 6680:    if ( ! strlen(lBuff) )
    %%%%%: 6680-block 296
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6681:    {
    #####: 6682:            return NULL;
    %%%%%: 6682-block 297
        -: 6683:    }
        -: 6684:
    #####: 6685:	getPathWithoutFinalSlash( lString , lBuff ) ;
    %%%%%: 6685-block 298
call    0 never executed
    #####: 6686:	if ( strlen( lString ) && ! dirExists( lString ) )
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6686-block 300
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
        -: 6687:	{
    #####: 6688:		return NULL ;
    %%%%%: 6688-block 302
        -: 6689:	}
    #####: 6690:	strcpy(lLastDirectory, lString) ;
        -: 6691:
    #####: 6692:    getLastName(lString,lBuff);
    %%%%%: 6692-block 303
call    0 never executed
    #####: 6693:    if ( ! filenameValid(lString) )
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6694:    {
    #####: 6695:            return NULL;
    %%%%%: 6695-block 306
        -: 6696:    }
    #####: 6697:	return lBuff ;
    %%%%%: 6697-block 307
        -: 6698:}
        -: 6699:
        -: 6700:
        -: 6701:/* in case of multiple files, the separator is | */
function tinyfd_openFileDialog called 0 returned 0% blocks executed 0%
    #####: 6702:char * tinyfd_openFileDialog(
        -: 6703:    char const * aTitle , /* NULL or "" */
        -: 6704:    char const * aDefaultPathAndOrFile , /* NULL or "" , ends with / to set only a directory */
        -: 6705:	int aNumOfFilterPatterns , /* 0 */
        -: 6706:    char const * const * aFilterPatterns , /* NULL or {"*.jpg","*.png"} */
        -: 6707:	char const * aSingleFilterDescription , /* NULL or "image files" */
        -: 6708:	int aAllowMultipleSelects ) /* 0 or 1 */
        -: 6709:{
        -: 6710:    static char * lBuff = NULL;
        -: 6711:    static char lLastDirectory[MAX_PATH_OR_CMD] = "$PWD" ;
        -: 6712:
        -: 6713:    char lDialogString[MAX_PATH_OR_CMD] ;
        -: 6714:    char lString[MAX_PATH_OR_CMD] ;
        -: 6715:    int i ;
        -: 6716:    FILE * lIn ;
        -: 6717:    char * p ;
        -: 6718:    char * lPointerInputBox ;
        -: 6719:    size_t lFullBuffLen ;
    #####: 6720:    int lWasKdialog = 0 ;
    #####: 6721:    int lWasGraphicDialog = 0 ;
    #####: 6722:    int lWasXterm = 0 ;
        -: 6723:
    #####: 6724:		if ( ! aFilterPatterns ) aNumOfFilterPatterns = 0 ;
    %%%%%: 6724-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6724-block 3
    #####: 6725:				if (tfd_quoteDetected(aTitle)) return tinyfd_openFileDialog("INVALID TITLE WITH QUOTES", aDefaultPathAndOrFile, aNumOfFilterPatterns, aFilterPatterns, aSingleFilterDescription, aAllowMultipleSelects);
    %%%%%: 6725-block 4
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6725-block 6
call    3 never executed
    #####: 6726:				if (tfd_quoteDetected(aDefaultPathAndOrFile)) return tinyfd_openFileDialog(aTitle, "INVALID DEFAULT_PATH WITH QUOTES", aNumOfFilterPatterns, aFilterPatterns, aSingleFilterDescription, aAllowMultipleSelects);
    %%%%%: 6726-block 8
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6726-block 10
call    3 never executed
    #####: 6727:				if (tfd_quoteDetected(aSingleFilterDescription)) return tinyfd_openFileDialog(aTitle, aDefaultPathAndOrFile, aNumOfFilterPatterns, aFilterPatterns, "INVALID FILTER_DESCRIPTION WITH QUOTES", aAllowMultipleSelects);
    %%%%%: 6727-block 12
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6727-block 14
call    3 never executed
    #####: 6728:				for (i = 0; i < aNumOfFilterPatterns; i++)
    %%%%%: 6728-block 16
    %%%%%: 6728-block 21
    %%%%%: 6728-block 22
branch  0 never executed
branch  1 never executed (fallthrough)
        -: 6729:				{
    #####: 6730:						if (tfd_quoteDetected(aFilterPatterns[i])) return tinyfd_openFileDialog("INVALID FILTER_PATTERN WITH QUOTES: use the GRAVE ACCENT \\x60 instead.", aDefaultPathAndOrFile, 0, NULL, NULL, aAllowMultipleSelects);
    %%%%%: 6730-block 17
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6730-block 19
call    3 never executed
        -: 6731:				}
        -: 6732:
    #####: 6733:				free(lBuff);
    #####: 6734:				if (aTitle&&!strcmp(aTitle,"tinyfd_query"))
    %%%%%: 6734-block 23
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6734-block 24
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6735:				{
    #####: 6736:						lBuff = NULL;
    %%%%%: 6736-block 25
        -: 6737:				}
        -: 6738:				else
        -: 6739:				{
    #####: 6740:						if (aAllowMultipleSelects)
    %%%%%: 6740-block 26
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6741:						{
    #####: 6742:								lFullBuffLen = MAX_MULTIPLE_FILES * MAX_PATH_OR_CMD + 1;
    #####: 6743:								lBuff = (char *) malloc(lFullBuffLen * sizeof(char));
    #####: 6744:								if (!lBuff)
    %%%%%: 6744-block 27
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6745:								{
    #####: 6746:										lFullBuffLen = LOW_MULTIPLE_FILES * MAX_PATH_OR_CMD + 1;
    #####: 6747:										lBuff = (char *) malloc( lFullBuffLen * sizeof(char));
    %%%%%: 6747-block 28
        -: 6748:								}
        -: 6749:						}
        -: 6750:						else
        -: 6751:						{
    #####: 6752:								lFullBuffLen = MAX_PATH_OR_CMD + 1;
    #####: 6753:								lBuff = (char *) malloc(lFullBuffLen * sizeof(char));
    %%%%%: 6753-block 29
        -: 6754:						}
    #####: 6755:						if (!lBuff) return NULL;
    %%%%%: 6755-block 30
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6755-block 31
    #####: 6756:						lBuff[0]='\0';
    %%%%%: 6756-block 32
        -: 6757:				}
        -: 6758:
    #####: 6759:		if ( osascriptPresent( ) )
    %%%%%: 6759-block 33
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6760:		{
    #####: 6761:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"applescript");return (char *)1;}
    %%%%%: 6761-block 35
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6761-block 36
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6761-block 37
    #####: 6762:				strcpy( lDialogString , "osascript ");
    #####: 6763:				if ( ! osx9orBetter() ) strcat( lDialogString , " -e 'tell application \"System Events\"' -e 'Activate'");
    %%%%%: 6763-block 38
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6763-block 40
    #####: 6764:				strcat( lDialogString , " -e 'try' -e '" );
    #####: 6765:	if ( ! aAllowMultipleSelects )
    %%%%%: 6765-block 41
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6766:	{
        -: 6767:
        -: 6768:
    #####: 6769:						strcat( lDialogString , "POSIX path of ( " );
    %%%%%: 6769-block 42
        -: 6770:				}
        -: 6771:				else
        -: 6772:				{
    #####: 6773:						strcat( lDialogString , "set mylist to " );
    %%%%%: 6773-block 43
        -: 6774:				}
    #####: 6775:				strcat( lDialogString , "choose file " );
    #####: 6776:			if ( aTitle && strlen(aTitle) )
    %%%%%: 6776-block 44
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6776-block 45
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6777:			{
    #####: 6778:						strcat(lDialogString, "with prompt \"") ;
    #####: 6779:						strcat(lDialogString, aTitle) ;
    #####: 6780:						strcat(lDialogString, "\" ") ;
    %%%%%: 6780-block 46
        -: 6781:			}
    #####: 6782:				getPathWithoutFinalSlash( lString , aDefaultPathAndOrFile ) ;
    %%%%%: 6782-block 47
call    0 never executed
    #####: 6783:				if ( strlen(lString) )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6784:				{
    #####: 6785:						strcat(lDialogString, "default location \"") ;
    #####: 6786:						strcat(lDialogString, lString ) ;
    #####: 6787:						strcat(lDialogString , "\" " ) ;
    %%%%%: 6787-block 49
        -: 6788:				}
    #####: 6789:				if ( aNumOfFilterPatterns > 0 )
    %%%%%: 6789-block 50
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6790:				{
    #####: 6791:						strcat(lDialogString , "of type {\"" );
    #####: 6792:						strcat( lDialogString , aFilterPatterns[0] + 2 ) ;
    #####: 6793:						strcat( lDialogString , "\"" ) ;
    #####: 6794:						for ( i = 1 ; i < aNumOfFilterPatterns ; i ++ )
    %%%%%: 6794-block 51
    %%%%%: 6794-block 53
branch  0 never executed
branch  1 never executed (fallthrough)
        -: 6795:						{
    #####: 6796:								strcat( lDialogString , ",\"" ) ;
    #####: 6797:								strcat( lDialogString , aFilterPatterns[i] + 2) ;
    #####: 6798:								strcat( lDialogString , "\"" ) ;
    %%%%%: 6798-block 52
        -: 6799:						}
    #####: 6800:						strcat( lDialogString , "} " ) ;
    %%%%%: 6800-block 54
        -: 6801:				}
    #####: 6802:				if ( aAllowMultipleSelects )
    %%%%%: 6802-block 55
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6803:				{
    #####: 6804:						strcat( lDialogString , "multiple selections allowed true ' " ) ;
    #####: 6805:						strcat( lDialogString ,
        -: 6806:										"-e 'set mystring to POSIX path of item 1 of mylist' " );
    #####: 6807:						strcat( lDialogString ,
        -: 6808:										"-e 'repeat with  i from 2 to the count of mylist' " );
    #####: 6809:						strcat( lDialogString , "-e 'set mystring to mystring & \"|\"' " );
    #####: 6810:						strcat( lDialogString ,
        -: 6811:						"-e 'set mystring to mystring & POSIX path of item i of mylist' " );
    #####: 6812:						strcat( lDialogString , "-e 'end repeat' " );
    #####: 6813:						strcat( lDialogString , "-e 'mystring' " );
    %%%%%: 6813-block 56
        -: 6814:				}
        -: 6815:				else
        -: 6816:				{
    #####: 6817:						strcat( lDialogString , ")' " ) ;
    %%%%%: 6817-block 57
        -: 6818:				}
    #####: 6819:				strcat(lDialogString, "-e 'on error number -128' " ) ;
    #####: 6820:				strcat(lDialogString, "-e 'end try'") ;
    #####: 6821:				if ( ! osx9orBetter() ) strcat( lDialogString, " -e 'end tell'") ;
    %%%%%: 6821-block 58
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6821-block 60
        -: 6822:		}
    #####: 6823:		else if ( tfd_kdialogPresent() )
    %%%%%: 6823-block 61
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6824:		{
    #####: 6825:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"kdialog");return (char *)1;}
    %%%%%: 6825-block 63
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6825-block 64
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6825-block 65
    #####: 6826:				lWasKdialog = 1 ;
        -: 6827:
    #####: 6828:				strcpy( lDialogString , "kdialog" ) ;
    #####: 6829:								if ( (tfd_kdialogPresent() == 2) && tfd_xpropPresent() )
    %%%%%: 6829-block 66
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6829-block 68
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 6830:				{
    #####: 6831:						strcat(lDialogString, " --attach=$(xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)"); /* contribution: Paul Rouget */
    %%%%%: 6831-block 70
        -: 6832:				}
    #####: 6833:				strcat( lDialogString , " --getopenfilename " ) ;
        -: 6834:
    #####: 6835:				if ( aDefaultPathAndOrFile && strlen(aDefaultPathAndOrFile) )
    %%%%%: 6835-block 71
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6835-block 72
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6836:				{
    #####: 6837:                    if ( aDefaultPathAndOrFile[0] != '/' )
    %%%%%: 6837-block 73
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6838:                    {
    #####: 6839:                        strcat(lDialogString, lLastDirectory) ;
    #####: 6840:                        strcat(lDialogString , "/" ) ;
    %%%%%: 6840-block 74
        -: 6841:                    }
    #####: 6842:                    strcat(lDialogString, "\"") ;
    #####: 6843:                    strcat(lDialogString, aDefaultPathAndOrFile ) ;
    #####: 6844:                    strcat(lDialogString , "\"" ) ;
    %%%%%: 6844-block 75
        -: 6845:				}
        -: 6846:				else
        -: 6847:				{
    #####: 6848:                    strcat(lDialogString, lLastDirectory) ;
    #####: 6849:                    strcat(lDialogString , "/" ) ;
    %%%%%: 6849-block 76
        -: 6850:				}
        -: 6851:
    #####: 6852:				if ( aNumOfFilterPatterns > 0 )
    %%%%%: 6852-block 77
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6853:				{
    #####: 6854:						strcat(lDialogString , " \"" ) ;
    #####: 6855:												strcat( lDialogString , aFilterPatterns[0] ) ;
    #####: 6856:						for ( i = 1 ; i < aNumOfFilterPatterns ; i ++ )
    %%%%%: 6856-block 78
    %%%%%: 6856-block 80
branch  0 never executed
branch  1 never executed (fallthrough)
        -: 6857:						{
    #####: 6858:														strcat( lDialogString , " " ) ;
    #####: 6859:														strcat( lDialogString , aFilterPatterns[i] ) ;
    %%%%%: 6859-block 79
        -: 6860:						}
    #####: 6861:						if ( aSingleFilterDescription && strlen(aSingleFilterDescription) )
    %%%%%: 6861-block 81
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6861-block 82
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6862:						{
    #####: 6863:								strcat( lDialogString , " | " ) ;
    #####: 6864:								strcat( lDialogString , aSingleFilterDescription ) ;
    %%%%%: 6864-block 83
        -: 6865:						}
    #####: 6866:						strcat( lDialogString , "\"" ) ;
    %%%%%: 6866-block 84
        -: 6867:				}
    #####: 6868:				if ( aAllowMultipleSelects )
    %%%%%: 6868-block 85
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6869:				{
    #####: 6870:						strcat( lDialogString , " --multiple --separate-output" ) ;
    %%%%%: 6870-block 86
        -: 6871:				}
    #####: 6872:				if ( aTitle && strlen(aTitle) )
    %%%%%: 6872-block 87
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6872-block 88
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6873:				{
    #####: 6874:						strcat(lDialogString, " --title \"") ;
    #####: 6875:						strcat(lDialogString, aTitle) ;
    #####: 6876:						strcat(lDialogString, "\"") ;
    %%%%%: 6876-block 89
        -: 6877:				}
        -: 6878:		}
    #####: 6879:		else if ( tfd_zenityPresent() || tfd_matedialogPresent() || tfd_shellementaryPresent() || tfd_qarmaPresent() )
    %%%%%: 6879-block 90
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6879-block 92
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 6879-block 94
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
    %%%%%: 6879-block 96
call    9 never executed
branch 10 never executed (fallthrough)
branch 11 never executed
        -: 6880:		{
    #####: 6881:				if ( tfd_zenityPresent() )
    %%%%%: 6881-block 98
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6882:				{
    #####: 6883:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"zenity");return (char *)1;}
    %%%%%: 6883-block 100
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6883-block 101
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6883-block 102
    #####: 6884:						strcpy( lDialogString , "zenity" ) ;
    #####: 6885:												if ( (tfd_zenity3Present() >= 4) && !getenv("SSH_TTY") && tfd_xpropPresent() )
    %%%%%: 6885-block 103
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6885-block 105
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 6885-block 107
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
        -: 6886:						{
    #####: 6887:								strcat( lDialogString, " --attach=$(sleep .01;xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)"); /* contribution: Paul Rouget */
    %%%%%: 6887-block 109
        -: 6888:						}
        -: 6889:				}
    #####: 6890:				else if ( tfd_matedialogPresent() )
    %%%%%: 6890-block 110
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6891:				{
    #####: 6892:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"matedialog");return (char *)1;}
    %%%%%: 6892-block 112
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6892-block 113
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6892-block 114
    #####: 6893:						strcpy( lDialogString , "matedialog" ) ;
    %%%%%: 6893-block 115
        -: 6894:				}
    #####: 6895:				else if ( tfd_shellementaryPresent() )
    %%%%%: 6895-block 116
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6896:				{
    #####: 6897:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"shellementary");return (char *)1;}
    %%%%%: 6897-block 118
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6897-block 119
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6897-block 120
    #####: 6898:						strcpy( lDialogString , "shellementary" ) ;
    %%%%%: 6898-block 121
        -: 6899:				}
        -: 6900:				else
        -: 6901:				{
    #####: 6902:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"qarma");return (char *)1;}
    %%%%%: 6902-block 122
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6902-block 123
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6902-block 124
    #####: 6903:						strcpy( lDialogString , "qarma" ) ;
    #####: 6904:												if ( !getenv("SSH_TTY") && tfd_xpropPresent() )
    %%%%%: 6904-block 125
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 6904-block 127
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 6905:						{
    #####: 6906:								strcat(lDialogString, " --attach=$(xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)"); /* contribution: Paul Rouget */
    %%%%%: 6906-block 129
        -: 6907:						}
        -: 6908:				}
    #####: 6909:				strcat( lDialogString , " --file-selection" ) ;
        -: 6910:
    #####: 6911:				if ( aAllowMultipleSelects )
    %%%%%: 6911-block 130
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6912:				{
    #####: 6913:						strcat( lDialogString , " --multiple" ) ;
    %%%%%: 6913-block 131
        -: 6914:				}
        -: 6915:
    #####: 6916:				strcat(lDialogString, " --title=\"") ;
    #####: 6917:				if (aTitle && strlen(aTitle)) strcat(lDialogString, aTitle) ;
    %%%%%: 6917-block 132
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6917-block 133
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6917-block 134
    #####: 6918:				strcat(lDialogString, "\"") ;
        -: 6919:
    #####: 6920:				if ( aDefaultPathAndOrFile && strlen(aDefaultPathAndOrFile) )
    %%%%%: 6920-block 135
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6920-block 136
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6921:				{
    #####: 6922:						strcat(lDialogString, " --filename=\"") ;
    #####: 6923:						strcat(lDialogString, aDefaultPathAndOrFile) ;
    #####: 6924:						strcat(lDialogString, "\"") ;
    %%%%%: 6924-block 137
        -: 6925:				}
    #####: 6926:				if ( aNumOfFilterPatterns > 0 )
    %%%%%: 6926-block 138
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6927:				{
    #####: 6928:						strcat( lDialogString , " --file-filter='" ) ;
    #####: 6929:						if ( aSingleFilterDescription && strlen(aSingleFilterDescription) )
    %%%%%: 6929-block 139
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6929-block 140
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6930:						{
    #####: 6931:								strcat( lDialogString , aSingleFilterDescription ) ;
    #####: 6932:								strcat( lDialogString , " |" ) ;
    %%%%%: 6932-block 141
        -: 6933:						}
    #####: 6934:						for ( i = 0 ; i < aNumOfFilterPatterns ; i ++ )
    %%%%%: 6934-block 142
    %%%%%: 6934-block 144
branch  0 never executed
branch  1 never executed (fallthrough)
        -: 6935:						{
    #####: 6936:														strcat( lDialogString , " " ) ;
    #####: 6937:														strcat( lDialogString , aFilterPatterns[i] ) ;
    %%%%%: 6937-block 143
        -: 6938:						}
    #####: 6939:						strcat( lDialogString , "' --file-filter='All files | *'" ) ;
    %%%%%: 6939-block 145
        -: 6940:				}
    #####: 6941:				if (tinyfd_silent) strcat( lDialogString , " 2>/dev/null ");
    %%%%%: 6941-block 146
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6941-block 147
        -: 6942:		}
    #####: 6943:		else if (tfd_yadPresent())
    %%%%%: 6943-block 149
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6944:		{
    #####: 6945:		   if (aTitle && !strcmp(aTitle, "tinyfd_query")) { strcpy(tinyfd_response, "yad"); return (char*)1; }
    %%%%%: 6945-block 151
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6945-block 152
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6945-block 153
    #####: 6946:		   strcpy(lDialogString, "yad --file");
    #####: 6947:		   if (aAllowMultipleSelects)
    %%%%%: 6947-block 154
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6948:		   {
    #####: 6949:			  strcat(lDialogString, " --multiple");
    %%%%%: 6949-block 155
        -: 6950:		   }
    #####: 6951:		   if (aTitle && strlen(aTitle))
    %%%%%: 6951-block 156
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6951-block 157
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6952:		   {
    #####: 6953:			  strcat(lDialogString, " --title=\"");
    #####: 6954:			  strcat(lDialogString, aTitle);
    #####: 6955:			  strcat(lDialogString, "\"");
    %%%%%: 6955-block 158
        -: 6956:		   }
    #####: 6957:		   if (aDefaultPathAndOrFile && strlen(aDefaultPathAndOrFile))
    %%%%%: 6957-block 159
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6957-block 160
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6958:		   {
    #####: 6959:			  strcat(lDialogString, " --filename=\"");
    #####: 6960:			  strcat(lDialogString, aDefaultPathAndOrFile);
    #####: 6961:			  strcat(lDialogString, "\"");
    %%%%%: 6961-block 161
        -: 6962:		   }
    #####: 6963:		   if (aNumOfFilterPatterns > 0)
    %%%%%: 6963-block 162
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6964:		   {
    #####: 6965:			  strcat(lDialogString, " --file-filter='");
    #####: 6966:			  if (aSingleFilterDescription && strlen(aSingleFilterDescription))
    %%%%%: 6966-block 163
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6966-block 164
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6967:			  {
    #####: 6968:				 strcat(lDialogString, aSingleFilterDescription);
    #####: 6969:				 strcat(lDialogString, " |");
    %%%%%: 6969-block 165
        -: 6970:			  }
    #####: 6971:			  for (i = 0; i < aNumOfFilterPatterns; i++)
    %%%%%: 6971-block 166
    %%%%%: 6971-block 168
branch  0 never executed
branch  1 never executed (fallthrough)
        -: 6972:			  {
    #####: 6973:				 strcat(lDialogString, " ");
    #####: 6974:				 strcat(lDialogString, aFilterPatterns[i]);
    %%%%%: 6974-block 167
        -: 6975:			  }
    #####: 6976:			  strcat(lDialogString, "' --file-filter='All files | *'");
    %%%%%: 6976-block 169
        -: 6977:		   }
    #####: 6978:		   if (tinyfd_silent) strcat(lDialogString, " 2>/dev/null ");
    %%%%%: 6978-block 170
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6978-block 171
        -: 6979:	  }
    #####: 6980:	  else if ( tkinter3Present( ) )
    %%%%%: 6980-block 172
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 6981:				{
    #####: 6982:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"python3-tkinter");return (char *)1;}
    %%%%%: 6982-block 174
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6982-block 175
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 6982-block 176
    #####: 6983:						strcpy( lDialogString , gPython3Name ) ;
    #####: 6984:						strcat( lDialogString ,
        -: 6985:								" -S -c \"import tkinter;from tkinter import filedialog;root=tkinter.Tk();root.withdraw();");
    #####: 6986:						strcat( lDialogString , "lFiles=filedialog.askopenfilename(");
    #####: 6987:						if ( aAllowMultipleSelects )
    %%%%%: 6987-block 177
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 6988:						{
    #####: 6989:								strcat( lDialogString , "multiple=1," ) ;
    %%%%%: 6989-block 178
        -: 6990:						}
    #####: 6991:						if ( aTitle && strlen(aTitle) )
    %%%%%: 6991-block 179
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6991-block 180
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6992:						{
    #####: 6993:								strcat(lDialogString, "title='") ;
    #####: 6994:								strcat(lDialogString, aTitle) ;
    #####: 6995:								strcat(lDialogString, "',") ;
    %%%%%: 6995-block 181
        -: 6996:						}
    #####: 6997:						if ( aDefaultPathAndOrFile && strlen(aDefaultPathAndOrFile) )
    %%%%%: 6997-block 182
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 6997-block 183
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 6998:						{
    #####: 6999:								getPathWithoutFinalSlash( lString , aDefaultPathAndOrFile ) ;
    %%%%%: 6999-block 184
call    0 never executed
    #####: 7000:								if ( strlen(lString) )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7001:								{
    #####: 7002:										strcat(lDialogString, "initialdir='") ;
    #####: 7003:										strcat(lDialogString, lString ) ;
    #####: 7004:										strcat(lDialogString , "'," ) ;
    %%%%%: 7004-block 186
        -: 7005:								}
    #####: 7006:								getLastName( lString , aDefaultPathAndOrFile ) ;
    %%%%%: 7006-block 187
call    0 never executed
    #####: 7007:								if ( strlen(lString) )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7008:								{
    #####: 7009:										strcat(lDialogString, "initialfile='") ;
    #####: 7010:										strcat(lDialogString, lString ) ;
    #####: 7011:										strcat(lDialogString , "'," ) ;
    %%%%%: 7011-block 189
        -: 7012:								}
        -: 7013:						}
    #####: 7014:						if ( ( aNumOfFilterPatterns > 1 )
    %%%%%: 7014-block 190
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 7015:								|| ( ( aNumOfFilterPatterns == 1 ) /*test because poor osx behaviour*/
    %%%%%: 7015-block 191
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 7016:								&& ( aFilterPatterns[0][strlen(aFilterPatterns[0])-1] != '*' ) ) )
    %%%%%: 7016-block 192
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7017:						{
    #####: 7018:								strcat(lDialogString , "filetypes=(" ) ;
    #####: 7019:								strcat( lDialogString , "('" ) ;
    #####: 7020:								if ( aSingleFilterDescription && strlen(aSingleFilterDescription) )
    %%%%%: 7020-block 193
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7020-block 194
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7021:								{
    #####: 7022:										strcat( lDialogString , aSingleFilterDescription ) ;
    %%%%%: 7022-block 195
        -: 7023:								}
    #####: 7024:								strcat( lDialogString , "',(" ) ;
    #####: 7025:								for ( i = 0 ; i < aNumOfFilterPatterns ; i ++ )
    %%%%%: 7025-block 196
    %%%%%: 7025-block 198
branch  0 never executed
branch  1 never executed (fallthrough)
        -: 7026:								{
    #####: 7027:										strcat( lDialogString , "'" ) ;
    #####: 7028:										strcat( lDialogString , aFilterPatterns[i] ) ;
    #####: 7029:										strcat( lDialogString , "'," ) ;
    %%%%%: 7029-block 197
        -: 7030:								}
    #####: 7031:								strcat( lDialogString , "))," ) ;
    #####: 7032:								strcat( lDialogString , "('All files','*'))" ) ;
    %%%%%: 7032-block 199
        -: 7033:						}
    #####: 7034:						strcat( lDialogString , ");\
    %%%%%: 7034-block 200
        -: 7035:\nif not isinstance(lFiles, tuple):\n\tprint(lFiles)\nelse:\
        -: 7036:\n\tlFilesString=''\n\tfor lFile in lFiles:\n\t\tlFilesString+=str(lFile)+'|'\
        -: 7037:\n\tprint(lFilesString[:-1])\n\"" ) ;
        -: 7038:				}
    #####: 7039:				else if ( tkinter2Present( ) )
    %%%%%: 7039-block 201
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7040:		{
    #####: 7041:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"python2-tkinter");return (char *)1;}
    %%%%%: 7041-block 203
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7041-block 204
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7041-block 205
    #####: 7042:								strcpy( lDialogString , "export PYTHONIOENCODING=utf-8;" ) ;
    #####: 7043:								strcat( lDialogString , gPython2Name ) ;
    #####: 7044:								if ( ! isTerminalRunning( ) && tfd_isDarwin( ) )
    %%%%%: 7044-block 206
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7044-block 208
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 7045:				{
    #####: 7046:				strcat( lDialogString , " -i" ) ;  /* for osx without console */
    %%%%%: 7046-block 210
        -: 7047:				}
    #####: 7048:				strcat( lDialogString ,
        -: 7049:" -S -c \"import Tkinter,tkFileDialog;root=Tkinter.Tk();root.withdraw();");
        -: 7050:
    #####: 7051:		if ( tfd_isDarwin( ) )
    %%%%%: 7051-block 211
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7052:		{
    #####: 7053:						strcat( lDialogString ,
    %%%%%: 7053-block 213
        -: 7054:"import os;os.system('''/usr/bin/osascript -e 'tell app \\\"Finder\\\" to set \
        -: 7055:frontmost of process \\\"Python\\\" to true' ''');");
        -: 7056:				}
    #####: 7057:				strcat( lDialogString , "lFiles=tkFileDialog.askopenfilename(");
    #####: 7058:	if ( aAllowMultipleSelects )
    %%%%%: 7058-block 214
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7059:	{
    #####: 7060:						strcat( lDialogString , "multiple=1," ) ;
    %%%%%: 7060-block 215
        -: 7061:	}
    #####: 7062:	if ( aTitle && strlen(aTitle) )
    %%%%%: 7062-block 216
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7062-block 217
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7063:	{
    #####: 7064:						strcat(lDialogString, "title='") ;
    #####: 7065:						strcat(lDialogString, aTitle) ;
    #####: 7066:						strcat(lDialogString, "',") ;
    %%%%%: 7066-block 218
        -: 7067:	}
    #####: 7068:	if ( aDefaultPathAndOrFile && strlen(aDefaultPathAndOrFile) )
    %%%%%: 7068-block 219
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7068-block 220
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7069:	{
    #####: 7070:						getPathWithoutFinalSlash( lString , aDefaultPathAndOrFile ) ;
    %%%%%: 7070-block 221
call    0 never executed
    #####: 7071:						if ( strlen(lString) )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7072:						{
    #####: 7073:								strcat(lDialogString, "initialdir='") ;
    #####: 7074:								strcat(lDialogString, lString ) ;
    #####: 7075:								strcat(lDialogString , "'," ) ;
    %%%%%: 7075-block 223
        -: 7076:						}
    #####: 7077:						getLastName( lString , aDefaultPathAndOrFile ) ;
    %%%%%: 7077-block 224
call    0 never executed
    #####: 7078:						if ( strlen(lString) )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7079:						{
    #####: 7080:								strcat(lDialogString, "initialfile='") ;
    #####: 7081:								strcat(lDialogString, lString ) ;
    #####: 7082:								strcat(lDialogString , "'," ) ;
    %%%%%: 7082-block 226
        -: 7083:						}
        -: 7084:				}
    #####: 7085:				if ( ( aNumOfFilterPatterns > 1 )
    %%%%%: 7085-block 227
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 7086:						|| ( ( aNumOfFilterPatterns == 1 ) /*test because poor osx behaviour*/
    %%%%%: 7086-block 228
branch  0 never executed (fallthrough)
branch  1 never executed
    #####: 7087:								&& ( aFilterPatterns[0][strlen(aFilterPatterns[0])-1] != '*' ) ) )
    %%%%%: 7087-block 229
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7088:				{
    #####: 7089:						strcat(lDialogString , "filetypes=(" ) ;
    #####: 7090:						strcat( lDialogString , "('" ) ;
    #####: 7091:						if ( aSingleFilterDescription && strlen(aSingleFilterDescription) )
    %%%%%: 7091-block 230
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7091-block 231
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7092:						{
    #####: 7093:								strcat( lDialogString , aSingleFilterDescription ) ;
    %%%%%: 7093-block 232
        -: 7094:						}
    #####: 7095:						strcat( lDialogString , "',(" ) ;
    #####: 7096:						for ( i = 0 ; i < aNumOfFilterPatterns ; i ++ )
    %%%%%: 7096-block 233
    %%%%%: 7096-block 235
branch  0 never executed
branch  1 never executed (fallthrough)
        -: 7097:						{
    #####: 7098:								strcat( lDialogString , "'" ) ;
    #####: 7099:								strcat( lDialogString , aFilterPatterns[i] ) ;
    #####: 7100:								strcat( lDialogString , "'," ) ;
    %%%%%: 7100-block 234
        -: 7101:						}
    #####: 7102:						strcat( lDialogString , "))," ) ;
    #####: 7103:						strcat( lDialogString , "('All files','*'))" ) ;
    %%%%%: 7103-block 236
        -: 7104:				}
    #####: 7105:				strcat( lDialogString , ");\
    %%%%%: 7105-block 237
        -: 7106:\nif not isinstance(lFiles, tuple):\n\tprint lFiles\nelse:\
        -: 7107:\n\tlFilesString=''\n\tfor lFile in lFiles:\n\t\tlFilesString+=str(lFile)+'|'\
        -: 7108:\n\tprint lFilesString[:-1]\n\"" ) ;
        -: 7109:		}
    #####: 7110:		else if ( xdialogPresent() || dialogName() )
    %%%%%: 7110-block 238
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7110-block 240
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 7111:		{
    #####: 7112:				if ( xdialogPresent( ) )
    %%%%%: 7112-block 242
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7113:				{
    #####: 7114:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"xdialog");return (char *)1;}
    %%%%%: 7114-block 244
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7114-block 245
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7114-block 246
    #####: 7115:						lWasGraphicDialog = 1 ;
    #####: 7116:						strcpy( lDialogString , "(Xdialog " ) ;
    %%%%%: 7116-block 247
        -: 7117:				}
    #####: 7118:				else if ( isTerminalRunning( ) )
    %%%%%: 7118-block 248
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7119:				{
    #####: 7120:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"dialog");return (char *)0;}
    %%%%%: 7120-block 250
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7120-block 251
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7120-block 252
    #####: 7121:						strcpy( lDialogString , "(dialog " ) ;
    %%%%%: 7121-block 253
        -: 7122:				}
        -: 7123:				else
        -: 7124:				{
    #####: 7125:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"dialog");return (char *)0;}
    %%%%%: 7125-block 254
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7125-block 255
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7125-block 256
    #####: 7126:						lWasXterm = 1 ;
    #####: 7127:						strcpy( lDialogString , terminalName() ) ;
    %%%%%: 7127-block 257
call    0 never executed
    #####: 7128:						strcat( lDialogString , "'(" ) ;
    #####: 7129:						strcat( lDialogString , dialogName() ) ;
call    0 never executed
    #####: 7130:						strcat( lDialogString , " " ) ;
        -: 7131:				}
        -: 7132:
    #####: 7133:				if ( aTitle && strlen(aTitle) )
    %%%%%: 7133-block 260
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7133-block 261
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7134:				{
    #####: 7135:						strcat(lDialogString, "--title \"") ;
    #####: 7136:						strcat(lDialogString, aTitle) ;
    #####: 7137:						strcat(lDialogString, "\" ") ;
    %%%%%: 7137-block 262
        -: 7138:				}
        -: 7139:
    #####: 7140:				if ( !xdialogPresent() && !gdialogPresent() )
    %%%%%: 7140-block 263
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7140-block 265
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 7141:				{
    #####: 7142:						strcat(lDialogString, "--backtitle \"") ;
    #####: 7143:						strcat(lDialogString,
        -: 7144:								"tab: focus | /: populate | spacebar: fill text field | ok: TEXT FIELD ONLY") ;
    #####: 7145:						strcat(lDialogString, "\" ") ;
    %%%%%: 7145-block 267
        -: 7146:				}
        -: 7147:
    #####: 7148:				strcat( lDialogString , "--fselect \"" ) ;
    #####: 7149:				if ( aDefaultPathAndOrFile && strlen(aDefaultPathAndOrFile) )
    %%%%%: 7149-block 268
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7149-block 269
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7150:				{
    #####: 7151:						if ( ! strchr(aDefaultPathAndOrFile, '/') )
    %%%%%: 7151-block 270
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7152:						{
    #####: 7153:								strcat(lDialogString, "./") ;
    %%%%%: 7153-block 271
        -: 7154:						}
    #####: 7155:						strcat(lDialogString, aDefaultPathAndOrFile) ;
    %%%%%: 7155-block 272
        -: 7156:				}
    #####: 7157:				else if ( ! isTerminalRunning( ) && !lWasGraphicDialog )
    %%%%%: 7157-block 273
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7157-block 275
branch  3 never executed (fallthrough)
branch  4 never executed
        -: 7158:				{
    #####: 7159:						strcat(lDialogString, getenv("HOME")) ;
    %%%%%: 7159-block 276
call    0 never executed
    #####: 7160:						strcat(lDialogString, "/");
        -: 7161:				}
        -: 7162:				else
        -: 7163:				{
    #####: 7164:						strcat(lDialogString, "./") ;
    %%%%%: 7164-block 278
        -: 7165:				}
        -: 7166:
    #####: 7167:				if ( lWasGraphicDialog )
    %%%%%: 7167-block 279
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7168:				{
    #####: 7169:						strcat(lDialogString, "\" 0 60 ) 2>&1 ") ;
    %%%%%: 7169-block 280
        -: 7170:				}
        -: 7171:				else
        -: 7172:				{
    #####: 7173:						strcat(lDialogString, "\" 0 60  >/dev/tty) ") ;
    #####: 7174:						if ( lWasXterm )
    %%%%%: 7174-block 281
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7175:						{
    #####: 7176:								strcat( lDialogString ,
    %%%%%: 7176-block 282
        -: 7177:								"2>/tmp/tinyfd.txt';cat /tmp/tinyfd.txt;rm /tmp/tinyfd.txt");
        -: 7178:						}
        -: 7179:						else
        -: 7180:						{
    #####: 7181:								strcat(lDialogString, "2>&1 ; clear >/dev/tty") ;
    %%%%%: 7181-block 283
        -: 7182:						}
        -: 7183:				}
        -: 7184:		}
        -: 7185:		else
        -: 7186:		{
    #####: 7187:			if (aTitle&&!strcmp(aTitle,"tinyfd_query")){return tinyfd_inputBox(aTitle,NULL,NULL);}
    %%%%%: 7187-block 285
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7187-block 286
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7187-block 287
call    4 never executed
    #####: 7188:								strcpy(lBuff, "Open file from ");
    #####: 7189:								strcat(lBuff, getCurDir());
    %%%%%: 7189-block 289
call    0 never executed
    #####: 7190:								lPointerInputBox = tinyfd_inputBox(NULL, NULL, NULL); /* obtain a pointer on the current content of tinyfd_inputBox */
call    0 never executed
    #####: 7191:								if (lPointerInputBox) strcpy(lDialogString, lPointerInputBox); /* preserve the current content of tinyfd_inputBox */
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7191-block 292
    #####: 7192:								p = tinyfd_inputBox(aTitle, lBuff, "");
    %%%%%: 7192-block 293
call    0 never executed
    #####: 7193:								if ( p ) strcpy(lBuff, p); else lBuff[0] = '\0';
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7193-block 295
    %%%%%: 7193-block 296
    #####: 7194:								if (lPointerInputBox) strcpy(lPointerInputBox, lDialogString); /* restore its previous content to tinyfd_inputBox */
    %%%%%: 7194-block 297
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7194-block 298
    #####: 7195:			if ( ! fileExists(lBuff) )
    %%%%%: 7195-block 299
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7196:			{
    #####: 7197:										free(lBuff);
    #####: 7198:										lBuff = NULL;
    %%%%%: 7198-block 301
        -: 7199:			}
        -: 7200:								else
        -: 7201:								{
    #####: 7202:										lBuff = (char *)( realloc( lBuff, (strlen(lBuff)+1) * sizeof(char)));
    %%%%%: 7202-block 302
        -: 7203:								}
    #####: 7204:								return lBuff ;
    %%%%%: 7204-block 303
        -: 7205:		}
        -: 7206:
    #####: 7207:	if (tinyfd_verbose) printf( "lDialogString: %s\n" , lDialogString ) ;
    %%%%%: 7207-block 304
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7207-block 305
call    2 never executed
    #####: 7208:	if ( ! ( lIn = popen( lDialogString , "r" ) ) )
    %%%%%: 7208-block 306
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7209:	{
    #####: 7210:				free(lBuff);
    #####: 7211:				lBuff = NULL;
    #####: 7212:				return NULL ;
    %%%%%: 7212-block 308
        -: 7213:	}
    #####: 7214:		lBuff[0]='\0';
    #####: 7215:		p = lBuff;
    #####: 7216:		while ( fgets( p , sizeof( lBuff ) , lIn ) != NULL )
    %%%%%: 7216-block 309
    %%%%%: 7216-block 311
call    0 never executed
branch  1 never executed
branch  2 never executed (fallthrough)
        -: 7217:		{
    #####: 7218:				p += strlen( p );
    %%%%%: 7218-block 310
        -: 7219:		}
    #####: 7220:	pclose( lIn ) ;
    %%%%%: 7220-block 313
call    0 never executed
        -: 7221:
    #####: 7222:	if ( strlen( lBuff ) && lBuff[strlen( lBuff ) -1] == '\n' )
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7222-block 315
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7223:	{
    #####: 7224:		lBuff[strlen( lBuff ) -1] = '\0' ;
    %%%%%: 7224-block 316
        -: 7225:	}
        -: 7226:	/* printf( "strlen lBuff: %d\n" , strlen( lBuff ) ) ; */
    #####: 7227:		if ( lWasKdialog && aAllowMultipleSelects )
    %%%%%: 7227-block 317
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7227-block 318
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7228:		{
    #####: 7229:				p = lBuff ;
    #####: 7230:				while ( ( p = strchr( p , '\n' ) ) )
    %%%%%: 7230-block 319
    %%%%%: 7230-block 321
branch  0 never executed
branch  1 never executed (fallthrough)
    #####: 7231:						* p = '|' ;
    %%%%%: 7231-block 320
        -: 7232:		}
        -: 7233:		/* printf( "lBuff2: %s\n" , lBuff ) ; */
    #####: 7234:		if ( ! strlen( lBuff )  )
    %%%%%: 7234-block 322
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7235:		{
    #####: 7236:						free(lBuff);
    #####: 7237:						lBuff = NULL;
    #####: 7238:						return NULL;
    %%%%%: 7238-block 323
        -: 7239:		}
    #####: 7240:		if ( aAllowMultipleSelects && strchr(lBuff, '|') )
    %%%%%: 7240-block 324
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7240-block 325
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7241:		{
    #####: 7242:            if( ! ensureFilesExist( lBuff , lBuff ) )
    %%%%%: 7242-block 326
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7242-block 329
        -: 7243:            {
    #####: 7244:                    free(lBuff);
    #####: 7245:                    lBuff = NULL;
    #####: 7246:                    return NULL;
    %%%%%: 7246-block 328
        -: 7247:            }
        -: 7248:		}
    #####: 7249:		else if ( !fileExists(lBuff) )
    %%%%%: 7249-block 330
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7250:		{
    #####: 7251:						free(lBuff);
    #####: 7252:						lBuff = NULL;
    #####: 7253:						return NULL;
    %%%%%: 7253-block 332
        -: 7254:        }
        -: 7255:
    #####: 7256:        p = strrchr(lBuff, '|');
    #####: 7257:        if ( !p ) p = lBuff ;
    %%%%%: 7257-block 333
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7257-block 334
    #####: 7258:        else p ++ ;
    %%%%%: 7258-block 335
    #####: 7259:        getPathWithoutFinalSlash( lString , p ) ;
    %%%%%: 7259-block 336
call    0 never executed
        -: 7260:        /* printf( "lString [%lu]: %s\n" , strlen(lString) , lString ) ; */
    #####: 7261:        if ( strlen( lString ) && ! dirExists( lString ) )
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7261-block 338
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
        -: 7262:        {
    #####: 7263:            return NULL ;
    %%%%%: 7263-block 340
        -: 7264:        }
    #####: 7265:        strcpy(lLastDirectory, lString) ;
        -: 7266:
    #####: 7267:        lBuff = (char *)( realloc( lBuff, (strlen(lBuff)+1) * sizeof(char)));
        -: 7268:
        -: 7269:        /*printf( "lBuff3 [%lu]: %s\n" , strlen(lBuff) , lBuff ) ; */
    #####: 7270:        return lBuff ;
    %%%%%: 7270-block 341
        -: 7271:}
        -: 7272:
        -: 7273:
function tinyfd_selectFolderDialog called 0 returned 0% blocks executed 0%
    #####: 7274:char * tinyfd_selectFolderDialog(
        -: 7275:    char const * aTitle , /* "" */
        -: 7276:    char const * aDefaultPath ) /* "" */
        -: 7277:{
        -: 7278:    static char lBuff[MAX_PATH_OR_CMD] ;
        -: 7279:    static char lLastDirectory[MAX_PATH_OR_CMD] = "$PWD" ;
        -: 7280:
        -: 7281:    char lDialogString[MAX_PATH_OR_CMD] ;
        -: 7282:    FILE * lIn ;
        -: 7283:    char * p ;
        -: 7284:    char * lPointerInputBox ;
    #####: 7285:    int lWasGraphicDialog = 0 ;
    #####: 7286:    int lWasXterm = 0 ;
    #####: 7287:    lBuff[0]='\0';
        -: 7288:
    #####: 7289:    if (tfd_quoteDetected(aTitle)) return tinyfd_selectFolderDialog("INVALID TITLE WITH QUOTES", aDefaultPath);
    %%%%%: 7289-block 2
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7289-block 4
call    3 never executed
    #####: 7290:    if (tfd_quoteDetected(aDefaultPath)) return tinyfd_selectFolderDialog(aTitle, "INVALID DEFAULT_PATH WITH QUOTES");
    %%%%%: 7290-block 6
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7290-block 8
call    3 never executed
        -: 7291:
    #####: 7292:		if ( osascriptPresent( ))
    %%%%%: 7292-block 10
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7293:		{
    #####: 7294:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"applescript");return (char *)1;}
    %%%%%: 7294-block 12
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7294-block 13
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7294-block 14
    #####: 7295:				strcpy( lDialogString , "osascript ");
    #####: 7296:				if ( ! osx9orBetter() ) strcat( lDialogString , " -e 'tell application \"System Events\"' -e 'Activate'");
    %%%%%: 7296-block 15
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7296-block 17
    #####: 7297:				strcat( lDialogString , " -e 'try' -e 'POSIX path of ( choose folder ");
    #####: 7298:				if ( aTitle && strlen(aTitle) )
    %%%%%: 7298-block 18
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7298-block 19
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7299:				{
    #####: 7300:				strcat(lDialogString, "with prompt \"") ;
    #####: 7301:				strcat(lDialogString, aTitle) ;
    #####: 7302:				strcat(lDialogString, "\" ") ;
    %%%%%: 7302-block 20
        -: 7303:				}
    #####: 7304:				if ( aDefaultPath && strlen(aDefaultPath) )
    %%%%%: 7304-block 21
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7304-block 22
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7305:				{
    #####: 7306:						strcat(lDialogString, "default location \"") ;
    #####: 7307:						strcat(lDialogString, aDefaultPath ) ;
    #####: 7308:						strcat(lDialogString , "\" " ) ;
    %%%%%: 7308-block 23
        -: 7309:				}
    #####: 7310:				strcat( lDialogString , ")' " ) ;
    #####: 7311:				strcat(lDialogString, "-e 'on error number -128' " ) ;
    #####: 7312:				strcat(lDialogString, "-e 'end try'") ;
    #####: 7313:				if ( ! osx9orBetter() ) strcat( lDialogString, " -e 'end tell'") ;
    %%%%%: 7313-block 24
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7313-block 26
        -: 7314:		}
    #####: 7315:		else if ( tfd_kdialogPresent() )
    %%%%%: 7315-block 27
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7316:		{
    #####: 7317:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"kdialog");return (char *)1;}
    %%%%%: 7317-block 29
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7317-block 30
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7317-block 31
    #####: 7318:				strcpy( lDialogString , "kdialog" ) ;
    #####: 7319:								if ( (tfd_kdialogPresent() == 2) && tfd_xpropPresent() )
    %%%%%: 7319-block 32
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7319-block 34
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 7320:				{
    #####: 7321:						strcat(lDialogString, " --attach=$(xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)"); /* contribution: Paul Rouget */
    %%%%%: 7321-block 36
        -: 7322:				}
    #####: 7323:				strcat( lDialogString , " --getexistingdirectory " ) ;
        -: 7324:
    #####: 7325:				if ( aDefaultPath && strlen(aDefaultPath) )
    %%%%%: 7325-block 37
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7325-block 38
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7326:				{
    #####: 7327:						if ( aDefaultPath[0] != '/' )
    %%%%%: 7327-block 39
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7328:						{
    #####: 7329:                            strcat(lDialogString, lLastDirectory) ;
    #####: 7330:                            strcat(lDialogString , "/" ) ;
    %%%%%: 7330-block 40
        -: 7331:						}
    #####: 7332:						strcat(lDialogString, "\"") ;
    #####: 7333:						strcat(lDialogString, aDefaultPath ) ;
    #####: 7334:						strcat(lDialogString , "\"" ) ;
    %%%%%: 7334-block 41
        -: 7335:				}
        -: 7336:				else
        -: 7337:				{
    #####: 7338:                        strcat(lDialogString, lLastDirectory) ;
    #####: 7339:                        strcat(lDialogString , "/" ) ;
    %%%%%: 7339-block 42
        -: 7340:				}
        -: 7341:
    #####: 7342:				if ( aTitle && strlen(aTitle) )
    %%%%%: 7342-block 43
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7342-block 44
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7343:				{
    #####: 7344:						strcat(lDialogString, " --title \"") ;
    #####: 7345:						strcat(lDialogString, aTitle) ;
    #####: 7346:						strcat(lDialogString, "\"") ;
    %%%%%: 7346-block 45
        -: 7347:				}
        -: 7348:		}
    #####: 7349:		else if ( tfd_zenityPresent() || tfd_matedialogPresent() || tfd_shellementaryPresent() || tfd_qarmaPresent() )
    %%%%%: 7349-block 46
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7349-block 48
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 7349-block 50
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
    %%%%%: 7349-block 52
call    9 never executed
branch 10 never executed (fallthrough)
branch 11 never executed
        -: 7350:		{
    #####: 7351:				if ( tfd_zenityPresent() )
    %%%%%: 7351-block 54
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7352:				{
    #####: 7353:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"zenity");return (char *)1;}
    %%%%%: 7353-block 56
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7353-block 57
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7353-block 58
    #####: 7354:						strcpy( lDialogString , "zenity" ) ;
    #####: 7355:												if ( (tfd_zenity3Present() >= 4) && !getenv("SSH_TTY") && tfd_xpropPresent() )
    %%%%%: 7355-block 59
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7355-block 61
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 7355-block 63
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
        -: 7356:						{
    #####: 7357:								strcat( lDialogString, " --attach=$(sleep .01;xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)"); /* contribution: Paul Rouget */
    %%%%%: 7357-block 65
        -: 7358:						}
        -: 7359:				}
    #####: 7360:				else if ( tfd_matedialogPresent() )
    %%%%%: 7360-block 66
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7361:				{
    #####: 7362:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"matedialog");return (char *)1;}
    %%%%%: 7362-block 68
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7362-block 69
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7362-block 70
    #####: 7363:						strcpy( lDialogString , "matedialog" ) ;
    %%%%%: 7363-block 71
        -: 7364:				}
    #####: 7365:				else if ( tfd_shellementaryPresent() )
    %%%%%: 7365-block 72
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7366:				{
    #####: 7367:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"shellementary");return (char *)1;}
    %%%%%: 7367-block 74
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7367-block 75
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7367-block 76
    #####: 7368:						strcpy( lDialogString , "shellementary" ) ;
    %%%%%: 7368-block 77
        -: 7369:				}
        -: 7370:				else
        -: 7371:				{
    #####: 7372:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"qarma");return (char *)1;}
    %%%%%: 7372-block 78
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7372-block 79
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7372-block 80
    #####: 7373:						strcpy( lDialogString , "qarma" ) ;
    #####: 7374:												if ( !getenv("SSH_TTY") && tfd_xpropPresent() )
    %%%%%: 7374-block 81
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7374-block 83
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 7375:						{
    #####: 7376:								strcat(lDialogString, " --attach=$(xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)"); /* contribution: Paul Rouget */
    %%%%%: 7376-block 85
        -: 7377:						}
        -: 7378:				}
    #####: 7379:				strcat( lDialogString , " --file-selection --directory" ) ;
        -: 7380:
    #####: 7381:				strcat(lDialogString, " --title=\"") ;
    #####: 7382:				if (aTitle && strlen(aTitle)) strcat(lDialogString, aTitle) ;
    %%%%%: 7382-block 86
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7382-block 87
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7382-block 88
    #####: 7383:				strcat(lDialogString, "\"") ;
        -: 7384:
    #####: 7385:				if ( aDefaultPath && strlen(aDefaultPath) )
    %%%%%: 7385-block 89
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7385-block 90
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7386:				{
    #####: 7387:						strcat(lDialogString, " --filename=\"") ;
    #####: 7388:						strcat(lDialogString, aDefaultPath) ;
    #####: 7389:						strcat(lDialogString, "\"") ;
    %%%%%: 7389-block 91
        -: 7390:				}
    #####: 7391:				if (tinyfd_silent) strcat( lDialogString , " 2>/dev/null ");
    %%%%%: 7391-block 92
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7391-block 93
        -: 7392:		}
    #####: 7393:		else if (tfd_yadPresent())
    %%%%%: 7393-block 95
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7394:		{
    #####: 7395:		   if (aTitle && !strcmp(aTitle, "tinyfd_query")) { strcpy(tinyfd_response, "yad"); return (char*)1; }
    %%%%%: 7395-block 97
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7395-block 98
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7395-block 99
    #####: 7396:		   strcpy(lDialogString, "yad --file --directory");
    #####: 7397:		   if (aTitle && strlen(aTitle))
    %%%%%: 7397-block 100
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7397-block 101
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7398:		   {
    #####: 7399:			  strcat(lDialogString, " --title=\"");
    #####: 7400:			  strcat(lDialogString, aTitle);
    #####: 7401:			  strcat(lDialogString, "\"");
    %%%%%: 7401-block 102
        -: 7402:		   }
    #####: 7403:		   if (aDefaultPath && strlen(aDefaultPath))
    %%%%%: 7403-block 103
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7403-block 104
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7404:		   {
    #####: 7405:			  strcat(lDialogString, " --filename=\"");
    #####: 7406:			  strcat(lDialogString, aDefaultPath);
    #####: 7407:			  strcat(lDialogString, "\"");
    %%%%%: 7407-block 105
        -: 7408:		   }
    #####: 7409:		   if (tinyfd_silent) strcat(lDialogString, " 2>/dev/null ");
    %%%%%: 7409-block 106
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7409-block 107
        -: 7410:	  }
    #####: 7411:	  else if ( !xdialogPresent() && tkinter3Present( ) )
    %%%%%: 7411-block 108
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7411-block 110
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 7412:				{
    #####: 7413:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"python3-tkinter");return (char *)1;}
    %%%%%: 7413-block 112
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7413-block 113
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7413-block 114
    #####: 7414:						strcpy( lDialogString , gPython3Name ) ;
    #####: 7415:						strcat( lDialogString ,
        -: 7416:								" -S -c \"import tkinter;from tkinter import filedialog;root=tkinter.Tk();root.withdraw();");
    #####: 7417:						strcat( lDialogString , "res=filedialog.askdirectory(");
    #####: 7418:						if ( aTitle && strlen(aTitle) )
    %%%%%: 7418-block 115
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7418-block 116
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7419:						{
    #####: 7420:								strcat(lDialogString, "title='") ;
    #####: 7421:								strcat(lDialogString, aTitle) ;
    #####: 7422:								strcat(lDialogString, "',") ;
    %%%%%: 7422-block 117
        -: 7423:						}
    #####: 7424:						if ( aDefaultPath && strlen(aDefaultPath) )
    %%%%%: 7424-block 118
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7424-block 119
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7425:						{
    #####: 7426:								strcat(lDialogString, "initialdir='") ;
    #####: 7427:								strcat(lDialogString, aDefaultPath ) ;
    #####: 7428:								strcat(lDialogString , "'" ) ;
    %%%%%: 7428-block 120
        -: 7429:						}
    #####: 7430:						strcat( lDialogString, ");\nif not isinstance(res, tuple):\n\tprint(res)\n\"" ) ;
    %%%%%: 7430-block 121
        -: 7431:				}
    #####: 7432:				else if ( !xdialogPresent() && tkinter2Present( ) )
    %%%%%: 7432-block 122
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7432-block 124
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 7433:		{
    #####: 7434:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"python2-tkinter");return (char *)1;}
    %%%%%: 7434-block 126
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7434-block 127
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7434-block 128
    #####: 7435:								strcpy( lDialogString , "export PYTHONIOENCODING=utf-8;" ) ;
    #####: 7436:				strcat( lDialogString , gPython2Name ) ;
    #####: 7437:				if ( ! isTerminalRunning( ) && tfd_isDarwin( ) )
    %%%%%: 7437-block 129
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7437-block 131
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 7438:				{
    #####: 7439:				strcat( lDialogString , " -i" ) ;  /* for osx without console */
    %%%%%: 7439-block 133
        -: 7440:				}
    #####: 7441:		strcat( lDialogString ,
        -: 7442:" -S -c \"import Tkinter,tkFileDialog;root=Tkinter.Tk();root.withdraw();");
        -: 7443:
    #####: 7444:		if ( tfd_isDarwin( ) )
    %%%%%: 7444-block 134
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7445:		{
    #####: 7446:						strcat( lDialogString ,
    %%%%%: 7446-block 136
        -: 7447:"import os;os.system('''/usr/bin/osascript -e 'tell app \\\"Finder\\\" to set \
        -: 7448:frontmost of process \\\"Python\\\" to true' ''');");
        -: 7449:				}
        -: 7450:
    #####: 7451:				strcat( lDialogString , "print tkFileDialog.askdirectory(");
    #####: 7452:			if ( aTitle && strlen(aTitle) )
    %%%%%: 7452-block 137
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7452-block 138
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7453:			{
    #####: 7454:						strcat(lDialogString, "title='") ;
    #####: 7455:						strcat(lDialogString, aTitle) ;
    #####: 7456:						strcat(lDialogString, "',") ;
    %%%%%: 7456-block 139
        -: 7457:			}
    #####: 7458:		if ( aDefaultPath && strlen(aDefaultPath) )
    %%%%%: 7458-block 140
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7458-block 141
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7459:		{
    #####: 7460:								strcat(lDialogString, "initialdir='") ;
    #####: 7461:								strcat(lDialogString, aDefaultPath ) ;
    #####: 7462:								strcat(lDialogString , "'" ) ;
    %%%%%: 7462-block 142
        -: 7463:				}
    #####: 7464:				strcat( lDialogString , ")\"" ) ;
    %%%%%: 7464-block 143
        -: 7465:		}
    #####: 7466:		else if ( xdialogPresent() || dialogName() )
    %%%%%: 7466-block 144
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7466-block 146
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 7467:		{
    #####: 7468:				if ( xdialogPresent( ) )
    %%%%%: 7468-block 148
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7469:				{
    #####: 7470:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"xdialog");return (char *)1;}
    %%%%%: 7470-block 150
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7470-block 151
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7470-block 152
    #####: 7471:						lWasGraphicDialog = 1 ;
    #####: 7472:						strcpy( lDialogString , "(Xdialog " ) ;
    %%%%%: 7472-block 153
        -: 7473:				}
    #####: 7474:				else if ( isTerminalRunning( ) )
    %%%%%: 7474-block 154
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7475:				{
    #####: 7476:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"dialog");return (char *)0;}
    %%%%%: 7476-block 156
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7476-block 157
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7476-block 158
    #####: 7477:						strcpy( lDialogString , "(dialog " ) ;
    %%%%%: 7477-block 159
        -: 7478:				}
        -: 7479:				else
        -: 7480:				{
    #####: 7481:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"dialog");return (char *)0;}
    %%%%%: 7481-block 160
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7481-block 161
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7481-block 162
    #####: 7482:						lWasXterm = 1 ;
    #####: 7483:						strcpy( lDialogString , terminalName() ) ;
    %%%%%: 7483-block 163
call    0 never executed
    #####: 7484:						strcat( lDialogString , "'(" ) ;
    #####: 7485:						strcat( lDialogString , dialogName() ) ;
call    0 never executed
    #####: 7486:						strcat( lDialogString , " " ) ;
        -: 7487:				}
        -: 7488:
    #####: 7489:				if ( aTitle && strlen(aTitle) )
    %%%%%: 7489-block 166
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7489-block 167
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7490:				{
    #####: 7491:						strcat(lDialogString, "--title \"") ;
    #####: 7492:						strcat(lDialogString, aTitle) ;
    #####: 7493:						strcat(lDialogString, "\" ") ;
    %%%%%: 7493-block 168
        -: 7494:				}
        -: 7495:
    #####: 7496:				if ( !xdialogPresent() && !gdialogPresent() )
    %%%%%: 7496-block 169
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7496-block 171
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 7497:				{
    #####: 7498:						strcat(lDialogString, "--backtitle \"") ;
    #####: 7499:						strcat(lDialogString,
        -: 7500:								"tab: focus | /: populate | spacebar: fill text field | ok: TEXT FIELD ONLY") ;
    #####: 7501:						strcat(lDialogString, "\" ") ;
    %%%%%: 7501-block 173
        -: 7502:				}
        -: 7503:
    #####: 7504:				strcat( lDialogString , "--dselect \"" ) ;
    #####: 7505:				if ( aDefaultPath && strlen(aDefaultPath) )
    %%%%%: 7505-block 174
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7505-block 175
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7506:				{
    #####: 7507:						strcat(lDialogString, aDefaultPath) ;
    #####: 7508:						ensureFinalSlash(lDialogString);
    %%%%%: 7508-block 176
call    0 never executed
        -: 7509:				}
    #####: 7510:				else if ( ! isTerminalRunning( ) && !lWasGraphicDialog )
    %%%%%: 7510-block 177
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7510-block 179
branch  3 never executed (fallthrough)
branch  4 never executed
        -: 7511:				{
    #####: 7512:						strcat(lDialogString, getenv("HOME")) ;
    %%%%%: 7512-block 180
call    0 never executed
    #####: 7513:						strcat(lDialogString, "/");
        -: 7514:				}
        -: 7515:				else
        -: 7516:				{
    #####: 7517:						strcat(lDialogString, "./") ;
    %%%%%: 7517-block 182
        -: 7518:				}
        -: 7519:
    #####: 7520:				if ( lWasGraphicDialog )
    %%%%%: 7520-block 183
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7521:				{
    #####: 7522:						strcat(lDialogString, "\" 0 60 ) 2>&1 ") ;
    %%%%%: 7522-block 184
        -: 7523:				}
        -: 7524:				else
        -: 7525:				{
    #####: 7526:						strcat(lDialogString, "\" 0 60  >/dev/tty) ") ;
    #####: 7527:						if ( lWasXterm )
    %%%%%: 7527-block 185
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7528:						{
    #####: 7529:						  strcat( lDialogString ,
    %%%%%: 7529-block 186
        -: 7530:								"2>/tmp/tinyfd.txt';cat /tmp/tinyfd.txt;rm /tmp/tinyfd.txt");
        -: 7531:						}
        -: 7532:						else
        -: 7533:						{
    #####: 7534:								strcat(lDialogString, "2>&1 ; clear >/dev/tty") ;
    %%%%%: 7534-block 187
        -: 7535:						}
        -: 7536:				}
        -: 7537:		}
        -: 7538:		else
        -: 7539:		{
    #####: 7540:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){return tinyfd_inputBox(aTitle,NULL,NULL);}
    %%%%%: 7540-block 189
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7540-block 190
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7540-block 191
call    4 never executed
    #####: 7541:								strcpy(lBuff, "Select folder from ");
    #####: 7542:								strcat(lBuff, getCurDir());
    %%%%%: 7542-block 193
call    0 never executed
    #####: 7543:								lPointerInputBox = tinyfd_inputBox(NULL, NULL, NULL); /* obtain a pointer on the current content of tinyfd_inputBox */
call    0 never executed
    #####: 7544:								if (lPointerInputBox) strcpy(lDialogString, lPointerInputBox); /* preserve the current content of tinyfd_inputBox */
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7544-block 196
    #####: 7545:								p = tinyfd_inputBox(aTitle, lBuff, "");
    %%%%%: 7545-block 197
call    0 never executed
    #####: 7546:								if (p) strcpy(lBuff, p); else lBuff[0] = '\0';
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7546-block 199
    %%%%%: 7546-block 200
    #####: 7547:								if (lPointerInputBox) strcpy(lPointerInputBox, lDialogString); /* restore its previous content to tinyfd_inputBox */
    %%%%%: 7547-block 201
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7547-block 202
    #####: 7548:								p = lBuff;
        -: 7549:
    #####: 7550:				if ( !p || ! strlen( p ) || ! dirExists( p ) )
    %%%%%: 7550-block 203
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7550-block 204
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7550-block 205
call    4 never executed
branch  5 never executed (fallthrough)
branch  6 never executed
        -: 7551:				{
    #####: 7552:						return NULL ;
    %%%%%: 7552-block 207
        -: 7553:				}
    #####: 7554:				return p ;
    %%%%%: 7554-block 208
        -: 7555:		}
    #####: 7556:	if (tinyfd_verbose) printf( "lDialogString: %s\n" , lDialogString ) ;
    %%%%%: 7556-block 209
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7556-block 210
call    2 never executed
    #####: 7557:	if ( ! ( lIn = popen( lDialogString , "r" ) ) )
    %%%%%: 7557-block 211
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7558:	{
    #####: 7559:		return NULL ;
    %%%%%: 7559-block 213
        -: 7560:	}
    #####: 7561:    while ( fgets( lBuff , sizeof( lBuff ) , lIn ) != NULL )
    %%%%%: 7561-block 214
    %%%%%: 7561-block 215
call    0 never executed
branch  1 never executed
branch  2 never executed (fallthrough)
        -: 7562:    {}
    #####: 7563:    pclose( lIn ) ;
    %%%%%: 7563-block 217
call    0 never executed
    #####: 7564:	if ( strlen( lBuff ) && lBuff[strlen( lBuff ) -1] == '\n' )
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7564-block 219
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7565:	{
    #####: 7566:		lBuff[strlen( lBuff ) -1] = '\0' ;
    %%%%%: 7566-block 220
        -: 7567:	}
        -: 7568:    /* printf( "lBuff: %s\n" , lBuff ) ; */
    #####: 7569:    if ( ! strlen( lBuff ) || ! dirExists( lBuff ) )
    %%%%%: 7569-block 221
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7569-block 222
call    2 never executed
branch  3 never executed (fallthrough)
branch  4 never executed
        -: 7570:    {
    #####: 7571:            return NULL ;
    %%%%%: 7571-block 224
        -: 7572:    }
        -: 7573:
    #####: 7574:	getPathWithoutFinalSlash( lLastDirectory , lBuff ) ;
    %%%%%: 7574-block 225
call    0 never executed
        -: 7575:
    #####: 7576:    return lBuff ;
        -: 7577:}
        -: 7578:
        -: 7579:
        -: 7580:/* aDefaultRGB is used only if aDefaultHexRGB is absent */
        -: 7581:/* aDefaultRGB and aoResultRGB can be the same array */
        -: 7582:/* returns NULL on cancel */
        -: 7583:/* returns the hexcolor as a string "#FF0000" */
        -: 7584:/* aoResultRGB also contains the result */
function tinyfd_colorChooser called 0 returned 0% blocks executed 0%
    #####: 7585:char * tinyfd_colorChooser(
        -: 7586:		char const * aTitle , /* NULL or "" */
        -: 7587:		char const * aDefaultHexRGB , /* NULL or "#FF0000"*/
        -: 7588:		unsigned char const aDefaultRGB[3] , /* { 0 , 255 , 255 } */
        -: 7589:		unsigned char aoResultRGB[3] ) /* { 0 , 0 , 0 } */
        -: 7590:{
        -: 7591:		static char lDefaultHexRGB[16];
        -: 7592:		char lBuff[128] ;
        -: 7593:
        -: 7594:		char lTmp[128] ;
        -: 7595:#if !((defined(__cplusplus ) && __cplusplus >= 201103L) || (defined(__STDC_VERSION__) && __STDC_VERSION__ >= 199901L) || defined(__clang__))
        -: 7596:				char * lTmp2 ;
        -: 7597:#endif
        -: 7598:		char lDialogString[MAX_PATH_OR_CMD] ;
        -: 7599:		unsigned char lDefaultRGB[3];
        -: 7600:		char * p;
        -: 7601:				char * lPointerInputBox;
        -: 7602:		FILE * lIn ;
        -: 7603:		int i ;
    #####: 7604:		int lWasZenity3 = 0 ;
    #####: 7605:		int lWasOsascript = 0 ;
    #####: 7606:		int lWasXdialog = 0 ;
    #####: 7607:		lBuff[0]='\0';
        -: 7608:
    #####: 7609:				if (tfd_quoteDetected(aTitle)) return tinyfd_colorChooser("INVALID TITLE WITH QUOTES", aDefaultHexRGB, aDefaultRGB, aoResultRGB);
    %%%%%: 7609-block 2
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7609-block 4
call    3 never executed
    #####: 7610:				if (tfd_quoteDetected(aDefaultHexRGB)) return tinyfd_colorChooser(aTitle, "INVALID DEFAULT_HEX_RGB WITH QUOTES: use the GRAVE ACCENT \\x60 instead.", aDefaultRGB, aoResultRGB);
    %%%%%: 7610-block 6
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7610-block 8
call    3 never executed
        -: 7611:
    #####: 7612:				if (aDefaultHexRGB && (strlen(aDefaultHexRGB)==7) )
    %%%%%: 7612-block 10
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7612-block 11
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7613:				{
    #####: 7614:						Hex2RGB(aDefaultHexRGB, lDefaultRGB);
    %%%%%: 7614-block 12
call    0 never executed
    #####: 7615:			strcpy(lDefaultHexRGB, aDefaultHexRGB);
        -: 7616:				}
        -: 7617:				else
        -: 7618:				{
    #####: 7619:						lDefaultRGB[0] = aDefaultRGB[0];
    #####: 7620:						lDefaultRGB[1] = aDefaultRGB[1];
    #####: 7621:						lDefaultRGB[2] = aDefaultRGB[2];
    #####: 7622:			RGB2Hex(aDefaultRGB, lDefaultHexRGB);
    %%%%%: 7622-block 14
call    0 never executed
        -: 7623:				}
        -: 7624:
    #####: 7625:		if ( osascriptPresent( ) )
    %%%%%: 7625-block 15
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7626:		{
    #####: 7627:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"applescript");return (char *)1;}
    %%%%%: 7627-block 17
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7627-block 18
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7627-block 19
    #####: 7628:				lWasOsascript = 1 ;
    #####: 7629:				strcpy( lDialogString , "osascript");
        -: 7630:
    #####: 7631:				if ( ! osx9orBetter() )
    %%%%%: 7631-block 20
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7632:				{
    #####: 7633:						strcat( lDialogString , " -e 'tell application \"System Events\"' -e 'Activate'");
    #####: 7634:						strcat( lDialogString , " -e 'try' -e 'set mycolor to choose color default color {");
    %%%%%: 7634-block 22
        -: 7635:				}
        -: 7636:				else
        -: 7637:				{
    #####: 7638:						strcat( lDialogString ,
    %%%%%: 7638-block 23
        -: 7639:" -e 'try' -e 'tell app (path to frontmost application as Unicode text) \
        -: 7640:to set mycolor to choose color default color {");
        -: 7641:				}
        -: 7642:
    #####: 7643:				sprintf(lTmp, "%d", 256 * lDefaultRGB[0] ) ;
    #####: 7644:				strcat(lDialogString, lTmp ) ;
    #####: 7645:				strcat(lDialogString, "," ) ;
    #####: 7646:				sprintf(lTmp, "%d", 256 * lDefaultRGB[1] ) ;
    #####: 7647:				strcat(lDialogString, lTmp ) ;
    #####: 7648:				strcat(lDialogString, "," ) ;
    #####: 7649:				sprintf(lTmp, "%d", 256 * lDefaultRGB[2] ) ;
    #####: 7650:				strcat(lDialogString, lTmp ) ;
    #####: 7651:				strcat(lDialogString, "}' " ) ;
    #####: 7652:				strcat( lDialogString ,
        -: 7653:"-e 'set mystring to ((item 1 of mycolor) div 256 as integer) as string' " );
    #####: 7654:				strcat( lDialogString ,
        -: 7655:"-e 'repeat with i from 2 to the count of mycolor' " );
    #####: 7656:				strcat( lDialogString ,
        -: 7657:"-e 'set mystring to mystring & \" \" & ((item i of mycolor) div 256 as integer) as string' " );
    #####: 7658:				strcat( lDialogString , "-e 'end repeat' " );
    #####: 7659:				strcat( lDialogString , "-e 'mystring' ");
    #####: 7660:				strcat(lDialogString, "-e 'on error number -128' " ) ;
    #####: 7661:				strcat(lDialogString, "-e 'end try'") ;
    #####: 7662:				if ( ! osx9orBetter() ) strcat( lDialogString, " -e 'end tell'") ;
    %%%%%: 7662-block 24
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7662-block 26
        -: 7663:		}
    #####: 7664:		else if ( tfd_kdialogPresent() )
    %%%%%: 7664-block 27
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7665:		{
    #####: 7666:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"kdialog");return (char *)1;}
    %%%%%: 7666-block 29
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7666-block 30
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7666-block 31
    #####: 7667:				strcpy( lDialogString , "kdialog" ) ;
    #####: 7668:								if ( (tfd_kdialogPresent() == 2) && tfd_xpropPresent() )
    %%%%%: 7668-block 32
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7668-block 34
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 7669:				{
    #####: 7670:						strcat(lDialogString, " --attach=$(xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)"); /* contribution: Paul Rouget */
    %%%%%: 7670-block 36
        -: 7671:				}
    #####: 7672:				sprintf( lDialogString + strlen(lDialogString) , " --getcolor --default '%s'" , lDefaultHexRGB ) ;
        -: 7673:
    #####: 7674:				if ( aTitle && strlen(aTitle) )
    %%%%%: 7674-block 37
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7674-block 38
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7675:				{
    #####: 7676:						strcat(lDialogString, " --title \"") ;
    #####: 7677:						strcat(lDialogString, aTitle) ;
    #####: 7678:						strcat(lDialogString, "\"") ;
    %%%%%: 7678-block 39
        -: 7679:				}
        -: 7680:		}
    #####: 7681:		else if ( tfd_zenity3Present() || tfd_matedialogPresent() || tfd_shellementaryPresent() || tfd_qarmaPresent() )
    %%%%%: 7681-block 40
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7681-block 42
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 7681-block 44
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
    %%%%%: 7681-block 46
call    9 never executed
branch 10 never executed (fallthrough)
branch 11 never executed
        -: 7682:		{
    #####: 7683:				lWasZenity3 = 1 ;
    #####: 7684:				if ( tfd_zenity3Present() )
    %%%%%: 7684-block 48
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7685:				{
    #####: 7686:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"zenity3");return (char *)1;}
    %%%%%: 7686-block 50
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7686-block 51
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7686-block 52
    #####: 7687:						strcpy( lDialogString , "zenity" );
    #####: 7688:												if ( (tfd_zenity3Present() >= 4) && !getenv("SSH_TTY") && tfd_xpropPresent() )
    %%%%%: 7688-block 53
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7688-block 55
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
    %%%%%: 7688-block 57
call    6 never executed
branch  7 never executed (fallthrough)
branch  8 never executed
        -: 7689:						{
    #####: 7690:								strcat( lDialogString, " --attach=$(sleep .01;xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)"); /* contribution: Paul Rouget */
    %%%%%: 7690-block 59
        -: 7691:						}
        -: 7692:				}
    #####: 7693:				else if ( tfd_matedialogPresent() )
    %%%%%: 7693-block 60
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7694:				{
    #####: 7695:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"matedialog");return (char *)1;}
    %%%%%: 7695-block 62
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7695-block 63
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7695-block 64
    #####: 7696:						strcpy( lDialogString , "matedialog" ) ;
    %%%%%: 7696-block 65
        -: 7697:				}
    #####: 7698:				else if ( tfd_shellementaryPresent() )
    %%%%%: 7698-block 66
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7699:				{
    #####: 7700:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"shellementary");return (char *)1;}
    %%%%%: 7700-block 68
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7700-block 69
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7700-block 70
    #####: 7701:						strcpy( lDialogString , "shellementary" ) ;
    %%%%%: 7701-block 71
        -: 7702:				}
        -: 7703:				else
        -: 7704:				{
    #####: 7705:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"qarma");return (char *)1;}
    %%%%%: 7705-block 72
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7705-block 73
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7705-block 74
    #####: 7706:						strcpy( lDialogString , "qarma" ) ;
    #####: 7707:												if ( !getenv("SSH_TTY") && tfd_xpropPresent() )
    %%%%%: 7707-block 75
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7707-block 77
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 7708:						{
    #####: 7709:								strcat(lDialogString, " --attach=$(xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW | cut -f 2)"); /* contribution: Paul Rouget */
    %%%%%: 7709-block 79
        -: 7710:						}
        -: 7711:				}
    #####: 7712:				strcat( lDialogString , " --color-selection --show-palette" ) ;
    #####: 7713:				sprintf( lDialogString + strlen(lDialogString), " --color=%s" , lDefaultHexRGB ) ;
        -: 7714:
    #####: 7715:				strcat(lDialogString, " --title=\"") ;
    #####: 7716:				if (aTitle && strlen(aTitle)) strcat(lDialogString, aTitle) ;
    %%%%%: 7716-block 80
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7716-block 81
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7716-block 82
    #####: 7717:				strcat(lDialogString, "\"") ;
        -: 7718:
    #####: 7719:				if (tinyfd_silent) strcat( lDialogString , " 2>/dev/null ");
    %%%%%: 7719-block 83
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7719-block 84
        -: 7720:		}
    #####: 7721:		else if (tfd_yadPresent())
    %%%%%: 7721-block 86
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7722:		{
    #####: 7723:		   if (aTitle && !strcmp(aTitle, "tinyfd_query")) { strcpy(tinyfd_response, "yad"); return (char*)1; }
    %%%%%: 7723-block 88
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7723-block 89
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7723-block 90
    #####: 7724:		   strcpy(lDialogString, "yad --color");
    #####: 7725:		   sprintf(lDialogString + strlen(lDialogString), " --init-color=%s", lDefaultHexRGB);
    #####: 7726:		   if (aTitle && strlen(aTitle))
    %%%%%: 7726-block 91
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7726-block 92
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7727:		   {
    #####: 7728:			  strcat(lDialogString, " --title=\"");
    #####: 7729:			  strcat(lDialogString, aTitle);
    #####: 7730:			  strcat(lDialogString, "\"");
    %%%%%: 7730-block 93
        -: 7731:		   }
    #####: 7732:		   if (tinyfd_silent) strcat(lDialogString, " 2>/dev/null ");
    %%%%%: 7732-block 94
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7732-block 95
        -: 7733:		}
    #####: 7734:		else if ( xdialogPresent() )
    %%%%%: 7734-block 96
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7735:		{
    #####: 7736:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"xdialog");return (char *)1;}
    %%%%%: 7736-block 98
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7736-block 99
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7736-block 100
    #####: 7737:				lWasXdialog = 1 ;
    #####: 7738:				strcpy( lDialogString , "Xdialog --colorsel \"" ) ;
    #####: 7739:				if ( aTitle && strlen(aTitle) )
    %%%%%: 7739-block 101
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7739-block 102
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7740:				{
    #####: 7741:						strcat(lDialogString, aTitle) ;
    %%%%%: 7741-block 103
        -: 7742:				}
    #####: 7743:				strcat(lDialogString, "\" 0 60 ") ;
        -: 7744:#if (defined(__cplusplus ) && __cplusplus >= 201103L) || (defined(__STDC_VERSION__) && __STDC_VERSION__ >= 199901L) || defined(__clang__)
    #####: 7745:								sprintf(lTmp,"%hhu %hhu %hhu",lDefaultRGB[0],lDefaultRGB[1],lDefaultRGB[2]);
        -: 7746:#else
        -: 7747:				sprintf(lTmp,"%hu %hu %hu",lDefaultRGB[0],lDefaultRGB[1],lDefaultRGB[2]);
        -: 7748:#endif
    #####: 7749:				strcat(lDialogString, lTmp) ;
    #####: 7750:				strcat(lDialogString, " 2>&1");
    %%%%%: 7750-block 104
        -: 7751:		}
    #####: 7752:				else if ( tkinter3Present( ) )
    %%%%%: 7752-block 105
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7753:				{
    #####: 7754:						if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"python3-tkinter");return (char *)1;}
    %%%%%: 7754-block 107
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7754-block 108
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7754-block 109
    #####: 7755:						strcpy( lDialogString , gPython3Name ) ;
    #####: 7756:						strcat( lDialogString ,
        -: 7757:								" -S -c \"import tkinter;from tkinter import colorchooser;root=tkinter.Tk();root.withdraw();");
    #####: 7758:						strcat( lDialogString , "res=colorchooser.askcolor(color='" ) ;
    #####: 7759:						strcat(lDialogString, lDefaultHexRGB ) ;
    #####: 7760:						strcat(lDialogString, "'") ;
        -: 7761:
    #####: 7762:						if ( aTitle && strlen(aTitle) )
    %%%%%: 7762-block 110
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7762-block 111
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7763:						{
    #####: 7764:								strcat(lDialogString, ",title='") ;
    #####: 7765:								strcat(lDialogString, aTitle) ;
    #####: 7766:								strcat(lDialogString, "'") ;
    %%%%%: 7766-block 112
        -: 7767:						}
    #####: 7768:						strcat( lDialogString , ");\
    %%%%%: 7768-block 113
        -: 7769:\nif res[1] is not None:\n\tprint(res[1])\"" ) ;
        -: 7770:				}
    #####: 7771:				else if ( tkinter2Present( ) )
    %%%%%: 7771-block 114
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7772:		{
    #####: 7773:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){strcpy(tinyfd_response,"python2-tkinter");return (char *)1;}
    %%%%%: 7773-block 116
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7773-block 117
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7773-block 118
    #####: 7774:								strcpy( lDialogString , "export PYTHONIOENCODING=utf-8;" ) ;
    #####: 7775:								strcat( lDialogString , gPython2Name ) ;
    #####: 7776:								if ( ! isTerminalRunning( ) && tfd_isDarwin( ) )
    %%%%%: 7776-block 119
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
    %%%%%: 7776-block 121
call    3 never executed
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 7777:				{
    #####: 7778:				strcat( lDialogString , " -i" ) ;  /* for osx without console */
    %%%%%: 7778-block 123
        -: 7779:				}
        -: 7780:
    #####: 7781:				strcat( lDialogString ,
        -: 7782:" -S -c \"import Tkinter,tkColorChooser;root=Tkinter.Tk();root.withdraw();");
        -: 7783:
    #####: 7784:				if ( tfd_isDarwin( ) )
    %%%%%: 7784-block 124
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7785:				{
    #####: 7786:						strcat( lDialogString ,
    %%%%%: 7786-block 126
        -: 7787:"import os;os.system('''osascript -e 'tell app \\\"Finder\\\" to set \
        -: 7788:frontmost of process \\\"Python\\\" to true' ''');");
        -: 7789:				}
        -: 7790:
    #####: 7791:				strcat( lDialogString , "res=tkColorChooser.askcolor(color='" ) ;
    #####: 7792:				strcat(lDialogString, lDefaultHexRGB ) ;
    #####: 7793:				strcat(lDialogString, "'") ;
        -: 7794:
        -: 7795:
    #####: 7796:			if ( aTitle && strlen(aTitle) )
    %%%%%: 7796-block 127
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7796-block 128
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7797:			{
    #####: 7798:						strcat(lDialogString, ",title='") ;
    #####: 7799:						strcat(lDialogString, aTitle) ;
    #####: 7800:						strcat(lDialogString, "'") ;
    %%%%%: 7800-block 129
        -: 7801:			}
    #####: 7802:				strcat( lDialogString , ");\
    %%%%%: 7802-block 130
        -: 7803:\nif res[1] is not None:\n\tprint res[1]\"" ) ;
        -: 7804:		}
        -: 7805:		else
        -: 7806:		{
    #####: 7807:				if (aTitle&&!strcmp(aTitle,"tinyfd_query")){return tinyfd_inputBox(aTitle,NULL,NULL);}
    %%%%%: 7807-block 131
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7807-block 132
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7807-block 133
call    4 never executed
    #####: 7808:								lPointerInputBox = tinyfd_inputBox(NULL, NULL, NULL); /* obtain a pointer on the current content of tinyfd_inputBox */
    %%%%%: 7808-block 135
call    0 never executed
    #####: 7809:								if (lPointerInputBox) strcpy(lDialogString, lPointerInputBox); /* preserve the current content of tinyfd_inputBox */
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7809-block 137
    #####: 7810:								p = tinyfd_inputBox(aTitle, "Enter hex rgb color (i.e. #f5ca20)", lDefaultHexRGB);
    %%%%%: 7810-block 138
call    0 never executed
        -: 7811:
    #####: 7812:				if ( !p || (strlen(p) != 7) || (p[0] != '#') )
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7812-block 140
branch  2 never executed (fallthrough)
branch  3 never executed
    %%%%%: 7812-block 141
branch  4 never executed (fallthrough)
branch  5 never executed
        -: 7813:				{
    #####: 7814:						return NULL ;
    %%%%%: 7814-block 142
        -: 7815:				}
    #####: 7816:				for ( i = 1 ; i < 7 ; i ++ )
    %%%%%: 7816-block 143
    %%%%%: 7816-block 146
    %%%%%: 7816-block 147
branch  0 never executed
branch  1 never executed (fallthrough)
        -: 7817:				{
    #####: 7818:						if ( ! isxdigit( (int) p[i] ) )
    %%%%%: 7818-block 144
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7819:						{
    #####: 7820:								return NULL ;
    %%%%%: 7820-block 145
        -: 7821:						}
        -: 7822:				}
    #####: 7823:								Hex2RGB(p,aoResultRGB);
    %%%%%: 7823-block 148
call    0 never executed
    #####: 7824:								strcpy(lDefaultHexRGB, p);
    #####: 7825:								if (lPointerInputBox) strcpy(lPointerInputBox, lDialogString); /* restore its previous content to tinyfd_inputBox */
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7825-block 150
    #####: 7826:								return lDefaultHexRGB;
    %%%%%: 7826-block 151
        -: 7827:		}
        -: 7828:
    #####: 7829:		if (tinyfd_verbose) printf( "lDialogString: %s\n" , lDialogString ) ;
    %%%%%: 7829-block 152
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7829-block 153
call    2 never executed
    #####: 7830:		if ( ! ( lIn = popen( lDialogString , "r" ) ) )
    %%%%%: 7830-block 154
call    0 never executed
branch  1 never executed (fallthrough)
branch  2 never executed
        -: 7831:		{
    #####: 7832:				return NULL ;
    %%%%%: 7832-block 156
        -: 7833:	}
    #####: 7834:		while ( fgets( lBuff , sizeof( lBuff ) , lIn ) != NULL )
    %%%%%: 7834-block 157
    %%%%%: 7834-block 158
call    0 never executed
branch  1 never executed
branch  2 never executed (fallthrough)
        -: 7835:		{
        -: 7836:		}
    #####: 7837:		pclose( lIn ) ;
    %%%%%: 7837-block 160
call    0 never executed
    #####: 7838:	if ( ! strlen( lBuff ) )
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7839:	{
    #####: 7840:		return NULL ;
    %%%%%: 7840-block 162
        -: 7841:	}
        -: 7842:		/* printf( "len Buff: %lu\n" , strlen(lBuff) ) ; */
        -: 7843:		/* printf( "lBuff0: %s\n" , lBuff ) ; */
    #####: 7844:	if ( lBuff[strlen( lBuff ) -1] == '\n' )
    %%%%%: 7844-block 163
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7845:	{
    #####: 7846:		lBuff[strlen( lBuff ) -1] = '\0' ;
    %%%%%: 7846-block 164
        -: 7847:	}
        -: 7848:
    #####: 7849:		if ( lWasZenity3 )
    %%%%%: 7849-block 165
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7850:	{
    #####: 7851:				if ( lBuff[0] == '#' )
    %%%%%: 7851-block 166
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7852:				{
    #####: 7853:						if ( strlen(lBuff)>7 )
    %%%%%: 7853-block 167
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7854:						{
    #####: 7855:								lBuff[3]=lBuff[5];
    #####: 7856:								lBuff[4]=lBuff[6];
    #####: 7857:								lBuff[5]=lBuff[9];
    #####: 7858:								lBuff[6]=lBuff[10];
    #####: 7859:								lBuff[7]='\0';
    %%%%%: 7859-block 168
        -: 7860:						}
    #####: 7861:				Hex2RGB(lBuff,aoResultRGB);
    %%%%%: 7861-block 169
call    0 never executed
        -: 7862:				}
    #####: 7863:				else if ( lBuff[3] == '(' ) {
    %%%%%: 7863-block 170
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7864:#if (defined(__cplusplus ) && __cplusplus >= 201103L) || (defined(__STDC_VERSION__) && __STDC_VERSION__ >= 199901L) || defined(__clang__)
    #####: 7865:	sscanf(lBuff,"rgb(%hhu,%hhu,%hhu", & aoResultRGB[0], & aoResultRGB[1],& aoResultRGB[2]);
        -: 7866:#else
        -: 7867:	aoResultRGB[0] = (unsigned char) strtol(lBuff+4, & lTmp2, 10 );
        -: 7868:	aoResultRGB[1] = (unsigned char) strtol(lTmp2+1, & lTmp2, 10 );
        -: 7869:	aoResultRGB[2] = (unsigned char) strtol(lTmp2+1, NULL, 10 );
        -: 7870:#endif
    #####: 7871:	RGB2Hex(aoResultRGB,lBuff);
    %%%%%: 7871-block 171
call    0 never executed
        -: 7872:				}
    #####: 7873:				else if ( lBuff[4] == '(' ) {
    %%%%%: 7873-block 172
branch  0 never executed (fallthrough)
branch  1 never executed
        -: 7874:#if (defined(__cplusplus ) && __cplusplus >= 201103L) || (defined(__STDC_VERSION__) && __STDC_VERSION__ >= 199901L) || defined(__clang__)
    #####: 7875:	sscanf(lBuff,"rgba(%hhu,%hhu,%hhu",  & aoResultRGB[0], & aoResultRGB[1],& aoResultRGB[2]);
        -: 7876:#else
        -: 7877:	aoResultRGB[0] = (unsigned char) strtol(lBuff+5, & lTmp2, 10 );
        -: 7878:	aoResultRGB[1] = (unsigned char) strtol(lTmp2+1, & lTmp2, 10 );
        -: 7879:	aoResultRGB[2] = (unsigned char) strtol(lTmp2+1, NULL, 10 );
        -: 7880:#endif
    #####: 7881:	RGB2Hex(aoResultRGB,lBuff);
    %%%%%: 7881-block 173
call    0 never executed
        -: 7882:				}
        -: 7883:	}
    #####: 7884:	else if ( lWasOsascript || lWasXdialog )
    %%%%%: 7884-block 174
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7884-block 175
branch  2 never executed (fallthrough)
branch  3 never executed
        -: 7885:	{
        -: 7886:				/* printf( "lBuff: %s\n" , lBuff ) ; */
        -: 7887:#if (defined(__cplusplus ) && __cplusplus >= 201103L) || (defined(__STDC_VERSION__) && __STDC_VERSION__ >= 199901L) || defined(__clang__)
    #####: 7888:	sscanf(lBuff,"%hhu %hhu %hhu", & aoResultRGB[0], & aoResultRGB[1],& aoResultRGB[2]);
        -: 7889:#else
        -: 7890:	aoResultRGB[0] = (unsigned char) strtol(lBuff, & lTmp2, 10 );
        -: 7891:	aoResultRGB[1] = (unsigned char) strtol(lTmp2+1, & lTmp2, 10 );
        -: 7892:	aoResultRGB[2] = (unsigned char) strtol(lTmp2+1, NULL, 10 );
        -: 7893:#endif
    #####: 7894:	RGB2Hex(aoResultRGB,lBuff);
    %%%%%: 7894-block 176
call    0 never executed
        -: 7895:	}
        -: 7896:	else
        -: 7897:	{
    #####: 7898:				Hex2RGB(lBuff,aoResultRGB);
    %%%%%: 7898-block 177
call    0 never executed
        -: 7899:	}
        -: 7900:	/* printf("%d %d %d\n", aoResultRGB[0],aoResultRGB[1],aoResultRGB[2]); */
        -: 7901:	/* printf( "lBuff: %s\n" , lBuff ) ; */
        -: 7902:
    #####: 7903:		strcpy(lDefaultHexRGB,lBuff);
    #####: 7904:		return lDefaultHexRGB ;
    %%%%%: 7904-block 178
        -: 7905:}
        -: 7906:
        -: 7907:#endif /* _WIN32 */
        -: 7908:
        -: 7909:
        -: 7910:/* Modified prototypes for R */
        -: 7911:
function tfd_messageBox called 0 returned 0% blocks executed 0%
    #####: 7912:void tfd_messageBox(
        -: 7913:	char const * aTitle ,
        -: 7914:	char const * aMessage ,
        -: 7915:	char const * aDialogType ,
        -: 7916:	char const * aIconType ,
        -: 7917:	int * aiDefaultButton )
        -: 7918:{
    #####: 7919:	* aiDefaultButton = tinyfd_messageBox( aTitle , aMessage , aDialogType , aIconType , * aiDefaultButton ) ;
    %%%%%: 7919-block 2
call    0 never executed
    #####: 7920:}
        -: 7921:
        -: 7922:
function tfd_inputBox called 0 returned 0% blocks executed 0%
    #####: 7923:void tfd_inputBox(
        -: 7924:	char const * aTitle ,
        -: 7925:	char const * aMessage ,
        -: 7926:	char * * aiDefaultInput )
        -: 7927:{
        -: 7928:	char * lReturnedInput ;
    #####: 7929:	if ( ! strcmp( * aiDefaultInput , "NULL") )  lReturnedInput = tinyfd_inputBox( aTitle , aMessage , NULL ) ;
    %%%%%: 7929-block 2
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7929-block 3
call    2 never executed
    #####: 7930:	else lReturnedInput = tinyfd_inputBox( aTitle , aMessage , * aiDefaultInput ) ;
    %%%%%: 7930-block 4
call    0 never executed
        -: 7931:
    #####: 7932:	if ( lReturnedInput ) strcpy ( * aiDefaultInput , lReturnedInput ) ;
    %%%%%: 7932-block 5
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7932-block 6
    #####: 7933:	else strcpy ( * aiDefaultInput , "NULL" ) ;
    %%%%%: 7933-block 7
    #####: 7934:}
        -: 7935:
        -: 7936:
function tfd_saveFileDialog called 0 returned 0% blocks executed 0%
    #####: 7937:void tfd_saveFileDialog(
        -: 7938:	char const * aTitle ,
        -: 7939:	char * * aiDefaultPathAndFile ,
        -: 7940:	int const * aNumOfFilterPatterns ,
        -: 7941:	char const * const * aFilterPatterns ,
        -: 7942:	char const * aSingleFilterDescription )
        -: 7943:{
        -: 7944:	char * lSavefile ;
        -: 7945:
        -: 7946:	/* printf( "aFilterPatterns %s\n" , aFilterPatterns [0]); */
        -: 7947:
    #####: 7948:	lSavefile = tinyfd_saveFileDialog( aTitle , * aiDefaultPathAndFile , * aNumOfFilterPatterns ,
    %%%%%: 7948-block 2
call    0 never executed
        -: 7949:										aFilterPatterns, aSingleFilterDescription ) ;
    #####: 7950:	if ( lSavefile ) strcpy ( * aiDefaultPathAndFile , lSavefile ) ;
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7950-block 4
    #####: 7951:	else strcpy ( * aiDefaultPathAndFile , "NULL" ) ;
    %%%%%: 7951-block 5
    #####: 7952:}
        -: 7953:
        -: 7954:
function tfd_openFileDialog called 0 returned 0% blocks executed 0%
    #####: 7955:void tfd_openFileDialog(
        -: 7956:	char const * aTitle ,
        -: 7957:	char * * aiDefaultPathAndFile ,
        -: 7958:	int const * aNumOfFilterPatterns ,
        -: 7959:	char const * const * aFilterPatterns ,
        -: 7960:	char const * aSingleFilterDescription ,
        -: 7961:	int const * aAllowMultipleSelects )
        -: 7962:{
        -: 7963:	char * lOpenfile ;
        -: 7964:
        -: 7965:	/* printf( "aFilterPatterns %s\n" , aFilterPatterns [0]); */
        -: 7966:
    #####: 7967:	lOpenfile = tinyfd_openFileDialog( aTitle , * aiDefaultPathAndFile , * aNumOfFilterPatterns ,
    %%%%%: 7967-block 2
call    0 never executed
        -: 7968:									aFilterPatterns , aSingleFilterDescription , * aAllowMultipleSelects ) ;
        -: 7969:
    #####: 7970:	if ( lOpenfile ) strcpy ( * aiDefaultPathAndFile , lOpenfile ) ;
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7970-block 4
    #####: 7971:	else strcpy ( * aiDefaultPathAndFile , "NULL" ) ;
    %%%%%: 7971-block 5
    #####: 7972:}
        -: 7973:
        -: 7974:
function tfd_selectFolderDialog called 0 returned 0% blocks executed 0%
    #####: 7975:void tfd_selectFolderDialog(
        -: 7976:	char const * aTitle ,
        -: 7977:	char * * aiDefaultPath )
        -: 7978:{
        -: 7979:	char * lSelectedfolder ;
    #####: 7980:	lSelectedfolder = tinyfd_selectFolderDialog( aTitle, * aiDefaultPath ) ;
    %%%%%: 7980-block 2
call    0 never executed
    #####: 7981:	if ( lSelectedfolder ) strcpy ( * aiDefaultPath , lSelectedfolder ) ;
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7981-block 4
    #####: 7982:	else strcpy ( * aiDefaultPath , "NULL" ) ;
    %%%%%: 7982-block 5
    #####: 7983:}
        -: 7984:
        -: 7985:
function tfd_colorChooser called 0 returned 0% blocks executed 0%
    #####: 7986:void tfd_colorChooser(
        -: 7987:	char const * aTitle ,
        -: 7988:	char * * aiDefaultHexRGB )
        -: 7989:{
    #####: 7990:	unsigned char const aDefaultRGB [ 3 ] = {128,128,128} ;
    #####: 7991:	unsigned char aoResultRGB [ 3 ] =  {128,128,128} ;
        -: 7992:	char * lChosenColor ;
    #####: 7993:	lChosenColor = tinyfd_colorChooser( aTitle, * aiDefaultHexRGB, aDefaultRGB, aoResultRGB ) ;
    %%%%%: 7993-block 2
call    0 never executed
    #####: 7994:	if ( lChosenColor ) strcpy ( * aiDefaultHexRGB , lChosenColor ) ;
branch  0 never executed (fallthrough)
branch  1 never executed
    %%%%%: 7994-block 4
    #####: 7995:	else strcpy ( * aiDefaultHexRGB , "NULL" ) ;
    %%%%%: 7995-block 5
    #####: 7996:}
        -: 7997:
        -: 7998:/* end of Modified prototypes for R */
        -: 7999:
        -: 8000:
        -: 8001:
        -: 8002:/*
        -: 8003:int main( int argc , char * argv[] )
        -: 8004:{
        -: 8005:char const * lTmp;
        -: 8006:char const * lTheSaveFileName;
        -: 8007:char const * lTheOpenFileName;
        -: 8008:char const * lTheSelectFolderName;
        -: 8009:char const * lTheHexColor;
        -: 8010:char const * lWillBeGraphicMode;
        -: 8011:unsigned char lRgbColor[3];
        -: 8012:FILE * lIn;
        -: 8013:char lBuffer[1024];
        -: 8014:char lString[1024];
        -: 8015:char const * lFilterPatterns[2] = { "*.txt", "*.text" };
        -: 8016:
        -: 8017:tinyfd_verbose = argc - 1;
        -: 8018:tinyfd_silent = 1;
        -: 8019:
        -: 8020:lWillBeGraphicMode = tinyfd_inputBox("tinyfd_query", NULL, NULL);
        -: 8021:
        -: 8022:strcpy(lBuffer, "v");
        -: 8023:strcat(lBuffer, tinyfd_version);
        -: 8024:if (lWillBeGraphicMode)
        -: 8025:{
        -: 8026:	strcat(lBuffer, "\ngraphic mode: ");
        -: 8027:}
        -: 8028:else
        -: 8029:{
        -: 8030:	strcat(lBuffer, "\nconsole mode: ");
        -: 8031:}
        -: 8032:strcat(lBuffer, tinyfd_response);
        -: 8033:strcat(lBuffer, "\n");
        -: 8034:strcat(lBuffer, tinyfd_needs+78);
        -: 8035:strcpy(lString, "tinyfiledialogs");
        -: 8036:tinyfd_messageBox(lString, lBuffer, "ok", "info", 0);
        -: 8037:
        -: 8038:tinyfd_notifyPopup("the title", "the message\n\tfrom outer-space", "info");
        -: 8039:
        -: 8040:if (lWillBeGraphicMode && !tinyfd_forceConsole)
        -: 8041:{
        -: 8042:		tinyfd_forceConsole = ! tinyfd_messageBox("Hello World",
        -: 8043:				"graphic dialogs [yes] / console mode [no]?",
        -: 8044:				"yesno", "question", 1);
        -: 8045:}
        -: 8046:
        -: 8047:lTmp = tinyfd_inputBox(
        -: 8048:		"a password box", "your password will be revealed", NULL);
        -: 8049:
        -: 8050:if (!lTmp) return 1;
        -: 8051:
        -: 8052:strcpy(lString, lTmp);
        -: 8053:
        -: 8054:lTheSaveFileName = tinyfd_saveFileDialog(
        -: 8055:		"let us save this password",
        -: 8056:		"passwordFile.txt",
        -: 8057:		2,
        -: 8058:		lFilterPatterns,
        -: 8059:		NULL);
        -: 8060:
        -: 8061:if (!lTheSaveFileName)
        -: 8062:{
        -: 8063:		tinyfd_messageBox(
        -: 8064:				"Error",
        -: 8065:				"Save file name is NULL",
        -: 8066:				"ok",
        -: 8067:				"error",
        -: 8068:				1);
        -: 8069:		return 1;
        -: 8070:}
        -: 8071:
        -: 8072:lIn = fopen(lTheSaveFileName, "w");
        -: 8073:if (!lIn)
        -: 8074:{
        -: 8075:		tinyfd_messageBox(
        -: 8076:				"Error",
        -: 8077:				"Can not open this file in write mode",
        -: 8078:				"ok",
        -: 8079:				"error",
        -: 8080:				1);
        -: 8081:		return 1;
        -: 8082:}
        -: 8083:fputs(lString, lIn);
        -: 8084:fclose(lIn);
        -: 8085:
        -: 8086:lTheOpenFileName = tinyfd_openFileDialog(
        -: 8087:		"let us read the password back",
        -: 8088:		"",
        -: 8089:		2,
        -: 8090:		lFilterPatterns,
        -: 8091:		NULL,
        -: 8092:		0);
        -: 8093:
        -: 8094:if (!lTheOpenFileName)
        -: 8095:{
        -: 8096:		tinyfd_messageBox(
        -: 8097:				"Error",
        -: 8098:				"Open file name is NULL",
        -: 8099:				"ok",
        -: 8100:				"error",
        -: 8101:				1);
        -: 8102:		return 1;
        -: 8103:}
        -: 8104:
        -: 8105:lIn = fopen(lTheOpenFileName, "r");
        -: 8106:
        -: 8107:if (!lIn)
        -: 8108:{
        -: 8109:		tinyfd_messageBox(
        -: 8110:				"Error",
        -: 8111:				"Can not open this file in read mode",
        -: 8112:				"ok",
        -: 8113:				"error",
        -: 8114:				1);
        -: 8115:		return(1);
        -: 8116:}
        -: 8117:lBuffer[0] = '\0';
        -: 8118:fgets(lBuffer, sizeof(lBuffer), lIn);
        -: 8119:fclose(lIn);
        -: 8120:
        -: 8121:tinyfd_messageBox("your password is",
        -: 8122:		lBuffer, "ok", "info", 1);
        -: 8123:
        -: 8124:lTheSelectFolderName = tinyfd_selectFolderDialog(
        -: 8125:		"let us just select a directory", NULL);
        -: 8126:
        -: 8127:if (!lTheSelectFolderName)
        -: 8128:{
        -: 8129:		tinyfd_messageBox(
        -: 8130:				"Error",
        -: 8131:				"Select folder name is NULL",
        -: 8132:				"ok",
        -: 8133:				"error",
        -: 8134:				1);
        -: 8135:		return 1;
        -: 8136:}
        -: 8137:
        -: 8138:tinyfd_messageBox("The selected folder is",
        -: 8139:		lTheSelectFolderName, "ok", "info", 1);
        -: 8140:
        -: 8141:lTheHexColor = tinyfd_colorChooser(
        -: 8142:		"choose a nice color",
        -: 8143:		"#FF0077",
        -: 8144:		lRgbColor,
        -: 8145:		lRgbColor);
        -: 8146:
        -: 8147:if (!lTheHexColor)
        -: 8148:{
        -: 8149:		tinyfd_messageBox(
        -: 8150:				"Error",
        -: 8151:				"hexcolor is NULL",
        -: 8152:				"ok",
        -: 8153:				"error",
        -: 8154:				1);
        -: 8155:		return 1;
        -: 8156:}
        -: 8157:
        -: 8158:tinyfd_messageBox("The selected hexcolor is",
        -: 8159:		lTheHexColor, "ok", "info", 1);
        -: 8160:
        -: 8161:		tinyfd_beep();
        -: 8162:
        -: 8163:		return 0;
        -: 8164:}
        -: 8165:*/
        -: 8166:
        -: 8167:#ifdef _MSC_VER
        -: 8168:#pragma warning(default:4996)
        -: 8169:#pragma warning(default:4100)
        -: 8170:#pragma warning(default:4706)
        -: 8171:#endif
